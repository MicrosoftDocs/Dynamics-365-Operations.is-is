---
title: Reiknið birgðir til ráðstöfunar fyrir smásölurásir
description: Þetta efni lýsir þeim valkostum sem eru í boði til að sýna lagerbirgðir fyrir verslunina og netrásirnar.
author: hhainesms
ms.date: 08/13/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: hhaines
ms.search.validFrom: 2020-02-11
ms.dyn365.ops.version: Release 10.0.10
ms.openlocfilehash: 29efccab017d9dff98872871bfe953fba19d2c30
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: is-IS
ms.lasthandoff: 03/31/2021
ms.locfileid: "5799686"
---
# <a name="calculate-inventory-availability-for-retail-channels"></a><span data-ttu-id="b35e8-103">Reikna tiltækar birgðir fyrir smásölurásir</span><span class="sxs-lookup"><span data-stu-id="b35e8-103">Calculate inventory availability for retail channels</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="b35e8-104">Þetta efnisatriði lýsir því hvernig fyrirtæki geta notað Microsoft Dynamics 365 Commerce til að skoða áætlað birgðaframboð fyrir afurðir í net- og í verslunarrásum.</span><span class="sxs-lookup"><span data-stu-id="b35e8-104">This topic describes how a company can use Microsoft Dynamics 365 Commerce to view estimated on-hand availability for products in the online and store channels.</span></span>

## <a name="accuracy-of-calculation"></a><span data-ttu-id="b35e8-105">Nákvæmni útreikninga</span><span class="sxs-lookup"><span data-stu-id="b35e8-105">Accuracy of calculation</span></span>

<span data-ttu-id="b35e8-106">Commerce notar marga netþjóna og gagnagrunna til að tryggja sveigjanleika og afköst.</span><span class="sxs-lookup"><span data-stu-id="b35e8-106">Commerce uses multiple servers and databases to ensure scalability and performance.</span></span> <span data-ttu-id="b35e8-107">Þess vegna er mikilvægt að þú skiljir að fyrirliggjandi birgðagildi sem eru gefin í gegnum sölustaðarforritið (POS), forritsviðmót forritaskila fyrir rafræn viðskipti eru (API) og birgðasíðurnar á staðnum í höfuðstöðvum viðskiptaráðs eru hugsanlega ekki 100 prósent nákvæm í rauntíma.</span><span class="sxs-lookup"><span data-stu-id="b35e8-107">Therefore, it's important that you understand that the available inventory values that are provided through the point of sale (POS) application, the e-Commerce inventory availability application programming interfaces (APIs), and the on-hand inventory pages in Commerce Headquarters might not be 100-percent accurate in real time.</span></span> <span data-ttu-id="b35e8-108">Ef færslur sem eru stofnaðar fyrir afurðir í net- eða verslunarásinni hafa ekki enn verið samstilltar við miðlara og gagnagrunn Commerce Headquarters, þá geta lagerbirgðasíðurnar í Commerce Headquarters ekki sýnt nákvæmt raunverulegt birgðagildi í rauntíma fyrir þessar afurðir.</span><span class="sxs-lookup"><span data-stu-id="b35e8-108">If transactions that are created for products in the online or store channel haven't yet been synced to the Commerce Headquarters server and database, the on-hand inventory pages in Commerce Headquarters might not show an accurate real-time inventory value for those products.</span></span> <span data-ttu-id="b35e8-109">Hins vegar, ef þú stillir fyrirtæki þitt þannig að notendur í Commerce Headquarters eða önnur samþætt forrit geti selt, tekið á móti, skilað eða á annan hátt stillt birgðir út úr verslun eða vöruhúsi á netinu, þá gæti POS eða netrás ekki haft allar upplýsingar sem þarf til að sýna nákvæmt rauntímalagerbirgðagildi fyrir vörur.</span><span class="sxs-lookup"><span data-stu-id="b35e8-109">Conversely, if you configured your company so that users in Commerce Headquarters or other integrated applications can sell, receive, return, or otherwise adjust inventory out of a store or online warehouse, the POS or online channel might not have all the information that is required to show an accurate real-time on-hand value for items.</span></span>

<span data-ttu-id="b35e8-110">Þetta efni útskýrir samstillingarferla gagna sem hægt er að keyra oft til að hjálpa til við að takmarka biðtíma gagna milli forrita eða rása.</span><span class="sxs-lookup"><span data-stu-id="b35e8-110">This topic explains the data synchronization processes that can be run frequently to help limit the latency of data between applications or channels.</span></span> <span data-ttu-id="b35e8-111">Hins vegar er mikilvægt að þú hafir skilning á því að öll gögn um framboð á lager, sem eru afhent á rekstrardeginum, eru talin áætlað gildi.</span><span class="sxs-lookup"><span data-stu-id="b35e8-111">However, it's critical that you understand that all on-hand availability data that is provided during the operational day is considered an estimated value.</span></span> <span data-ttu-id="b35e8-112">Þess vegna, ef þú reynir að bera lagerbirgðaupplýsingarnar sem forritið veitir saman við raunverulegar efnislegar birgðir í hillunum, eða ef þú reynir að bera lagergildin sem eru sýnd í POS saman við gögnin sem þú finnur fyrir sama vöruhús í Commerce Headquarters gætu gildin verið mismunandi.</span><span class="sxs-lookup"><span data-stu-id="b35e8-112">Therefore, if you try to compare the on-hand inventory information that the application provides with actual physical inventory on the shelves, or if you try to compare the on-hand values that are shown in POS with the on-hand data that you find for the same warehouse in Commerce Headquarters, the values might differ.</span></span> <span data-ttu-id="b35e8-113">Þess er vænst að þessi munur verði á rekstrardeginum og ætti ekki að líta á hann sem vandamál.</span><span class="sxs-lookup"><span data-stu-id="b35e8-113">This difference during the operational day is expected and should not be considered an issue.</span></span> <span data-ttu-id="b35e8-114">Ef þú vilt gera úttekt á gögnum og ganga úr skugga um að gildin sem eru gefin í API fyrir birgðaframboð og Commerce Headquarters passi við raunverulegar efnislega einingar sem eru í hillum verslana þinna eða vöruhúsa, er besti tíminn til að gera það eftir að rásaraðgerðum er lokið fyrir daginn og allar færslur hafa verið samstilltar rétt milli Commerce Headquarters og rásarinnar.</span><span class="sxs-lookup"><span data-stu-id="b35e8-114">If you want to audit data and make sure that the values that are provided in the inventory availability APIs and Commerce Headquarters match the actual physical units that you find on your store or warehouse shelves, the best time to do it is after channel operations have stopped for the day and all transactions have been correctly synced between Commerce Headquarters and the channel.</span></span>

## <a name="use-inventory-lookup-apis-for-e-commerce-inventory-availability-requests"></a><span data-ttu-id="b35e8-115">Notaðu API birgðauppflettingar til að fá beiðnir um birgðahald vegna rafrænna viðskipta</span><span class="sxs-lookup"><span data-stu-id="b35e8-115">Use inventory lookup APIs for e-Commerce inventory availability requests</span></span>

<span data-ttu-id="b35e8-116">Þú getur notað eftirfarandi API til að sýna framboð birgða fyrir afurð þegar viðskiptavinir þínir eru að versla á e-verslunarsíðu.</span><span class="sxs-lookup"><span data-stu-id="b35e8-116">You can use the following APIs to show inventory availability for a product when your customers are shopping on an e-Commerce site.</span></span>

- <span data-ttu-id="b35e8-117">**GetEstimatedAvailability** – Notið þetta API til að sækja birgðaframboð fyrir vöruna í rafrænni viðskiptarás vöruhúss eða í öllum vöruhúsum sem eru tengd við skilgreiningu uppfyllingarflokksins fyrir rafrænar viðskiptarásir.</span><span class="sxs-lookup"><span data-stu-id="b35e8-117">**GetEstimatedAvailability** – Use this API to get inventory availability for the item in the e-Commerce channel warehouse or all warehouses that are linked to the configuration of the fulfillment group for the e-Commerce channel.</span></span> <span data-ttu-id="b35e8-118">Einnig er hægt að nota þetta API fyrir vöruhús á tilteknu leitarsvæði eða radíus, byggt á lengdar- og breiddargráðum.</span><span class="sxs-lookup"><span data-stu-id="b35e8-118">This API can also be used for warehouses in a specific search area or radius, based on longitude and latitude data.</span></span>
- <span data-ttu-id="b35e8-119">**GetEstimatedProductWarehouseAvailability** – Notaðu þetta API til að biðja birgðir um vöru úr tilteknu vöruhúsi.</span><span class="sxs-lookup"><span data-stu-id="b35e8-119">**GetEstimatedProductWarehouseAvailability** – Use this API to request inventory for an item from a specific warehouse.</span></span> <span data-ttu-id="b35e8-120">Til dæmis er hægt að nota það til að sýna framboð birgða í atburðarásum sem fela í sér pöntunarupptöku.</span><span class="sxs-lookup"><span data-stu-id="b35e8-120">For example, you can use it to show inventory availability in scenarios that involve order pickup.</span></span>

> [!NOTE]
> <span data-ttu-id="b35e8-121">Þessi API skipta út **GetProductAvailabilities** og **GetAvailableInventoryNearby** API í Dynamics 365 Retail útgáfu 10.0.7 og yngri.</span><span class="sxs-lookup"><span data-stu-id="b35e8-121">These APIs replace the **GetProductAvailabilities** and **GetAvailableInventoryNearby** APIs in Dynamics 365 Retail version 10.0.7 and earlier.</span></span>

<span data-ttu-id="b35e8-122">Bæði API sækja gögn frá Commerce-miðlaranum og veita mat á lagerbirgðum fyrir tiltekna samsetningu vöru eða vöruafbrigða og vörugeymslu.</span><span class="sxs-lookup"><span data-stu-id="b35e8-122">Both APIs fetch data from the Commerce server and provide an estimate of on-hand inventory for a specific combination of a product or product variant and a warehouse.</span></span> <span data-ttu-id="b35e8-123">Þrátt fyrir að önnur API sem eru fáanleg á Commerce-miðlinum geti farið beint í Commerce Headquarters til að sækja lagermagn af afurðum, mælum við ekki með að þau séu notuð í rafrænu viðskiptaumhverfi vegna hugsanlegra afkomuvandamála og tengdra áhrifa sem þessar tíðar beiðnir geta haft á netþjónum Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="b35e8-123">Although other APIs that are available on the Commerce server can go directly to Commerce Headquarters to fetch on-hand quantities for products, we don't recommend that they be used in an e-Commerce environment because of potential performance issues and the related impact that these frequent requests can have on your Commerce Headquarters servers.</span></span> <span data-ttu-id="b35e8-124">Að auki, ef lagerbirgðir eru reiknaðar út með Commerce-miðlaranum, er líklegra að útreikningurinn innihaldi birgðir sem seldar voru í nýlegum færslum e-Commerce sem hafa ekki enn verið samstilltar við Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="b35e8-124">Additionally, if the on-hand inventory is calculated through the Commerce server, the calculation is more likely to include inventory that was sold in recent e-Commerce transactions that haven't yet been synced to Commerce Headquarters.</span></span> <span data-ttu-id="b35e8-125">Þó að Commerce Headquarters hafi hugsanlega ekki upplýsingar um þessar færslur, þá eru Commerce-miðlarinn og gagnagrunnur rásanna með gögnin.</span><span class="sxs-lookup"><span data-stu-id="b35e8-125">Although Commerce Headquarters might not have information about these transactions, the Commerce server and channel database have the data.</span></span> <span data-ttu-id="b35e8-126">Þess vegna verða gögnin tekin með og geta hjálpað til við að fá nákvæmara mat á tiltækum birgðum afurðar.</span><span class="sxs-lookup"><span data-stu-id="b35e8-126">Therefore, the data will be factored in and can help provide a more accurate estimate of a product's available inventory.</span></span>

### <a name="get-started-with-e-commerce-calculated-inventory-availability"></a><span data-ttu-id="b35e8-127">Byrjaðu með reiknuðum birgðum til ráðstöfunar í e-Commerce</span><span class="sxs-lookup"><span data-stu-id="b35e8-127">Get started with e-Commerce calculated inventory availability</span></span>

<span data-ttu-id="b35e8-128">Áður en hægt er að nota þau tvö API sem minnst var á áður verður að virkja eiginleikann **Fínstilltur útreikningur á framboði afurðar** í gegnum vinnusvæðið **Eiginleikastjórnun** í Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="b35e8-128">Before you use the two APIs that were mentioned earlier, you must enable the **Optimized product availability calculation** feature through the **Feature management** workspace in Commerce Headquarters.</span></span>

<span data-ttu-id="b35e8-129">Áður en API geta reiknað besta mat á birgðum til ráðstöfunar fyrir vöru, verður að vinna reglulega skyndimynd af birgðaframboði frá Commerce Headquarters og senda í rásagagnagrunninn sem Commerce Scale Unit fyrir e-Commerce notar.</span><span class="sxs-lookup"><span data-stu-id="b35e8-129">Before the APIs can calculate the best estimate of inventory availability for an item, a periodic snapshot of inventory availability from Commerce Headquarters must be processed and sent to the channel database that the e-Commerce Commerce Scale Unit uses.</span></span> <span data-ttu-id="b35e8-130">Skyndimyndin táknar upplýsingarnar sem aðalstöðvar Commerce hafa um framboð birgða fyrir ákveðna samsetningu afurðar eða afurðaafbrigða og vörugeymsla.</span><span class="sxs-lookup"><span data-stu-id="b35e8-130">The snapshot represents the information that Commerce Headquarters has about inventory availability for a specific combination of a product or product variant and a warehouse.</span></span> <span data-ttu-id="b35e8-131">Það getur falið í sér birgðaleiðréttingar eða -hreyfingar sem orsakast af innhreyfingum birgða eða af sendingum eða öðrum ferlum sem eru framkvæmdir í Commerce Headquarters og að rás e-Commerce hafi aðeins upplýsingar um vegna samstillingarferilsins.</span><span class="sxs-lookup"><span data-stu-id="b35e8-131">It can include inventory adjustments or movements that are caused by inventory receipts, or by shipments or other processes that are performed in Commerce Headquarters and that the e-Commerce channel has information about only because of the synchronization process.</span></span>

<span data-ttu-id="b35e8-132">Skyndimynd gagnagrunnsins sem vinnslan **Tiltækar afurðir** skapar reiknar aðeins út birgðafærslurnar sem voru unnar og bókaðar í Commerce Headquarters á þeim tíma þegar skyndinmyndin var gerð.</span><span class="sxs-lookup"><span data-stu-id="b35e8-132">The database snapshot that the **Product availability** job creates calculates only the inventory transactions that were processed and posted in Commerce Headquarters at the time when the snapshot was taken.</span></span> <span data-ttu-id="b35e8-133">Ef birgðir voru seldar fyrir afurð í vöruhúsi með staðgreiðslu og ósamhæfri pöntunarsölu viðskiptavina í POS-forritinu, munu Commerce Headquarters ekki strax hafa upplýsingar um tengda birgðaútgáfufærslu fyrir söluna.</span><span class="sxs-lookup"><span data-stu-id="b35e8-133">If inventory was sold for a product in a store warehouse through a cash-and-carry or asynchronous customer order sale in the POS application, Commerce Headquarters won't immediately have information about the related inventory issue transaction for the sale.</span></span> <span data-ttu-id="b35e8-134">Það mun hafa upplýsingar um birgðirnar sem eru seldar fyrir þessar gerðir af sölu verslana aðeins eftir að P-vinnslan hefur hlaðið upp tengdum færslum úr rásagagnagrunni verslunarinnar í Commerce Headquarters og tengd sölupöntun er búin til með yfirlýsingu eða með því að senda bókun með hlutastraum.</span><span class="sxs-lookup"><span data-stu-id="b35e8-134">It will have information about the inventory that is sold for these types of store sales only after the P-job uploads the related transaction from the store's channel database into Commerce Headquarters and the related sales order is created through statement posting or the trickle feed posting processes.</span></span> <span data-ttu-id="b35e8-135">Ferlið við að búa til pöntunina í Commerce Headquarters skapar tengdar birgðafærslur.</span><span class="sxs-lookup"><span data-stu-id="b35e8-135">The process of creating the order in Commerce Headquarters creates the related inventory transactions.</span></span> <span data-ttu-id="b35e8-136">Fyrir pantanir með rafræn viðskipti, hefur Commerce Headquarters upplýsingar um birgðafærslur aðeins eftir að viðskiptin eru send til Commerce Headquarters í gegnum P-starfið og samstillingarferli pöntunarinnar er lokið.</span><span class="sxs-lookup"><span data-stu-id="b35e8-136">For e-Commerce channel orders, Commerce Headquarters has information about the inventory transactions only after the transactions are sent to Commerce Headquarters through the P-job and the order synchronization process is completed.</span></span> <span data-ttu-id="b35e8-137">Þess vegna er mikilvægt að þú skiljir að skyndimynd birgða sem er að finna í vinnslunni **Tiltækar afurðir** gæti ekki verið 100 prósent nákvæmt í rauntíma vegna stöðugrar söluvinnslu sem á sér stað á dreifðum netþjónum.</span><span class="sxs-lookup"><span data-stu-id="b35e8-137">Therefore, it's important that you understand that the inventory snapshot value that is provided in the **Product availability** job might not be 100-percent accurate in real time because of the constant sales processing that occurs across distributed servers.</span></span>

<span data-ttu-id="b35e8-138">Fylgdu þessum skrefum til að taka mynd af birgðum í Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="b35e8-138">To take a snapshot of inventory in Commerce Headquarters, follow these steps.</span></span>

1. <span data-ttu-id="b35e8-139">Farðu í **Retail og Commerce \> Upplýsingatækni smásölu og viðskipta \> Afurðir og birgðir \> Tiltækar afurðir**.</span><span class="sxs-lookup"><span data-stu-id="b35e8-139">Go to **Retail and Commerce \> Retail and Commerce IT \> Products and inventory \> Product availability**.</span></span>
1. <span data-ttu-id="b35e8-140">Veldu **Í lagi** til að keyra vinnsluna **Tiltækar afurðir**.</span><span class="sxs-lookup"><span data-stu-id="b35e8-140">Select **OK** to run the **Product availability** job.</span></span> <span data-ttu-id="b35e8-141">Þú getur líka tímasett þessa vinnslu þannig að það sé keyrt í runu.</span><span class="sxs-lookup"><span data-stu-id="b35e8-141">You can also schedule this job so that it's run in a batch.</span></span>

<span data-ttu-id="b35e8-142">Þegar vinnsla **Tiltækar afurðir** hefur lokið keyrslu verður að ýta gögnunum sem var náð í gagnagrunna rása e-Commerce svo að hægt sé að taka nýjustu skyndimynd birgða Commerce Headquarters með í útreikning á áætlaðar lagerbirgðir.</span><span class="sxs-lookup"><span data-stu-id="b35e8-142">After the **Product availability** job has finished running, the data that was captured must be pushed to the e-Commerce channel databases, so that the latest Commerce Headquarters inventory snapshot can be considered in the calculation of estimated on-hand inventory.</span></span>

1. <span data-ttu-id="b35e8-143">Farðu í **Retail og Commerce \> Upplýsingatækni í Retail og Commerce \> Dreifingaráætlun**.</span><span class="sxs-lookup"><span data-stu-id="b35e8-143">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="b35e8-144">Keyrðu vinnsluna **1130** (**Tiltækar afurðir**) til að samstilla skyndimyndargögnin sem vinnslan **Tiltækar afurðir** stofnaði úr Commerce Headquarters í rásagagnagrunna þína.</span><span class="sxs-lookup"><span data-stu-id="b35e8-144">Run the **1130** (**Product availability**) job to sync the snapshot data that the **Product availability** job created from Commerce Headquarters to your channel databases.</span></span>

<span data-ttu-id="b35e8-145">Þegar beðið er um birgðaframboð úr API **GetEstimatedAvailability** eða **GetEstimatedProductWarehouseAvailability**, er útreikningur keyrður til að reyna að fá besta mögulega mat á birgðum afurðarinnar.</span><span class="sxs-lookup"><span data-stu-id="b35e8-145">When inventory availability is requested from the **GetEstimatedAvailability** or **GetEstimatedProductWarehouseAvailability** API, a calculation is run to try to get the best possible estimate of inventory for the product.</span></span> <span data-ttu-id="b35e8-146">Við útreikninginn er vísað til allra pantana viðskiptavina í e-Commerce sem eru í gagnagrunni rásarinnar en voru ekki með í skyndimyndargögnum sem 1130 vinnslan gaf upp.</span><span class="sxs-lookup"><span data-stu-id="b35e8-146">The calculation references any e-Commerce customer orders that are in the channel database but that weren't included in the snapshot data that the 1130 job provided.</span></span> <span data-ttu-id="b35e8-147">Þessi rök eru framkvæmd með því að rekja síðustu afgreiddu birgðafærslur úr Commerce Headquarters og bera þær saman við færslur í gagnagrunni rásarinnar.</span><span class="sxs-lookup"><span data-stu-id="b35e8-147">This logic is performed by tracking the last processed inventory transaction from Commerce Headquarters and comparing it with the transactions in the channel database.</span></span> <span data-ttu-id="b35e8-148">Það veitir grunnlínu fyrir útreikningsrökum á rásarhliðinni, svo að aukalegar birgðahreyfingar sem áttu sér stað vegna sölufærslna pantana viðskiptavina í gagnagrunni um rafræn viðskipti geta verið færðar inn í áætlað birgðagildi sem API veitir.</span><span class="sxs-lookup"><span data-stu-id="b35e8-148">It provides a baseline for the channel-side calculation logic, so that the additional inventory movements that occurred for customer order sales transactions in the e-Commerce channel database can be factored into the estimated inventory value that the API provides.</span></span>

<span data-ttu-id="b35e8-149">Útreikningsrök rásarinnar skilar áætluðu efnislegu gildi og heildar tiltæku gildi fyrir umbeðna vöru og vöruhús.</span><span class="sxs-lookup"><span data-stu-id="b35e8-149">The channel-side calculation logic returns an estimated physically available value and a total available value for the requested product and warehouse.</span></span> <span data-ttu-id="b35e8-150">Hægt er að sýna gildin á e-Commerce vefsvæðinu þínu ef þú vilt, eða þau geta verið notuð til að kalla fram önnur viðskiptarök á e-Commerce vefsíðunni þinni.</span><span class="sxs-lookup"><span data-stu-id="b35e8-150">The values can be shown on your e-Commerce site if you want, or they can be used to trigger other business logic on your e-Commerce site.</span></span> <span data-ttu-id="b35e8-151">Til dæmis er hægt að sýna skilaboð um „ekki til á lager“ í stað raunverulegs lagermagns sem API stóðst.</span><span class="sxs-lookup"><span data-stu-id="b35e8-151">For example, you can show an "out of stock" message instead of the actual on-hand quantity that the API passed.</span></span>

<span data-ttu-id="b35e8-152">Útreikningsrökin sem rásarhlið á e-Commerce API notar fyrir áætlað birgðaverðmæti geta metið birgðir byggðar eingöngu á pöntunum viðskiptavina sem hafa verið búnar til í gagnagrunni rásarinnar, en sem hefur ekki enn verið samstillt og sent í Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="b35e8-152">The calculation logic that the channel-side e-Commerce APIs use for the estimated inventory value can evaluate inventory based only on customer orders that have been created in the channel database but that haven't yet been synced and posted in Commerce Headquarters.</span></span> <span data-ttu-id="b35e8-153">Ef rásagagnagrunnurinn þinn inniheldur einnig færslugögn fyrir staðgreidda sölu fyrir verslunarsértæk vöruhús, er staðgreidd sala ekki tekin með í útreikning á rásarhlið e-Commerce fyrir þau vöruhús.</span><span class="sxs-lookup"><span data-stu-id="b35e8-153">If your channel database also contains transactional data for cash-and-carry sales for store-specific warehouses, the cash-and-carry sales aren't factored into the channel-side e-Commerce calculation for those warehouses.</span></span>

## <a name="configure-the-inventory-lookup-operation-in-the-pos-channel"></a><span data-ttu-id="b35e8-154">Stilla aðgerð birgðaleitar í POS rásinni</span><span class="sxs-lookup"><span data-stu-id="b35e8-154">Configure the inventory lookup operation in the POS channel</span></span>

<span data-ttu-id="b35e8-155">Í smásöluútgáfu 10.0.9 og eldri, notaði aðgerðin **Birgðauppfletting** úr POS notaði rauntíma þjónustuksll í Commerce Headquarters til að fá birgðaupplýsingar fyrir valda afurð, bæði fyrir núverandi verslun notandans og allar aðrar verslanir sem eru stilltar fyrir uppfyllingarhópinn sem hluta af rásarstillingu fyrir verslunina.</span><span class="sxs-lookup"><span data-stu-id="b35e8-155">In Retail version 10.0.9 and earlier, the **Inventory lookup** operation from POS used a real-time service call to Commerce Headquarters to get inventory information for the selected product, for both the user's current store and any other stores that are configured for the fulfillment group as part of the channel configuration for the store.</span></span> <span data-ttu-id="b35e8-156">Í Commerce-útgáfu 10.0.10 og nýrri er hægt að slökkva á rauntíma þjónustuköllum í Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="b35e8-156">In Commerce version 10.0.10 and later, you can turn off real-time service calls to Commerce Headquarters.</span></span> <span data-ttu-id="b35e8-157">Í staðinn getur þú notað útreikninga á hliðarás á Commerce-miðlaranum til að ákvarða lagerbirgðir sem eru efnislega tiltækar fyrir verslunina og alla aðra staði sem eru skilgreindur í uppfyllingarhópnum.</span><span class="sxs-lookup"><span data-stu-id="b35e8-157">Instead, you can use channel-side calculation on the Commerce server to determine the on-hand inventory that is physically available for the store and any other locations that are defined in the fulfillment group.</span></span> <span data-ttu-id="b35e8-158">Þessi rásarútreiknaða birgðastilling er einnig gagnleg fyrir staði þar sem internettengingin er óáreiðanleg, vegna þess að þú þarft ekki að vera á netinu til að fá úttekt á birgðum í Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="b35e8-158">This channel-calculated inventory configuration is also useful for locations where internet connectivity is unreliable, because you don't have to be online to get inventory lookups from Commerce Headquarters.</span></span>

<span data-ttu-id="b35e8-159">Þegar útreikningur rásarhliða er rétt stilltur og stjórnað á réttan hátt getur það gefið áreiðanlegra mat á núverandi birgðum verslunar, vegna þess að hann notar viðskiptagögnin sem eru í gagnagrunni Commerce-rásar, en Commerce Headquarters hafa ef til vill ekki ennþá upplýsingar um það.</span><span class="sxs-lookup"><span data-stu-id="b35e8-159">When channel-side calculation is correctly configured and managed, it can provide a more reliable estimate of the current store inventory, because it uses the transactional data that is in the Commerce channel database but that Commerce Headquarters might not yet have information about.</span></span> <span data-ttu-id="b35e8-160">Til dæmis, ef þú notar núverandi rauntíma þjónustukall til að leita að birgðum í POS, munu Commerce Headquarters líklega ekki enn hafa upplýsingar um reiðufé og sölu sem bara átti sér stað fyrir vöru.</span><span class="sxs-lookup"><span data-stu-id="b35e8-160">For example, if you use the existing real-time service call for inventory lookups in POS, Commerce Headquarters probably won't yet have information about a cash-and-carry sale that just occurred for a product.</span></span> <span data-ttu-id="b35e8-161">Þess vegna mun verðmæti lagerbirgða sem Commerce Headquarters skilar fyrir þá afurð líklega fara yfir raunverulegar lagerbirgðir verslunarinnar um eina einingu.</span><span class="sxs-lookup"><span data-stu-id="b35e8-161">Therefore, the on-hand inventory value that Commerce Headquarters returns for that product will probably exceed the store's actual on-hand inventory by one unit.</span></span> <span data-ttu-id="b35e8-162">Hins vegar, ef þú notar útreikninga í rásinni er hægt að færa sölu í reiðufé inn í útreikninginn og draga frá því lagervirði sem er sýnt.</span><span class="sxs-lookup"><span data-stu-id="b35e8-162">However, if you use channel-side calculation, the cash-and-carry sale can be factored into the calculation and deducted from the on-hand value that is shown.</span></span> <span data-ttu-id="b35e8-163">Þrátt fyrir að gildin sem bæði útreikningur í rásinni og rauntíma þjónustukall veitir séu aðeins mat á lagerbirgðum er mun líklegra að gildið sem útreikningur í rásinni veitir sé rétt fyrir núverandi verslun.</span><span class="sxs-lookup"><span data-stu-id="b35e8-163">Although the values that both the channel-side calculation and the real-time service call provide are only estimates of on-hand inventory, the value that the channel-side calculation provides is much more likely to be accurate for the current store.</span></span>

### <a name="get-started-with-pos-channel-side-calculated-inventory-availability"></a><span data-ttu-id="b35e8-164">Byrjaðu með reiknuðum birgðum til ráðstöfunar í sölustaðarrás</span><span class="sxs-lookup"><span data-stu-id="b35e8-164">Get started with POS channel-side calculated inventory availability</span></span>

<span data-ttu-id="b35e8-165">Til að nota útreikningsrökin fyrir rásarhlið og slökkva á símtölum rauntímaþjónustu fyrir uppflettingu birgða úr sölustaðarforritinu verður fyrst að virkja eiginleikann **Fínstilltur útreikningur á framboði afurðar** á vinnusvæðinu **Eiginleikastjórnun** í Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="b35e8-165">To use the channel-side calculation logic and turn off real-time service calls for inventory lookups from the POS application, you must first enable the **Optimized product availability calculation** feature through the **Feature management** workspace in Commerce Headquarters.</span></span> <span data-ttu-id="b35e8-166">Til viðbótar við að virkja eiginleikann verður að gera breytingar á **Virkniregla**.</span><span class="sxs-lookup"><span data-stu-id="b35e8-166">In addition to enabling the feature, you must make changes to the **Functionality profile**.</span></span>

<span data-ttu-id="b35e8-167">Til að breyta **Virknireglu** skal fylgja þessum skrefum:</span><span class="sxs-lookup"><span data-stu-id="b35e8-167">To change the **Functionality profile**, follow these steps:</span></span>

1. <span data-ttu-id="b35e8-168">Farðu í **Retail og Commerce \> Uppsetning rásar \> Uppsetning sölustaðar \> Forstillingar sölustaðar \> Virknireglur**.</span><span class="sxs-lookup"><span data-stu-id="b35e8-168">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**.</span></span>
1. <span data-ttu-id="b35e8-169">Veldu virkniforstillingu.</span><span class="sxs-lookup"><span data-stu-id="b35e8-169">Select a functionality profile.</span></span>
1. <span data-ttu-id="b35e8-170">Á flýtiflipanum **Aðgerðir**, í hlutanum **Útreikningur á birgðaframboði**, breytirðu gildi í reitnum **Útreikningsaðferð birgðaframboðs** úr **Rauntímaþjónusta** í **Rás**.</span><span class="sxs-lookup"><span data-stu-id="b35e8-170">On the **Functions** FastTab, in the **Invent availability calculation** section, change the value of the **Invent availability calculation mode** field from **Real time service** to **Channel**.</span></span> <span data-ttu-id="b35e8-171">Sjálfgefið er að allar virkniforstillingar nota rauntíma þjónustuköll.</span><span class="sxs-lookup"><span data-stu-id="b35e8-171">By default, all functionality profiles use real-time service calls.</span></span> <span data-ttu-id="b35e8-172">Þess vegna verður þú að breyta gildi þessa reits ef þú vilt nota útreikningarök í rásinni.</span><span class="sxs-lookup"><span data-stu-id="b35e8-172">Therefore, you must change the value of this field if you want to use channel-side calculation logic.</span></span> <span data-ttu-id="b35e8-173">Þessi breyting hefur áhrif á sérhverja smásöluverslun sem er tengd við valdar virkniforstillingar.</span><span class="sxs-lookup"><span data-stu-id="b35e8-173">Every retail store that is linked to the selected functionality profile will be affected by this change.</span></span>

<span data-ttu-id="b35e8-174">Þá þarf að samstilla breytingarnar við rásina í gegnum vinnslu áætlanadreifingar með því að framkvæma eftirfarandi skref:</span><span class="sxs-lookup"><span data-stu-id="b35e8-174">You must then sync the changes to the channel through the distribution schedule process by performing the following steps:</span></span>

1. <span data-ttu-id="b35e8-175">Farðu í **Retail og Commerce \> Upplýsingatækni í Retail og Commerce \> Dreifingaráætlun**.</span><span class="sxs-lookup"><span data-stu-id="b35e8-175">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="b35e8-176">Keyrðu vinnsluna **1070** (**Stilling rásar**).</span><span class="sxs-lookup"><span data-stu-id="b35e8-176">Run the **1070** (**Channel configuration**) job.</span></span>

<span data-ttu-id="b35e8-177">Þegar uppsetningunni er lokið nota upplýsingarnar sem eru veittar um efnislega tiltækar birgðir ekki lengur rauntíma þjónustukall þegar notandi í POS forritinu notar aðgerðina **Birgðauppfletting** (venjuleg og fylkissýn).</span><span class="sxs-lookup"><span data-stu-id="b35e8-177">After the configuration is completed, the information that is provided about physically available inventory no longer uses a real-time service call when a user in the POS application uses the **Inventory lookup** operation (standard and matrix views).</span></span> <span data-ttu-id="b35e8-178">Þess í stað eru gögn um efnislega tiltækar birgðir fyrir núverandi verslun og allar verslanir í uppfyllingarhópnum reiknuð út frá síðast þekktu skyndimynd sem var afhent í gagnagrunni rásarinnar úr Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="b35e8-178">Instead, data about physically available inventory for the current store and all the stores in the fulfillment group is calculated based on the last-known snapshot that was delivered to the channel database from Commerce Headquarters.</span></span> <span data-ttu-id="b35e8-179">Skyndimyndargildið er frekar betrumbætt með útreikningi á hliðarásinni til að aðlaga líkamlega tiltækt gildi, byggt á viðbótar sölu- eða skilafærslum sem eru fyrir hendi fyrir valda vöru í gagnagrunni rásarinnar sem voru ekki með í síðustu samstilltu skyndimynda úr 1130 starfinu.</span><span class="sxs-lookup"><span data-stu-id="b35e8-179">The snapshot value is further refined by the channel-side calculation to adjust the physically available value, based on additional sales or return transactions that exist for the selected product in the channel database that were not included in the last synchronized snapshot from the 1130 job.</span></span> <span data-ttu-id="b35e8-180">Ef rásagagnagrunnurinn hefur ekki að geyma færslugögn fyrir nein vöruhús eða verslanir í uppfyllingarhópnum inniheldur hann engar viðbótarfærslur sem hægt er að taka með í endurútreikning á gildi.</span><span class="sxs-lookup"><span data-stu-id="b35e8-180">If the channel database doesn't contain transactional data for any of the warehouses or stores in the fulfillment group, it contains no additional transactions that can be factored into a recalculation of the value.</span></span> <span data-ttu-id="b35e8-181">Þess vegna er besta matið á lagerbirgðum sem hægt er að sýna fyrir þessi vöruhús eða verslanir eru gögnin úr síðustu þekktu skyndimynd Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="b35e8-181">Therefore, the best estimate of on-hand inventory that can be shown for those warehouses or stores is the data from the last-known Commerce Headquarters snapshot.</span></span>

<span data-ttu-id="b35e8-182">Skjáirnir **Uppfylling pöntunar** í POS nýta einnig útreikning í rás til að sýna lagerbirgðir fyrir vörur þegar uppfyllingarlína pöntunar er valin og notandi skoðar spjaldið **Upplýsingar** fyrir lagerbirgðir fyrir valda vöru.</span><span class="sxs-lookup"><span data-stu-id="b35e8-182">The **Order fulfillment** screens of POS also leverage the channel side calculation to show on-hand inventory for items when an order fulfillment line is selected and a user views the **Details** panel for on-hand inventory for the selected item.</span></span>

## <a name="optimize-your-inventory-data"></a><span data-ttu-id="b35e8-183">Fínstilltu birgðir þínar</span><span class="sxs-lookup"><span data-stu-id="b35e8-183">Optimize your inventory data</span></span>

<span data-ttu-id="b35e8-184">Til að tryggja besta mögulega mat á birgðum er mikilvægt að þú notir eftirfarandi runuvinnslur Commerce og keyrir þær oft:</span><span class="sxs-lookup"><span data-stu-id="b35e8-184">To ensure the best possible estimate of inventory, it's critical that you use the following Commerce batch jobs and run them frequently:</span></span>

- <span data-ttu-id="b35e8-185">**P-starf** - P-starfið er að finna á síðunni **Dreifingaráætlanir** og ætti að keyra oft.</span><span class="sxs-lookup"><span data-stu-id="b35e8-185">**P-job** – The P-job is found on the **Distribution schedules** page and should be run frequently.</span></span> <span data-ttu-id="b35e8-186">Þessi vinnsla færir pantanir, ósamstilltar pantanir viðskiptavina sem POS bjó til og staðgreiddar pantanir í e-Commerce sem POS stofnaði úr rásagagnagrunnunum í Commerce Headquarters, svo hægt sé að vinna úr þeim frekar.</span><span class="sxs-lookup"><span data-stu-id="b35e8-186">This job brings e-Commerce orders, asynchronous customer orders that POS created, and cash-and-carry orders that POS created from the channel databases into Commerce Headquarters, so that they can be processed further.</span></span> <span data-ttu-id="b35e8-187">Þar til þessi gögn eru samstillt úr rásinni í Commerce Headquarters, hafa Commerce Headquarters engar upplýsingar um birgðaleiðréttingar á afurðum í vöruhúsunum sem leiða af þeim færslum.</span><span class="sxs-lookup"><span data-stu-id="b35e8-187">Until this data is synced from the channel to Commerce Headquarters, Commerce Headquarters has no information about inventory adjustments to products in the warehouses that result from those transactions.</span></span>
- <span data-ttu-id="b35e8-188">**Samstilla pantanir** - Þessi vinnsla keyrir hrá færslugögn í Commerce Headquarters sem P-vinnslan veitir og breytir færslum e-Commerce og ósamstilltum pöntunarfærslum viðskiptavina í sölupantanir í Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="b35e8-188">**Synchronize orders** – This job processes the raw transactional data in Commerce Headquarters that the P-job provides and converts e-Commerce and asynchronous customer order transactions into sales orders in Commerce Headquarters.</span></span> <span data-ttu-id="b35e8-189">Þar til þessi vinnsla hefur keyrt og sölupantanir eru búnar til eru engar birgðafærslur stofnaðar.</span><span class="sxs-lookup"><span data-stu-id="b35e8-189">Until this job is processed and the sales orders are created, no inventory transactions are created.</span></span> <span data-ttu-id="b35e8-190">Þess vegna munu lagerbirgðir í Commerce Headquarters ekki taka tillit til færslanna.</span><span class="sxs-lookup"><span data-stu-id="b35e8-190">Therefore, on-hand inventory in Commerce Headquarters won't consider the transactions.</span></span>
- <span data-ttu-id="b35e8-191">**Reikna færsluuppgjör í runu** - Fyrir staðgreiddar færslur sem eru stofnaðar í versluninni tryggir bókunarferli með hlutastraum að birgðir sem eru tengdar sölu eru uppfærðar á skilvirkan hátt.</span><span class="sxs-lookup"><span data-stu-id="b35e8-191">**Calculate transactional statements in batch** – For cash-and-carry transactions that are created in the store, the trickle feed posting process ensures that inventory that is related to the sales is updated efficiently.</span></span> <span data-ttu-id="b35e8-192">Til að fá sem skilvirkasta vinnslu á birgðafærslum fyrir staðgreiddar pantanir skaltu gæta þess að stilla kerfið til að nota [bókun með hlutastraum](https://docs.microsoft.com/dynamics365/commerce/trickle-feed).</span><span class="sxs-lookup"><span data-stu-id="b35e8-192">To get the most efficient processing of inventory transactions for cash-and-carry orders, make sure that you configure your system to use [trickle feed posting](https://docs.microsoft.com/dynamics365/commerce/trickle-feed).</span></span>
- <span data-ttu-id="b35e8-193">**Bóka færsluuppgjör í runu** - Þessi vinnsla er einnig nauðsynleg fyrir bókun með hlutastraum.</span><span class="sxs-lookup"><span data-stu-id="b35e8-193">**Post transactional statements in batch** – This job is also required for trickle feed posting.</span></span> <span data-ttu-id="b35e8-194">Hún fylgir vinnslunni **Reikna færsluuppgjör í runu**.</span><span class="sxs-lookup"><span data-stu-id="b35e8-194">It follows the **Calculate transactional statements in batch** job.</span></span> <span data-ttu-id="b35e8-195">Þessi vinnsla bókar kerfisbundið reiknuð yfirlit, svo að sölupantanir vegna staðgreiddrar sölu eru stofnaðar í Commerce Headquarters og Commerce Headquarters endurspeglar birgðir verslunarinnar á nákvæmari hátt.</span><span class="sxs-lookup"><span data-stu-id="b35e8-195">This job systematically posts the calculated statements, so that sales orders for cash-and-carry sales are created in Commerce Headquarters and Commerce Headquarters more accurately reflects your store's inventory.</span></span>
- <span data-ttu-id="b35e8-196">**Tiltækar afurðir** - Þessi vinnsla skapar mynd af birgðum úr Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="b35e8-196">**Product availability** – This job creates the snapshot of inventory from Commerce Headquarters.</span></span>
- <span data-ttu-id="b35e8-197">**1130 (Tiltækar afurðir)** - Þessa vinnslu er að finna á síðunni **Dreifingaráætlanir** og ætti að keyra strax á eftir vinnslunni **Tiltækar afurðir**.</span><span class="sxs-lookup"><span data-stu-id="b35e8-197">**1130 (Product availability)** – This job is found on the **Distribution schedules** page and should be run immediately after the **Product availability** job.</span></span> <span data-ttu-id="b35e8-198">Þessi vinnsla flytur skyndimynd birgða úr Commerce Headquarters yfir í gagnagrunna rásarinnar.</span><span class="sxs-lookup"><span data-stu-id="b35e8-198">This job transports the inventory snapshot data from Commerce Headquarters to the channel databases.</span></span>

<span data-ttu-id="b35e8-199">Mælt er með því að keyra ekki þessar runuvinnslur of oft (á nokkurra mínútna fresti).</span><span class="sxs-lookup"><span data-stu-id="b35e8-199">It's recommended that you don't run those batch jobs too frequently (every few minutes).</span></span> <span data-ttu-id="b35e8-200">Tíðar keyrslur valda of miklu álagi á Commerce Headquarters og geta hugsanlega haft áhrif á afköst.</span><span class="sxs-lookup"><span data-stu-id="b35e8-200">Frequent runs will overload Commerce headquarters (HQ) and can potentially impact performance.</span></span> <span data-ttu-id="b35e8-201">Almennt er það góð venja að keyra verk afurðaframboðs og 1130 á klukkutíma fresti og tímasetja P-verk, samstilla pantanir og verk sem tengjast bókun með hlutastraumi með sömu eða hærri tíðni.</span><span class="sxs-lookup"><span data-stu-id="b35e8-201">In general, it's good practice to run product availability and 1130 jobs on an hourly basis, and schedule P-job, synchronize orders, and trickle feed posting-related jobs with the same or higher frequency.</span></span>

> [!NOTE]
> <span data-ttu-id="b35e8-202">Af frammistöðuástæðum, þegar útreikningar á birgðahlið framboðs eru notaðir til að leggja fram beiðni um birgðaaðstoð með því að nota API fyrir e-Commerce eða nýju POS birgðastöðvar við hlið rásar, notar útreikningurinn skyndiminni til að ákvarða hvort nægur tími hafi liðið til að réttlæta að keyra útreikninga rökfræðinnar aftur.</span><span class="sxs-lookup"><span data-stu-id="b35e8-202">For performance reasons, when channel-side inventory availability calculations are used to make an inventory availability request using the e-Commerce API's or the new POS channel-side inventory logic, the calculation uses a cache to determine whether enough time has passed to justify running the calculation logic again.</span></span> <span data-ttu-id="b35e8-203">Sjálfgefið skyndiminni er stillt á 60 sekúndur.</span><span class="sxs-lookup"><span data-stu-id="b35e8-203">The default cache is set to 60 seconds.</span></span> <span data-ttu-id="b35e8-204">Til dæmis kveiktir þú á útreikningi á rásarhlið fyrir verslunina þína og skoðaðir lagerbirgðir fyrir vöru á síðunni **Birgðauppfletting**.</span><span class="sxs-lookup"><span data-stu-id="b35e8-204">For example, you turned on channel-side calculation for your store and viewed the on-hand inventory for a product on the **Inventory lookup** page.</span></span> <span data-ttu-id="b35e8-205">Ef ein eining vörunnar er síðan seld, mun síðan **Birgðauppfletting** ekki sýna minnkaðan lager fyrr en skyndiminni hefur verið hreinsað.</span><span class="sxs-lookup"><span data-stu-id="b35e8-205">If one unit of the product is then sold, the **Inventory lookup** page won't show the reduced inventory until the cache has been cleared.</span></span> <span data-ttu-id="b35e8-206">Eftir að notendur bókað færslur í POS ættu þeir að bíða í 60 sekúndur áður en þeir staðfesta að lagerbirgðir hafi verið skertar.</span><span class="sxs-lookup"><span data-stu-id="b35e8-206">After users post transactions in POS, they should wait 60 seconds before they verify that the on-hand inventory has been reduced.</span></span>

<span data-ttu-id="b35e8-207">Ef viðskiptasvið þitt þarfnast minni skyndiminnistíma skaltu hafa samband við stuðningsfulltrúa þinn til að fá hjálp.</span><span class="sxs-lookup"><span data-stu-id="b35e8-207">If your business scenario requires a smaller cache time, contact your product support representative for help.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]