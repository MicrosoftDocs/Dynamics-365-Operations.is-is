---
title: Samræmisprófun smásölufærslna
description: Þetta efnisatriði lýsir virkni samræmisprófunar færslna í Dynamics 365 Commerce.
author: josaw1
manager: AnnBe
ms.date: 10/14/2019
ms.topic: index-page
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2019-01-15
ms.dyn365.ops.version: 10
ms.openlocfilehash: 3da8bdf6feb932e074680b6cb80e1b7b71f9a82b
ms.sourcegitcommit: 81a647904dd305c4be2e4b683689f128548a872d
ms.translationtype: HT
ms.contentlocale: is-IS
ms.lasthandoff: 02/01/2020
ms.locfileid: "3004252"
---
# <a name="retail-transaction-consistency-checker"></a><span data-ttu-id="ca86f-103">Samræmisprófun smásölufærslna</span><span class="sxs-lookup"><span data-stu-id="ca86f-103">Retail transaction consistency checker</span></span>


[!include [banner](includes/banner.md)]
[!include [preview banner](includes/preview-banner.md)]

<span data-ttu-id="ca86f-104">Þetta efnisatriði lýsir virkni samræmisprófunar færslna í Microsoft Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="ca86f-104">This topic describes the transaction consistency checker functionality in Microsoft Dynamics 365 Commerce.</span></span> <span data-ttu-id="ca86f-105">Í samræmisprófuninni eru færslur með ósamræmi greindar og einangraðar áður en þær eru teknar inn í bókunarferlið.</span><span class="sxs-lookup"><span data-stu-id="ca86f-105">The consistency checker identifies and isolates inconsistent transactions before they are picked up by the statement posting process.</span></span>

<span data-ttu-id="ca86f-106">Þegar uppgjör er bókað getur bókun mistekist vegna ósamræmis í gögnum í færslutöflum viðskiptanna.</span><span class="sxs-lookup"><span data-stu-id="ca86f-106">When a statement is posted, posting can fail due to inconsistent data in the commerce transaction tables.</span></span> <span data-ttu-id="ca86f-107">Gagnavillan getur orðið vegna ófyrirséðra vandamála í forritinu á sölustað (POS) eða vegna villu í flutningi á færslum úr sölustaðarkerfi þriðja aðila.</span><span class="sxs-lookup"><span data-stu-id="ca86f-107">The data issue may be caused by unforeseen issues in the point of sale (POS) application, or if transactions were incorrectly imported from third-party POS systems.</span></span> <span data-ttu-id="ca86f-108">Dæmi um þessi ósamræmi eru meðal annars:</span><span class="sxs-lookup"><span data-stu-id="ca86f-108">Examples of how these inconsistencies may appear include:</span></span> 

- <span data-ttu-id="ca86f-109">Heildarfærsla í haustöflu er ekki í samræmi við heildarfærslu í línunum.</span><span class="sxs-lookup"><span data-stu-id="ca86f-109">The transaction total on the header table does not match the transaction total on the lines.</span></span>
- <span data-ttu-id="ca86f-110">Línufjöldi í haustöflu er ekki í samræmi við fjölda lína í færslutöflunni.</span><span class="sxs-lookup"><span data-stu-id="ca86f-110">The line count on the header table does not match with the number of lines in the transaction table.</span></span>
- <span data-ttu-id="ca86f-111">Skattar í haustöflu eru ekki í samræmi við skattupphæð í línunum.</span><span class="sxs-lookup"><span data-stu-id="ca86f-111">Taxes on the header table do not match the tax amount on the lines.</span></span> 

<span data-ttu-id="ca86f-112">Þegar færslur með ósamræmi eru teknar inn í bókunarferlið verða til sölureikningar og greiðslubækur með ósamræmi og villa kemur upp í öllu bókunarferlinu.</span><span class="sxs-lookup"><span data-stu-id="ca86f-112">When inconsistent transactions are picked up by the statement posting process, inconsistent sales invoices and payment journals are created, and the entire statement posting process fails as a result.</span></span> <span data-ttu-id="ca86f-113">Í því tilfelli þarf flóknar gagnaleiðréttingar í mörgum færslutöflum til að endurheimta færslurnar.</span><span class="sxs-lookup"><span data-stu-id="ca86f-113">Recovering the statements from such a state involves complex data fixes across multiple transaction tables.</span></span> <span data-ttu-id="ca86f-114">Samræmisprófun færslna kemur í veg fyrir slík vandamál.</span><span class="sxs-lookup"><span data-stu-id="ca86f-114">The transaction consistency checker prevents such issues.</span></span>

<span data-ttu-id="ca86f-115">Eftirfarandi tafla sýnir bókunarferli með samræmisprófun smásölufærslna.</span><span class="sxs-lookup"><span data-stu-id="ca86f-115">The following chart illustrates the posting process with the transaction consistency checker.</span></span>

<span data-ttu-id="ca86f-116">![Bókunarferli uppgjörs með samræmisprófun færslu](./media/validchecker.png "Bókunarferli uppgjörs með samræmisprófun smásölufærslna")</span><span class="sxs-lookup"><span data-stu-id="ca86f-116">![Statement posting process with transaction consistency checker](./media/validchecker.png "Statement posting process with retail transaction consistency checker")</span></span>

<span data-ttu-id="ca86f-117">Með runuvinnslunni **Villuleita í færslum verslunar** er samræmi viðskiptafærslutaflna athugað við eftirfarandi aðstæður.</span><span class="sxs-lookup"><span data-stu-id="ca86f-117">The **Validate store transactions** batch process checks the consistency of the commerce transaction tables for the following scenarios.</span></span>

- <span data-ttu-id="ca86f-118">**Viðskiptamannalykill** – Staðfestir að viðskiptamannalykillinn í færslutöflunum sé til staðar í HQ-aðalgögnum viðskiptamanns.</span><span class="sxs-lookup"><span data-stu-id="ca86f-118">**Customer account** – Validates that the customer account in the transaction tables exists in the HQ customer master.</span></span>
- <span data-ttu-id="ca86f-119">**Línufjöldi** – Staðfestir að línufjöldi, samkvæmt haustöflu færslna, sé í samræmi við fjölda lína í sölufærslutöflunum.</span><span class="sxs-lookup"><span data-stu-id="ca86f-119">**Line count** – Validates that the number of lines, as captured on the transaction header table, matches the number of lines in the sales transaction tables.</span></span>
- <span data-ttu-id="ca86f-120">**Verð er með skatti** – Staðfestir að færibreytan **Verð er með skatti** er í samræmi við allar færslulínur.</span><span class="sxs-lookup"><span data-stu-id="ca86f-120">**Price includes tax** – Validates that the **Price includes tax** parameter is consistent across transaction lines.</span></span>
- <span data-ttu-id="ca86f-121">**Greiðsluupphæð** – Staðfestir að greiðslufærsla samsvari greiðsluupphæð í haus.</span><span class="sxs-lookup"><span data-stu-id="ca86f-121">**Payment amount** - Validates that the payment records match the payment amount on header.</span></span>
- <span data-ttu-id="ca86f-122">**Brúttóupphæð** – Staðfestir að brúttóupphæð í hausnum er summa nettóupphæða í línunum ásamt skattupphæðinni.</span><span class="sxs-lookup"><span data-stu-id="ca86f-122">**Gross amount** – Validates that the gross amount on the header is the sum of the net amounts on the lines plus the tax amount.</span></span>
- <span data-ttu-id="ca86f-123">**Nettóupphæð** – Staðfestir að nettóupphæð í hausnum er summa nettóupphæða í línunum.</span><span class="sxs-lookup"><span data-stu-id="ca86f-123">**Net amount** – Validates that the net amount on the header is the sum of the net amounts on the lines.</span></span>
- <span data-ttu-id="ca86f-124">**Vangreiðsla/ofgreiðsla** – Staðfestir að mismunur milli brúttóupphæðar í hausnum og greiðsluupphæðar fer ekki umfram skilgreiningu á hámarki fyrir vangreiðslu/ofgreiðslu.</span><span class="sxs-lookup"><span data-stu-id="ca86f-124">**Under / Over payment** – Validates that the difference between the gross amount on the header and the payment amount doesn't exceed the maximum underpayment/overpayment configuration.</span></span>
- <span data-ttu-id="ca86f-125">**Afsláttarupphæð** – Staðfestir að samræmi er á afsláttarupphæð í afsláttartöflu og afsláttarupphæð í færslulínutöflum og að afsláttarupphæð í hausnum er summa afsláttarupphæða í línunum.</span><span class="sxs-lookup"><span data-stu-id="ca86f-125">**Discount amount** – Validates that the discount amount on the discount tables and the discount amount on the transaction line tables are consistent, and that the discount amount on the header is the sum of the discount amounts on the lines.</span></span>
- <span data-ttu-id="ca86f-126">**Línuafsláttur** – Staðfestir að línuafsláttur í færslulínunni er summa allra línanna í afsláttartöflunni sem eru í samræmi við færslulínuna.</span><span class="sxs-lookup"><span data-stu-id="ca86f-126">**Line discount** – Validates that the line discount on the transaction line is the sum of all the lines in the discount table that corresponds to the transaction line.</span></span>
- <span data-ttu-id="ca86f-127">**Gjafakortsvara** – Commerce styður ekki skil á gjafakortsvörum.</span><span class="sxs-lookup"><span data-stu-id="ca86f-127">**Gift card item** – Commerce doesn't support the return of gift card items.</span></span> <span data-ttu-id="ca86f-128">Hins vegar er hægt að leysa út stöðu á gjafakorti í reiðufé. Gjafakortsvara sem er meðhöndluð sem skilalína í stað línu reiðufjárúttektar kemst ekki í gegnum bókunarferli uppgjörs.</span><span class="sxs-lookup"><span data-stu-id="ca86f-128">However, the balance on a gift card can be cashed out. Any gift card item that is processed as a return line instead of a cash-out line fails the statement posting process.</span></span> <span data-ttu-id="ca86f-129">Staðfestingarferlið fyrir gjafakortsvörur hjálpar til við að tryggja að skilalínur gjafakortsvara í færslutöflunum séu eingöngu línur reiðufjárúttektar fyrir gjafakort.</span><span class="sxs-lookup"><span data-stu-id="ca86f-129">The validation process for gift card items helps guarantee that the only return gift card line items on the transaction tables are gift card cash-out lines.</span></span>
- <span data-ttu-id="ca86f-130">**Neikvætt verð** – Staðfestir að engar færslulínur með neikvæðu verði eru til staðar.</span><span class="sxs-lookup"><span data-stu-id="ca86f-130">**Negative price** – Validates that there are no negative price transaction lines.</span></span>
- <span data-ttu-id="ca86f-131">**Vara og afbrigði** – sannprófar að vörur og afbrigði í færslulínum eru til staðar í grunnskjali fyrir vöru og afbrigði.</span><span class="sxs-lookup"><span data-stu-id="ca86f-131">**Item & Variant** – Validates that items and variants on the transaction lines exist in the item and variant master file.</span></span>
- <span data-ttu-id="ca86f-132">**Skattupphæð** – sannprófar að skattafærslur passi við skattupphæðir í línunum.</span><span class="sxs-lookup"><span data-stu-id="ca86f-132">**Tax amount** - Validates that tax records match the tax amounts on the lines.</span></span>
- <span data-ttu-id="ca86f-133">**Raðnúmer** – sannprófar að raðnúmer sé til staðar í færslulínum fyrir vörur sem er stjórnað af raðnúmeri.</span><span class="sxs-lookup"><span data-stu-id="ca86f-133">**Serial number** - Validates that the serial number is present in the transaction lines for items that are controlled by serial number.</span></span>
- <span data-ttu-id="ca86f-134">**Tákn** – sannprófar að tákn fyrir magn og nettóupphæð sé hið sama í öllum færslulínum.</span><span class="sxs-lookup"><span data-stu-id="ca86f-134">**Sign** - Validates that the sign on the quantity and the net amount are the same in all the transaction lines.</span></span>
- <span data-ttu-id="ca86f-135">**Viðskiptadagur** – sannprófar að fjárhagstímabil fyrir alla viðskiptadaga færslnanna séu opin.</span><span class="sxs-lookup"><span data-stu-id="ca86f-135">**Business date** - Validates that the financial periods for all the business dates for the transactions are open.</span></span>

## <a name="set-up-the-consistency-checker"></a><span data-ttu-id="ca86f-136">Setja upp samræmisprófun</span><span class="sxs-lookup"><span data-stu-id="ca86f-136">Set up the consistency checker</span></span>

<span data-ttu-id="ca86f-137">Skilgreina skal runuvinnsluna „Villuleita í færslum verslunar“ í **Smásala og viðskipti \> Upplýsingatækni smásölu og viðskipta \> Sölustaðarbókun** til að keyra vinnsluna reglulega.</span><span class="sxs-lookup"><span data-stu-id="ca86f-137">Configure the "Validate store transactions" batch process, at **Retail and Commerce \> Retail and Commerce IT \> POS posting**, for periodic runs.</span></span> <span data-ttu-id="ca86f-138">Hægt er að skipuleggja runuvinnsluna á grundvelli stigveldis fyrirtækisins, svipað því hvernig ferlin „Reikna uppgjör í runu“ og „Bóka uppgjör í runu“ eru sett upp.</span><span class="sxs-lookup"><span data-stu-id="ca86f-138">The batch job can be scheduled based on store organization hierarchy, similar to how the "Calculate statement in batch" and "Post statement in batch" processes are set up.</span></span> <span data-ttu-id="ca86f-139">Við mælum með að þú stillir runuvinnsluna þannig að hún sé keyrð oft á dag og að loknu hverju P-verki.</span><span class="sxs-lookup"><span data-stu-id="ca86f-139">We recommend that you configure this batch process to run multiple times in a day and schedule it so that it runs at the end of every P-job execution.</span></span>

## <a name="results-of-validation-process"></a><span data-ttu-id="ca86f-140">Niðurstöður villuleitar</span><span class="sxs-lookup"><span data-stu-id="ca86f-140">Results of validation process</span></span>

<span data-ttu-id="ca86f-141">Niðurstöðum villuleitar er bætt við viðkomandi færslu.</span><span class="sxs-lookup"><span data-stu-id="ca86f-141">The results of the validation check by the batch process are tagged on the appropriate transaction.</span></span> <span data-ttu-id="ca86f-142">Svæðið **Staða villuleitar** í viðkomandi færslu er ýmist stillt á **Lokið** eða **Villa** og dagsetning síðustu villuleitar birtist á svæðinu **Tími síðustu villuleitar**.</span><span class="sxs-lookup"><span data-stu-id="ca86f-142">The **Validation status** field on the transaction record is either set to **Successful** or **Error**, and the date of the last validation run appears on the **Last validation time** field.</span></span>

<span data-ttu-id="ca86f-143">Til að sjá nákvæmari villuboðatexta sem tengist villu í villuleit skal velja viðkomandi færsluskrá verslunar og smella á hnappinn **Villur við villuleit**.</span><span class="sxs-lookup"><span data-stu-id="ca86f-143">To view more descriptive error text relating to a validation failure, select the relevant store transaction record and click the **Validation errors** button.</span></span>

<span data-ttu-id="ca86f-144">Færslur sem standast ekki villuleit og færslur sem enn á eftir að villuleita í eru ekki teknar inn í uppgjör.</span><span class="sxs-lookup"><span data-stu-id="ca86f-144">Transactions that fail the validation check and transactions that have not yet been validated will not be pulled into statements.</span></span> <span data-ttu-id="ca86f-145">Í ferlinu „Reikna uppgjör“ fá notendur tilkynningu um færslur sem eru ekki með í uppgjörinu en hefðu getað verið það.</span><span class="sxs-lookup"><span data-stu-id="ca86f-145">During the "Calculate statement" process, users will be notified if there are transactions that could have been included in the statement but weren't.</span></span>

<span data-ttu-id="ca86f-146">Ef villa finnst við villuleit er einungis hægt að lagfæra hana með því að hafa samband við notendaþjónustu Microsoft.</span><span class="sxs-lookup"><span data-stu-id="ca86f-146">If a validation error is found, the only way to fix the error is to contact Microsoft Support.</span></span> <span data-ttu-id="ca86f-147">Í síðari útgáfu munu notendur geta lagfært skrár með villum í notendaviðmótinu.</span><span class="sxs-lookup"><span data-stu-id="ca86f-147">In a future release, capability will be added so that users can fix the records that failed through the user interface.</span></span> <span data-ttu-id="ca86f-148">Einnig bætast við endurskoðunar- og skráningareiginleikar til að rekja breytingarsöguna.</span><span class="sxs-lookup"><span data-stu-id="ca86f-148">Logging and auditing capabilities will also be made available to trace the history of the modifications.</span></span>

> [!NOTE]
> <span data-ttu-id="ca86f-149">Frekari villuleitarreglum til að styðja við fleiri aðstæður verður bætt við í síðari útgáfu.</span><span class="sxs-lookup"><span data-stu-id="ca86f-149">Additional validation rules to support more scenarios will be added in a future release.</span></span>
