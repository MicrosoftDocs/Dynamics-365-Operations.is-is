---
title: Skilgreina gagnaveitu uppflettingar til að nota færibreytur sem eru sértækar fyrir rafræna skýrslugerð
description: Þetta efnisatriði útskýrir hvernig hægt er að skilgreina gagnaveitur uppflettingar í rafrænum skýrslugerðarsniðum til að forritstengdar færibreytur rafrænnar skýrslugerðar.
author: NickSelin
manager: AnnBe
ms.date: 04/02/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, EROperationDesigner, ERLookupDesigner, ERComponentLookupStructureEditing
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.3
ms.openlocfilehash: 542580c859759c25da84589ec82495eb72bbcbe5
ms.sourcegitcommit: 74f5b04b482b2ae023c728e0df0eb78305493c6a
ms.translationtype: HT
ms.contentlocale: is-IS
ms.lasthandoff: 04/02/2021
ms.locfileid: "5853522"
---
# <a name="configure-lookup-data-sources-to-use-er-application-specific-parameters"></a><span data-ttu-id="be82a-103">Skilgreina gagnaveitu uppflettingar til að nota færibreytur sem eru sértækar fyrir rafræna skýrslugerð</span><span class="sxs-lookup"><span data-stu-id="be82a-103">Configure Lookup data sources to use ER application-specific parameters</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="be82a-104">Eiginleikinn fyrir forritstengdar færibreytur [Rafrænnar skýrslugerðar](general-electronic-reporting.md) gerir þér kleift að skilgreina gagnasíun í sniði rafrænnar skýrslugerðar þannig að hún byggi á safni sértækra reglna.</span><span class="sxs-lookup"><span data-stu-id="be82a-104">The [Electronic reporting (ER)](general-electronic-reporting.md) application-specific parameters feature lets you configure data filtering in an ER format so that it's based on a set of abstract rules.</span></span> <span data-ttu-id="be82a-105">Hægt er að stilla þetta reglusafn til að nota gagnaveitu af gerðinni **Uppfletting** sem er í boði í sniði rafrænnar skýrslugerðar.</span><span class="sxs-lookup"><span data-stu-id="be82a-105">This set of rules can be configured to use the data source of the **Lookup** type that is available in an ER format.</span></span> <span data-ttu-id="be82a-106">Þá er hægt að tilgreina raunverulegar reglur umfram þætti rafrænnar skýrslugerðar með því að nota notandaviðmótið sem sjálfkrafa búið til samkvæmt stillingunum á gagnaveitunni **Uppfletting** í samsvarandi sniði rafrænnar skýrslugerðar og núverandi gögnum lögaðilans.</span><span class="sxs-lookup"><span data-stu-id="be82a-106">You can then specify real rules beyond the ER components designers by using the user interface (UI) that is automatically generated based on the settings of the **Lookup** data source of the corresponding ER format and the current legal entity data.</span></span> <span data-ttu-id="be82a-107">Að lokum verða tilgreindar reglur aðgengilegar gagnaveitu **Uppflettingar** fyrir snið rafrænnar skýrslugerðar þegar þetta snið rafrænnar skýrslugerðar er keyrt.</span><span class="sxs-lookup"><span data-stu-id="be82a-107">Eventually, the specified rules will be accessed by the ER format's **Lookup** data source when this ER format is executed.</span></span>

> [!NOTE]
> <span data-ttu-id="be82a-108">Notið skilgreindar gagnaveitur fyrir breytanlegt snið rafrænnar skýrslugerðar til að tilgreina hvaða forritsgögn eru notuð til að skilgreina raunverulegar reglur.</span><span class="sxs-lookup"><span data-stu-id="be82a-108">Use the configured data sources of the editable ER format to specify what application data is used to configure real rules.</span></span>

<span data-ttu-id="be82a-109">Notið [Aðgerðarhönnuð rafrænnar skýrslugerðar](general-electronic-reporting.md#building-a-format-that-uses-a-data-model-as-a-base) til að flytja gagnaveitu af gerðinni **Uppfletting** inn í snið rafrænnar skýrslugerðar.</span><span class="sxs-lookup"><span data-stu-id="be82a-109">Use the [ER Operations designer](general-electronic-reporting.md#building-a-format-that-uses-a-data-model-as-a-base) to bring a data source of the **Lookup** type in to your ER format.</span></span> <span data-ttu-id="be82a-110">Skilgreina þarf gagnaveituna til að lýsa því hvernig sértæku reglurnar líta út, þ.m.t. eftirfarandi:</span><span class="sxs-lookup"><span data-stu-id="be82a-110">The data source must be configured to describe how your abstract rules look, including the following:</span></span>

   - <span data-ttu-id="be82a-111">Færibreytusafn af ákveðinni gagnagerð þar sem gildin eru gefin upp til að tilgreina eina reglu.</span><span class="sxs-lookup"><span data-stu-id="be82a-111">The parameter set of certain data type whose value is provided to specify a single rule.</span></span>
   - <span data-ttu-id="be82a-112">Gerð gildis ákveðinnar gagnagerðar sem er skilað með einni reglu þegar þessi regla er talin henta best.</span><span class="sxs-lookup"><span data-stu-id="be82a-112">The value type of certain data type that is returned by a single rule when this rule is considered the most appropriate among others.</span></span>

<span data-ttu-id="be82a-113">Hægt er að skilgreina eftirfarandi gerðir af gagnaveitu **Uppflettingar** eftir því hvers konar gildi er skilað af einhverri skilgreindri reglu:</span><span class="sxs-lookup"><span data-stu-id="be82a-113">You can configure the following types of **Lookup** data sources depending on the type of value that is returned by any configured rule:</span></span>

   - <span data-ttu-id="be82a-114">Notið gerðina **Data model\Lookup** þegar skila verður tölusetningargildi líkans.</span><span class="sxs-lookup"><span data-stu-id="be82a-114">Use the **Data model\Lookup** type when a model enumeration value must be returned.</span></span>
   - <span data-ttu-id="be82a-115">Notið gerðina **Dynamics 365 Operations\Lookup** þegar þarf að skila tölusetningargildi forrits eða forritsgildinu [aukin gagnagerð](../extensibility/extensible-edts.md).</span><span class="sxs-lookup"><span data-stu-id="be82a-115">Use the **Dynamics 365 Operations\Lookup** type when an application enumeration value or an application [extended data type](../extensibility/extensible-edts.md) value must be returned.</span></span>
   - <span data-ttu-id="be82a-116">Notið gerðina **Format enumeration\Lookup** þegar skila þarf tölusetningargildi sniðs.</span><span class="sxs-lookup"><span data-stu-id="be82a-116">Use the **Format enumeration\Lookup** type when a format enumeration value must be returned.</span></span>

<span data-ttu-id="be82a-117">Eftirfarandi skýringarmynd sýnir hvernig hægt er að skilgreina tölusetningarsniði í sýnidæmi rafræns skýrslugerðarsniðs.</span><span class="sxs-lookup"><span data-stu-id="be82a-117">The following illustration shows how a format enumeration can be configured in the sample ER format.</span></span>

   ![Sýnir tölusetningu sniðs sem grunn fyrir skilgreinda gagnaveitu uppflettingar](./media/er-lookup-data-sources-img1.gif)

<span data-ttu-id="be82a-119">Eftirfarandi skýringarmynd sýnir þætti sniðs sem voru skilgreindir til að tilkynna um mismunandi gerðir af sköttum í mismunandi hlutum myndaðrar skýrslu.</span><span class="sxs-lookup"><span data-stu-id="be82a-119">The following illustration shows the format components that were configured to report different type of taxes in a different section of a generated report.</span></span>

   ![Sýnir sniðshlutana til að tilkynna hverja mismunandi skattgerð út af fyrir sig](./media/er-lookup-data-sources-img2.png)

<span data-ttu-id="be82a-121">Eftirfarandi skýringarmynd sýnir hvernig aðgerðarhönnuður rafrænnar skýrslugerðar leyfir að bæta við gagnaveitu af gerðinni **Format enumeration\Lookup**.</span><span class="sxs-lookup"><span data-stu-id="be82a-121">The following illustration shows how the ER Operations designer allows the addition of a data source of the **Format enumeration\Lookup** type.</span></span>  <span data-ttu-id="be82a-122">Viðbætt gagnaveita er skilgreind til að skila gildi á tölusetningarsniði `List of taxation levels`.</span><span class="sxs-lookup"><span data-stu-id="be82a-122">The added data source is configured as returning a value of the `List of taxation levels` format enumeration.</span></span>

   ![Gagnaveitu rafrænnar skýrslugerðar af gerðinni Format enumeration\Lookup bætt við](./media/er-lookup-data-sources-img3.gif)

<span data-ttu-id="be82a-124">Eftirfarandi mynd sýnir hvernig viðbætt gagnaveita er skilgreind til að nota reitinn **Kóði** í færslulistanum **Model.Data.Tax** í gagnaveitunni **Líkan** sem færibreytu sem þarf að tilgreina fyrir hverja skilgreinda reglu.</span><span class="sxs-lookup"><span data-stu-id="be82a-124">The following illustration shows how the added data source is configured to use the **Code** field of the **Model.Data.Tax** record list of the **Model** data source as a parameter that must be specified for every configured rule.</span></span>

![Færibreytur viðbættrar gagnaveitu skilgreindar fyrir gerðina Format enumeration\Lookup](./media/er-lookup-data-sources-img4.gif)

<span data-ttu-id="be82a-126">Viðbætt `Model.Data.Tax` gagnaveita er skilgreind til að tilgreina skattkóða fyrir hverja skilgreinda reglu með því opna færslur forritstöflunnar **TaxTable**.</span><span class="sxs-lookup"><span data-stu-id="be82a-126">The added `Model.Data.Tax` data source is configured to specify a tax code for every configured rule by accessing records of the **TaxTable** application table.</span></span>

   ![Yfirferð á gagnaveitu uppflettingar í einu fyrirtæki af gerðinni Format enumeration\Lookup](./media/er-lookup-data-sources-img5.gif)

<span data-ttu-id="be82a-128">Hægt er að setja upp reglur uppflettingar fyrir valið snið rafrænnar skýrslugerðar með því að nota notandaviðmótið sem er sjálfkrafa stillt upp með skipulagi skilgreindrar gagnaveitu.</span><span class="sxs-lookup"><span data-stu-id="be82a-128">You can set up the lookup rules for the selected ER format by using the UI that is automatically aligned with the structure of the configured data source.</span></span> <span data-ttu-id="be82a-129">Sem stendur krefst þetta notandaviðmót fyrir hverja reglu að skilaða gildið sé tilgreint sem tölusetningargildi `List of taxation levels` sniðs ásamt skattkóðanum sem færibreytu.</span><span class="sxs-lookup"><span data-stu-id="be82a-129">Currently, this UI requires that for each rule, you specify the returned value as the `List of taxation levels` format enumeration value as well as the tax code as a parameter.</span></span>

   ![Setja upp reglur fyrir skilgreinda gagnaveitu](./media/er-lookup-data-sources-img6.gif)

<span data-ttu-id="be82a-131">Eftirfarandi skýringarmynd sýnir hvernig hægt er að skilgreina `Model.Data.Summary.LevelByLookup` gagnaveitu af gerðinni **Reiknaður reitur** til að kalla á skilgreinda gagnaveitu **Uppflettingar** sem gefur upp nauðsynlegar færibreytur.</span><span class="sxs-lookup"><span data-stu-id="be82a-131">The following illustration shows how the `Model.Data.Summary.LevelByLookup` data source of the **Calculated field** type can be configured to call the configured **Lookup** data source providing the required parameters.</span></span> <span data-ttu-id="be82a-132">Til að vinna úr þessu kalli á keyrslutíma fer rafræn skýrslugerð í gegnum listann yfir skilgreindar reglur í skilgreindri röð til að hafa upp á fyrstu reglunni sem uppfyllir uppgefin skilyrði.</span><span class="sxs-lookup"><span data-stu-id="be82a-132">To process this call at runtime, ER goes through the list of configured rules in the defined sequence to locate the first rule that satisfies the provided conditions.</span></span> <span data-ttu-id="be82a-133">Í þessu dæmi er það reglan sem inniheldur skattkóðann sem samsvarar þeirri sem gefin er upp.</span><span class="sxs-lookup"><span data-stu-id="be82a-133">In this example, it's the rule that contains the tax code that matches the provided one.</span></span> <span data-ttu-id="be82a-134">Þar af leiðandi finnst hentugasta reglan og tölusetningargildinu sem er skilgreint fyrir fundnu regluna er skilað af þessari gagnaveitu.</span><span class="sxs-lookup"><span data-stu-id="be82a-134">As the result, the most appropriate rule is found and the enumeration value that is configured for the found rule is returned by this data source.</span></span>

> [!NOTE]
> <span data-ttu-id="be82a-135">Undantekning á sér stað þegar engin viðeigandi regla finnst.</span><span class="sxs-lookup"><span data-stu-id="be82a-135">An exception is thrown when no applicable rule is found.</span></span> <span data-ttu-id="be82a-136">Til að koma í veg fyrir þessar undanþágur skal skilgreina frekari reglur neðst í reglulistanum til að sjá um tilfelli þegar óskilgreint gildi eða ekkert gildi er gefið upp.</span><span class="sxs-lookup"><span data-stu-id="be82a-136">To prevent these exceptions, configure additional rules at the end of the rules list to handle cases when a non-configured value or no value is provided.</span></span> <span data-ttu-id="be82a-137">Notið valkostina **\*Ekki autt\*** og **\*Autt\***.</span><span class="sxs-lookup"><span data-stu-id="be82a-137">Use the **\*Not blank**\* and **\*Blank**\* options accordingly.</span></span>  
>
> ![Bæta við gagnaveitu til að kalla á skilgreinda gagnaveitu uppflettingar](./media/er-lookup-data-sources-img7.png)

<span data-ttu-id="be82a-139">Þegar valkosturinn **Milli fyrirtækja** er stilltur á **Já** fyrir breytanlega gagnaveitu uppflettingar er nýrri áskildri færibreytu **Fyrirtækis** bætt við færibreytusafn þessarar gagnaveitu.</span><span class="sxs-lookup"><span data-stu-id="be82a-139">When you set the **Cross-company** option to **Yes** for the editable lookup data source, you add a new required **Company** parameter to the set of parameters of this data source.</span></span> <span data-ttu-id="be82a-140">Gildi færibreytunnar **Fyrirtæki** verður að vera tilgreint við keyrslutíma þegar kallað er á gagnaveitu uppflettingar.</span><span class="sxs-lookup"><span data-stu-id="be82a-140">The value of the **Company** parameter must be specified at runtime when the lookup data source is called.</span></span> <span data-ttu-id="be82a-141">Þegar kóði fyrirtækisins er tilgreindur við keyrslutíma eru reglur sem skilgreindar eru fyrir þetta fyrirtæki notaðar til að finna hentugustu regluna og samsvarandi gildi er skilað.</span><span class="sxs-lookup"><span data-stu-id="be82a-141">When the company code is specified at runtime, the rules configured for this company are used to find the most appropriate rule, and the corresponding value is returned.</span></span> <span data-ttu-id="be82a-142">Eftirfarandi mynd sýnir hvernig hægt er að gera þetta og hvernig færibreytusafn breytanlegrar gagnaveitu er breytt.</span><span class="sxs-lookup"><span data-stu-id="be82a-142">The following illustration shows how you can do this and how the set of parameters of the editable data source is changed.</span></span>

   ![Yfirferð á gagnaveitu uppflettingar milli fyrirtækja af gerðinni Format enumeration\Lookup](./media/er-lookup-data-sources-img8.gif)

> [!NOTE]
> <span data-ttu-id="be82a-144">Veljið hvert fyrirtæki út af fyrir sig til að skilgreina reglusafnið fyrir þessa gagnaveitu uppflettingar á breytanlegu sniði rafrænnar skýrslugerðar.</span><span class="sxs-lookup"><span data-stu-id="be82a-144">Select every company seperately to configure the set of rules for this lookup data source of the editable ER format.</span></span> <span data-ttu-id="be82a-145">Undanþága kemur upp við keyrslutíma þegar kallað er á uppflettingu milli fyrirtækja með kóða fyrirtækisins þar sem stilling uppflettingar var ekki lokið.</span><span class="sxs-lookup"><span data-stu-id="be82a-145">An exception is thrown at runtime when the cross-company lookup is called with the code of the company for which the lookup setting was not completed.</span></span>
>
> <span data-ttu-id="be82a-146">Gangið úr skugga um veittar séu heimildir þeim notanda sem keyrir rafrænt skýrslugerðarsnið með gagnaveitu **Uppflettingar** milli fyrirtækja til að fá aðgang að gögnum úr öllum fyrirtækjum sem eru innan sviðs þessarar gagnaveitu.</span><span class="sxs-lookup"><span data-stu-id="be82a-146">Make sure that you grant permissions for a user who runs the ER format with the cross-company **Lookup** data source to access the data of every company that is in scope of this data source.</span></span> <span data-ttu-id="be82a-147">Annars er undantekning notuð á keyrslutíma.</span><span class="sxs-lookup"><span data-stu-id="be82a-147">Otherwise, an exception is thrown at runtime.</span></span>

<span data-ttu-id="be82a-148">Frá og með útgáfu 10.0.19 eru auknir möguleikar fyrir gagnaveitu **Uppflettingar** í boði.</span><span class="sxs-lookup"><span data-stu-id="be82a-148">Starting in version 10.0.19, the extended capabilities of the **Lookup** data sources are available.</span></span> <span data-ttu-id="be82a-149">Þegar valkosturinn **Stækkað** er stilltur á **Já** fyrir breytanlegan gagnagjafa uppflettingar, er skilgreindri gagnaveitu uppflettingar breytt í skipulagða gagnaveitu sem býður upp á frekari möguleika til að greina skilgreint reglusafn.</span><span class="sxs-lookup"><span data-stu-id="be82a-149">When you set the **Extended** option to **Yes** for the editable lookup data source, the configured lookup data source is transformed to the structured data source that offers the additional capabilities to analyze the configured set of rules.</span></span> <span data-ttu-id="be82a-150">Eftirfarandi mynd sýnir þessa umbreytingu.</span><span class="sxs-lookup"><span data-stu-id="be82a-150">The following illustration shows this transformation.</span></span>

   ![Yfirferð á skipulagðri gagnaveitu uppflettingar af gerðinni Format enumeration\Lookup](./media/er-lookup-data-sources-img9.gif)

- <span data-ttu-id="be82a-152">Undirliðurinn **Uppfletting** er hannaður sem aðgerð til að finna hentugust regluna úr safni af skilgreinanlegum reglum út frá uppgefnu færibreytusafni.</span><span class="sxs-lookup"><span data-stu-id="be82a-152">The **Lookup** sub-item is designed as a function to find the most appropriate rule from the set of configurable rules based on the provided set of parameters.</span></span>
- <span data-ttu-id="be82a-153">Undirliðurinn **IsLookupResultSet** er hannaður sem aðgerð til að samþykkja uppgefið gildi gagnaveitu grunntölusetningar og skila *Boole-gildinu* **Satt** þegar reglusafnið inniheldur að minnsta kosti eina reglu þar sem uppgefið tölusetningargildi var skilgreint sem skilagildi.</span><span class="sxs-lookup"><span data-stu-id="be82a-153">The **IsLookupResultSet** sub-item is designed as a function to accept the provided value of the base enumeration data source and return the *Boolean* value of **True** when the set of rules contain at least one rule for which the provided enumeration value was configured as a returned value.</span></span> <span data-ttu-id="be82a-154">Þessi aðgerð skilar *Boole-gildinu* **Ósatt** þegar engar reglur er skilgreindar til að skila uppgefnu tölusetningargildi.</span><span class="sxs-lookup"><span data-stu-id="be82a-154">This function returns the *Boolean* value of **False** when there are no rules configured to return the provided enumeration value.</span></span>
- <span data-ttu-id="be82a-155">Undirliðurinn **Stilling** er hannaður sem aðgerð sem skilar safni af skilgreindum reglum sem færslum í færslulista.</span><span class="sxs-lookup"><span data-stu-id="be82a-155">The **Setting** sub-item is designed as a function that returns the set of configured rules as records of a record list.</span></span> <span data-ttu-id="be82a-156">Skiluð gildi og færibreytusafn skilgreindra reglna eru sýndar í öllum skiluðum færslum sem reitir af viðeigandi gagnagerðum:</span><span class="sxs-lookup"><span data-stu-id="be82a-156">The returned values and the set of parameters of the configured rules are presented in every returned record as fields of the relevant data types:</span></span>

    - <span data-ttu-id="be82a-157">Skilað gildi er sýnt sem reiturinn **Niðurstaða uppflettingar**.</span><span class="sxs-lookup"><span data-stu-id="be82a-157">The returned value is presented as the **Lookup result** field.</span></span>
    - <span data-ttu-id="be82a-158">Skilgreindu færibreyturnar eru sýndar sem reitir sem bera nafn færibreyta (**Kóði** reiturinn í þessu dæmi).</span><span class="sxs-lookup"><span data-stu-id="be82a-158">The configured parameters are presented as fields having names of parameters (**Code** field in this example).</span></span>

<span data-ttu-id="be82a-159">Frekari upplýsingar um hvernig á að skilgreina gagnaveitu **Uppflettingar** er að finna í [Grunnstilla rafrænt skýrslugerðarsnið til að nota færibreytur sem eru tilgreindar fyrir hvern lögaðila](er-app-specific-parameters-configure-format.md).</span><span class="sxs-lookup"><span data-stu-id="be82a-159">For more information about to how configure the **Lookup** data source, see [Configure ER formats to use parameters that are specified per legal entity](er-app-specific-parameters-configure-format.md).</span></span> <span data-ttu-id="be82a-160">Til að komast að því hvernig á að stilla uppflettingarreglurnar skal skoða [Setja upp færibreytur á sniði rafrænnar skýrslugerðar fyrir hvern lögaðila](er-app-specific-parameters-set-up.md).</span><span class="sxs-lookup"><span data-stu-id="be82a-160">To learn how to set the Lookup rules, see [Set up the parameters of an ER format per legal entity](er-app-specific-parameters-set-up.md).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="be82a-161">Frekari upplýsingar</span><span class="sxs-lookup"><span data-stu-id="be82a-161">Additional resources</span></span>

[<span data-ttu-id="be82a-162">Grunnstilla ER-snið til að nota færibreytur sem eru tilgreindar fyrir hvern lögaðila</span><span class="sxs-lookup"><span data-stu-id="be82a-162">Configure ER formats to use parameters that are specified per legal entity</span></span>](er-app-specific-parameters-configure-format.md)

[<span data-ttu-id="be82a-163">Setja upp færibreytur á sniði rafrænnar skýrslugerðar fyrir hvern lögaðila</span><span class="sxs-lookup"><span data-stu-id="be82a-163">Set up the parameters of an ER format per legal entity</span></span>](er-app-specific-parameters-set-up.md)
