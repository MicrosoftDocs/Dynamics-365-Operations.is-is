---
title: Gagnagjafar þvert á fyrirtæki í rafrænni skýrslugerð (ER)
description: Þetta efnisatriði útskýrir hvernig hægt er að nota gagnagjafa þvert á fyrirtæki í rafrænni skýrslugerð.
author: NickSelin
ms.date: 04/23/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERModelMappingDesigner, ERFormatMappingLegalEntityFilterTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-04-01
ms.dyn365.ops.version: Release 8.0
ms.openlocfilehash: 25c665c797d0cea10cbe337e86be4a07f1f5074a
ms.sourcegitcommit: ab3f5d0da6eb0177bbad720e73c58926d686f168
ms.translationtype: HT
ms.contentlocale: is-IS
ms.lasthandoff: 04/26/2021
ms.locfileid: "5944462"
---
# <a name="cross-company-data-sources-in-electronic-reporting-er"></a><span data-ttu-id="63006-103">Gagnagjafar þvert á fyrirtæki í rafrænni skýrslugerð (ER)</span><span class="sxs-lookup"><span data-stu-id="63006-103">Cross-company data sources in Electronic reporting (ER)</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="63006-104">Hægt er að hanna snið rafrænnar skýrslugerðar til að búa til skjöl á útleið í ýmsum sniðum.</span><span class="sxs-lookup"><span data-stu-id="63006-104">You can design Electronic reporting (ER) formats to generate outgoing documents in various formats.</span></span> <span data-ttu-id="63006-105">Þegar skjal er búið til kallar snið rafrænnar skýrslugerðar á gagnagjafa sem voru skilgreindir í samsvarandi líkanavörpun rafrænnar skýrslugerðar.</span><span class="sxs-lookup"><span data-stu-id="63006-105">When a document is generated, an ER format calls data sources that were configured in a corresponding ER model mapping.</span></span> <span data-ttu-id="63006-106">Til að stilla aðgang að forritatöflum til að sækja skrá er hægt að nota gagnagjafa rafrænnar skýrslugerðar af gerðinni **Töflufærslur**.</span><span class="sxs-lookup"><span data-stu-id="63006-106">To configure access to application tables for record retrieval, you can use ER data sources of the **Table records** type.</span></span> <span data-ttu-id="63006-107">Þegar taflan sem fengin er aðgangur að er samnýtt tafla (þ.e. tafla þar sem gögn eru vistuð án fyrirtækiskennis) skilar þessi gagnagjafi öllum færslum.</span><span class="sxs-lookup"><span data-stu-id="63006-107">When the accessing table is a shared table (that is, a table where data is saved without a company identifier), this data source returns all records.</span></span> <span data-ttu-id="63006-108">Þegar taflan sem fengin er aðgangur að er fyrirtækjaháð tafla (þ.e. tafla þar sem gögn eru vistuð fyrir hvert fyrirtæki) skilar þessi gagnagjafi aðeins færslum sem hafa verið vistaðar fyrir núverandi fyrirtæki (þ.e. samhengi fyrirtækisins sem snið rafrænnar skýrslugerðar keyrir undir).</span><span class="sxs-lookup"><span data-stu-id="63006-108">When the accessing table is a company-dependent table (that is, a table where data is saved per company), this data source returns only the records that have been saved for the current company (that is, the company context that the ER format is running under).</span></span>

<span data-ttu-id="63006-109">Sérhver gagnagjafi af gerðinni **Töflufærslur** í líkanavörpun getur nú verið merkt sem gagnagjafi þvert á fyrirtæki.</span><span class="sxs-lookup"><span data-stu-id="63006-109">Every data source of the **Table records** type in a model mapping can be now marked as a cross-company data source.</span></span> <span data-ttu-id="63006-110">Þess vegna er hægt að nota gagnagjafa af gerðinni **Töflufærslur** til að fá aðgang að gögnum þvert á fyrirtæki í forritartöflum.</span><span class="sxs-lookup"><span data-stu-id="63006-110">Therefore, you can use data sources of the **Table records** type to access cross-company data in application tables.</span></span>

<span data-ttu-id="63006-111">Ef gagnagjafi er merktur sem þvert á fyrirtæki mun eftirfarandi hegðun gerast:</span><span class="sxs-lookup"><span data-stu-id="63006-111">If you mark a data source as cross-company, the following behavior occurs:</span></span>

- <span data-ttu-id="63006-112">Fyrir gagnagjafa sem vísar til einhverrar samnýttrar töflu nema CompanyInfo skilar gagnagjafinn öllum færslum sem eru til staðar í töflunni sem vísað er í.</span><span class="sxs-lookup"><span data-stu-id="63006-112">For a data source that refers to any shared table except CompanyInfo, the data source returns all records that exist in the referenced table.</span></span> 
- <span data-ttu-id="63006-113">Fyrir gagnagjafa sem vísar til CompanyInfo-töflunnar, jafnvel þótt CompanyInfo sé samnýtt tafla, skilar gagnagjafinn færslunum sem innihalda auðkenni fyrirtækis frá skilgreindu umfangi.</span><span class="sxs-lookup"><span data-stu-id="63006-113">For a data source that refers to the CompanyInfo table, even though CompanyInfo is a shared table, the data source returns the records that contain the identifier of a company from the defined scope.</span></span>
- <span data-ttu-id="63006-114">Fyrir sérhverja töflu sem er háð fyrirtæki skilar gagnagjafinn færslum töflunnar sem vísað er í sem innihalda auðkenni fyrirtækisins frá skilgreindu umfangi.</span><span class="sxs-lookup"><span data-stu-id="63006-114">For any company-dependent table, the data source returns the records of the referenced table that contain the identifier of a company from the defined scope.</span></span>

<span data-ttu-id="63006-115">Í svarglugga kerfisfyrirspurnar þegar kveikt er á valkostinum **Biðja um fyrirspurn** fyrir hvaða gagnagjafa sem er merktur sem þvert á fyrirtæki, er hægt að velja handvirkt eitt eða fleiri fyrirtæki til að hafa með í flipanum **Fyrirtækjasvið**.</span><span class="sxs-lookup"><span data-stu-id="63006-115">In the system query dialog box, when the **Ask for query** option is turned on for any data source that is marked as cross-company, you can manually select one or more companies to include on the **Company range** tab.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="63006-116">Eins og aðrar síur er fyrirtækissía notuð sem síðast notaða gildið fyrir fyrirspurnir þegar snið rafrænnar skýrslugerðar er keyrt.</span><span class="sxs-lookup"><span data-stu-id="63006-116">Like other filters, the company filter is persisted as a last-used value for queries when you run an ER format.</span></span> <span data-ttu-id="63006-117">Sían breytist ekki sjálfkrafa ef gildinu þvert á fyrirtæki er breytt fyrir gagnagjafa.</span><span class="sxs-lookup"><span data-stu-id="63006-117">The filter isn't automatically changed if you change the cross-company value for a data source.</span></span> <span data-ttu-id="63006-118">Til að nota annað gildi þvert á fyrirtæki fyrir annan gagnagjafa skal eyða samsvarandi notendasértæku vali.</span><span class="sxs-lookup"><span data-stu-id="63006-118">To use a different cross-company value for another data source, delete the corresponding user-specific selection.</span></span>

<span data-ttu-id="63006-119">Fyrir hvern gagnagjafa sem merktur er sem þvert á fyrirtæki er hægt að velja færslurnar sem þú vilt með því að nota virknirnar **SÍA** og **HVAR** í segðum rafrænnar skýrslugerðar.</span><span class="sxs-lookup"><span data-stu-id="63006-119">For every data source that is marked as cross-company, you can select the records that you want by using the **FILTER** and **WHERE** functions in ER expressions.</span></span> <span data-ttu-id="63006-120">Einnig er hægt að nota reitinn **dataAreaID** sem auðkenni fyrirtækis.</span><span class="sxs-lookup"><span data-stu-id="63006-120">The **dataAreaID** field can also be used as a company identifier.</span></span> <span data-ttu-id="63006-121">Reiturinn **dataAreaID** er, eins og er, takmarkaður við eftirfarandi gerðir af skilyrðum þegar virknin **SÍA** er notuð:</span><span class="sxs-lookup"><span data-stu-id="63006-121">Currently, the **dataAreaID** field is limited to the following types of conditions when the **FILTER** function is used:</span></span>

- <span data-ttu-id="63006-122">Aðeins skilyrði sem hafa einn **dataAreaID** reitarsamanburð eru studd.</span><span class="sxs-lookup"><span data-stu-id="63006-122">Only conditions that have a single **dataAreaID** field comparison are supported.</span></span>
- <span data-ttu-id="63006-123">Aðeins samanburður sem hefur segðir sem eru ekki háðar vörum færslulista er heimilaður.</span><span class="sxs-lookup"><span data-stu-id="63006-123">Only comparisons that have expressions that don't depend on records list items are allowed.</span></span>

<span data-ttu-id="63006-124">Þess vegna er eftirfarandi segð gild.</span><span class="sxs-lookup"><span data-stu-id="63006-124">Therefore, the following expression is valid.</span></span>

```ER Expression
FILTER (MyTable, MyTable.dataAreaID = $StringUserInputParameter)
While shown below expressions will not pass the validation:
FILTER (MyTable, MyTable.dataAreaID = MyTable2RecordsList.MyField)
FILTER (MyTable, 
    OR(
        MyTable.dataAreaID = $StringUserInputParameter1,
        MyTable.dataAreaID = $StringUserInputParameter2
    )
)
```

<span data-ttu-id="63006-125">Umfangið inniheldur að sjálfgefnu öll fyrirtæki núverandi forrits.</span><span class="sxs-lookup"><span data-stu-id="63006-125">By default, the scope includes all companies of the current application.</span></span> <span data-ttu-id="63006-126">Hins vegar er hægt að takmarka það.</span><span class="sxs-lookup"><span data-stu-id="63006-126">However, it can be restricted.</span></span> <span data-ttu-id="63006-127">Til að takmarka umfang aðgangs að gögnum þvert yfir fyrirtæki fyrir eitt snið rafrænnar skýrslugerðar skal úthluta tilteknu stigveldi fyrirtækis á sniðið.</span><span class="sxs-lookup"><span data-stu-id="63006-127">To restrict the scope of cross-company data access for a single ER format, assign a specific organization hierarchy to the format.</span></span> <span data-ttu-id="63006-128">Þegar stigveldi er skilgreint fyrir snið rafrænnar skýrslugerðar er eingöngu færslum fyrir lögaðila sem eru kynntir í úthlutuðu stigveldi skilað, jafnvel þótt sniðið kalli á gagnagjafa þvert yfir fyrirtæki.</span><span class="sxs-lookup"><span data-stu-id="63006-128">When a hierarchy is defined for an ER format, only records for legal entities that are presented in the assigned hierarchy are returned, even though the format calls cross-company data sources.</span></span> <span data-ttu-id="63006-129">Þegar tilvísun í stigveldi sem ekki er lengur til er skilgreint fyrir snið rafrænnar skýrslugerðar er sjálfgefið umfang notað og sniðið kallar á gagnagjafa þvert yfir fyrirtæki.</span><span class="sxs-lookup"><span data-stu-id="63006-129">When a reference to a hierarchy that no longer exists is defined for an ER format, the default scope is applied, and the format calls cross-company data sources.</span></span> <span data-ttu-id="63006-130">Í þessum kringumstæðum er færslum fyrir öll umsóknarfyrirtæki skilað.</span><span class="sxs-lookup"><span data-stu-id="63006-130">In this situation, records for all application companies are returned.</span></span>

<span data-ttu-id="63006-131">Athugaðu að þegar kveikt er á valkostinum **Nota drög** fyrir úthlutun á einu fyrirtækisstigveldi fyrir snið rafrænnar skýrslugerðar verða lögaðilar frá drögunum af þessu stigveldi notaðir til að bera kennsl á umfang gagnagjafa þvert á fyrirtæki.</span><span class="sxs-lookup"><span data-stu-id="63006-131">Note that when the **Use draft** option is turned on for the assigned to a single ER format organization hierarchy, the legal entities from the draft version of this hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="63006-132">Ef útgáfudrög eru ekki til verða lögaðilar frá síðustu birtu útgáfu af þessu fyrirtækisstigveldi notaðir fyrir þetta.</span><span class="sxs-lookup"><span data-stu-id="63006-132">If the draft version does not exist, the legal entities from the last published version of this organization hierarchy will be used for this.</span></span>

<span data-ttu-id="63006-133">Athugaðu að þegar slökkt er á valkostinum **Nota drög** fyrir úthlutun á einu fyrirtækisstigveldi fyrir snið rafrænnar skýrslugerðar verða lögaðilar frá síðustu birtu útgáfu af þessu fyrirtækisstigveldi notaðir til að bera kennsl á umfang gagnagjafa þvert á fyrirtæki.</span><span class="sxs-lookup"><span data-stu-id="63006-133">Note that when the **Use draft** option is turned off for the assigned to a single ER format organization hierarchy, the legal entities from the last published version of this organization hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="63006-134">Skilvirkni dagsetningar fyrir fyrirtækisstigveldi er enn ekki stutt í ramma rafrænnar skýrslugerðar.</span><span class="sxs-lookup"><span data-stu-id="63006-134">Date effectiveness of organization hierarchies is not supported yet in the ER framework.</span></span>

<span data-ttu-id="63006-135">Hægt er að úthluta stigveldinu á snið á tiltekinni síðu sem hægt er að nálgast frá vinnusvæði rafrænnar skýrslugerðar eða með því að nota valmyndaratriðið **Fyrirtækisstjórnun \> Rafræn skýrslugerð \> Sía lögaðila fyrir snið**.</span><span class="sxs-lookup"><span data-stu-id="63006-135">The hierarchy can be assigned to a format in a specific page that can be accessed from the ER workspace or by using the **Organization administration \> Electronic reporting \> Legal entity filter for formats** menu item.</span></span> <span data-ttu-id="63006-136">Til að fá aðgang að síðunni verður að veita notandanum réttindin **Vinna með síur lögaðila** (ERMaintainFormatMappingLegalEntityFilters).</span><span class="sxs-lookup"><span data-stu-id="63006-136">To access the page, the **Maintain legal entity filters for format** privilege (ERMaintainFormatMappingLegalEntityFilters) must be granted to a user.</span></span> <span data-ttu-id="63006-137">Takmörkun á umfangi lögaðila sem eru byggðir á stigveldi fyrir sniðið er notað til viðbótar við takmörkunina sem notandinn getur handvirkt tilgreint í svarglugga kerfisfyrirspurnar.</span><span class="sxs-lookup"><span data-stu-id="63006-137">The scope restriction of hierarchy-based legal entities for the format is applied in addition to the restriction that the user can manually specify in the system query dialog box.</span></span> <span data-ttu-id="63006-138">Skörun þessara takmarkana er notuð þegar sniðið er keyrt.</span><span class="sxs-lookup"><span data-stu-id="63006-138">The intersection of these restrictions is used when the format is run.</span></span>

<span data-ttu-id="63006-139">Til að læra meira um þennan eiginleika skal spila verkefnaleiðbeiningarnar, **Aðgangsfærslur rafrænnar skýrslugerðar fyrir töflum háðum fyrirtæki í stillingunni þvert yfir fyrirtæki**, sem er hluti af viðskiptaferlinu 7.5.4.3 Acquire/Þróun upplýsingatækniþjónustu/lausnarhlutar (10677) og hægt er að sækja á [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span><span class="sxs-lookup"><span data-stu-id="63006-139">To learn more about this feature, play the task guide, **ER Access records of company dependent tables in cross-company mode**, which is part of the 7.5.4.3 Acquire/Develop IT service/solution components (10677) business process, and can be downloaded from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span></span> <span data-ttu-id="63006-140">Þessar verkefnaleiðbeiningar fylgja þér í gegnum skilgreiningarferli fyrir líkanavörpun rafrænnar skýrslugerðar og snið rafrænnar skýrslugerðar til að fá aðgang að forritatöflum í stillingunni þvert á fyrirtæki.</span><span class="sxs-lookup"><span data-stu-id="63006-140">This task guide walks you through the process of configuring an ER model mapping and ER format to access application tables in cross-company mode.</span></span>

<span data-ttu-id="63006-141">Sæka eftirfarandi skrár til að ljúka verkefnaleiðbeiningunni:</span><span class="sxs-lookup"><span data-stu-id="63006-141">Download the following files to complete the task guide:</span></span>

- [<span data-ttu-id="63006-142">Skilgreining á líkani rafrænnar skýrslugerðar - CrossCompanyDataAccessModel.xml</span><span class="sxs-lookup"><span data-stu-id="63006-142">ER model configuration - CrossCompanyDataAccessModel.xml</span></span>](https://download.microsoft.com/download/4/2/5/4258f891-7054-4821-aedd-3721ba25fdd5/CrossCompanyDataAccessModel.xml)
- [<span data-ttu-id="63006-143">Skilgreining á líkani rafrænnar skýrslugerðar - CrossCompanyDataAccessFormat.xml</span><span class="sxs-lookup"><span data-stu-id="63006-143">ER format configuration - CrossCompanyDataAccessFormat.xml</span></span>](https://download.microsoft.com/download/3/2/1/321deb75-3ba9-4323-99bf-207a52c60b5c/CrossCompanyDataAccessFormat.xml)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
