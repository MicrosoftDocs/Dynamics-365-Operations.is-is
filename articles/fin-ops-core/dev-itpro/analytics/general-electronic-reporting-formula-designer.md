---
title: Formúluhönnuður í rafrænni skýrslugerð (ER)
description: Þetta efni inniheldur upplýsingar um hvernig á að nota formúluhönnuðinn í rafrænni skýrslugerð (ER).
author: NickSelin
manager: kfend
ms.date: 12/05/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 0028d1f64aced1bbff91b18456c81adbb95bce30
ms.sourcegitcommit: 36857283d70664742c8c04f426b231c42daf4ceb
ms.translationtype: HT
ms.contentlocale: is-IS
ms.lasthandoff: 12/20/2019
ms.locfileid: "2914819"
---
# <a name="formula-designer-in-electronic-reporting-er"></a><span data-ttu-id="5894a-103">Formúluhönnuður í rafrænni skýrslugerð (ER)</span><span class="sxs-lookup"><span data-stu-id="5894a-103">Formula designer in Electronic reporting (ER)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="5894a-104">Þessi Umfjöllunarefni útskýrir hvernig nota á formúluhönnuður í Rafræna skýrslugerð (ER).</span><span class="sxs-lookup"><span data-stu-id="5894a-104">This topic explains how to use the formula designer in Electronic reporting (ER).</span></span> <span data-ttu-id="5894a-105">Þegar þú hannar snið fyrir tiltekið rafrænt skjal í ER má nota formúlur til að umbreyta gögnum þannig að þau uppfylli kröfur um gerð og snið skjalsins.</span><span class="sxs-lookup"><span data-stu-id="5894a-105">When you design a format for a specific electronic document in ER, you can use formulas to transform data so that it meets the requirements for the document's fulfillment and formatting.</span></span> <span data-ttu-id="5894a-106">Þessar formúlur líkjast formúlum í Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="5894a-106">These formulas resemble formulas in Microsoft Excel.</span></span> <span data-ttu-id="5894a-107">Ýmsar tegundir aðgerða eru studdar í formúlunum: texti, dagsetning og tími, stærðfræðilegar, röklegar, upplýsingar og umbreytingaraðgerðir gagnagerðar og einnig aðrar aðgerðir sem eru lénsértækar fyrir viðskipti.</span><span class="sxs-lookup"><span data-stu-id="5894a-107">Various types of functions are supported in the formulas: text, date and time, mathematical, logical, information, and data type conversion functions, and also other, business domain–specific functions.</span></span>

## <a name="formula-designer-overview"></a><span data-ttu-id="5894a-108">Yfirlit Formúluhönnuður.</span><span class="sxs-lookup"><span data-stu-id="5894a-108">Formula designer overview</span></span>

<span data-ttu-id="5894a-109">Rafræn skýrslugerð styður formúluhönnuðinn.</span><span class="sxs-lookup"><span data-stu-id="5894a-109">ER supports the formula designer.</span></span> <span data-ttu-id="5894a-110">Á hönnunartíma er því hægt að skilgreina segðir sem hægt er að nota fyrir eftirfarandi verkefni á keyrslutíma:</span><span class="sxs-lookup"><span data-stu-id="5894a-110">Therefore, at design time, you can configure expressions that can be used for the following tasks at runtime:</span></span>

- <span data-ttu-id="5894a-111">Umbreytingu gagna úr gagnagrunni forrits sem eiga að vera slegin inn í gagnalíkan rafrænnar skýrslugerðar sem er hannað til að vera gagnagjafi fyrir snið rafrænnar skýrslugerðar.</span><span class="sxs-lookup"><span data-stu-id="5894a-111">Transform data that is received from an application database and that should be entered in an ER data model that is designed to be a data source for ER formats.</span></span> <span data-ttu-id="5894a-112">(Til dæmis geta þessar umbreytingar innihaldið síun, flokkun og umbreytingu gagnagerða.)</span><span class="sxs-lookup"><span data-stu-id="5894a-112">(For example, these transformations might include filtering, grouping, and data type conversion.)</span></span>
- <span data-ttu-id="5894a-113">Sníðing gagna sem verða að vera send á stofnað rafrænt skjal í samræmi við útlit og skilyrði tiltekins sniðs rafrænnar skýrslugerðar.</span><span class="sxs-lookup"><span data-stu-id="5894a-113">Format data that must be sent to a generating electronic document in accordance with the layout and conditions of a specific ER format.</span></span> <span data-ttu-id="5894a-114">(Til dæmis gæti sniðið verið gert í samræmi við viðkomandi tungumál eða menningu eða kóðunina).</span><span class="sxs-lookup"><span data-stu-id="5894a-114">(For example, the formatting might be done in accordance with the requested language or culture, or the encoding).</span></span>
- <span data-ttu-id="5894a-115">Stjórna ferlinu sem stofnar rafræn skjöl.</span><span class="sxs-lookup"><span data-stu-id="5894a-115">Control the process of creating electronic documents.</span></span> <span data-ttu-id="5894a-116">(Til dæmis geta segðirnar virkjað eða slökkt á framleiðsla tiltekinna eininga sniðsins, fer eftir vinnslugögnum.</span><span class="sxs-lookup"><span data-stu-id="5894a-116">(For example, the expressions can enable or disable the output of specific elements of the format, depending on processing data.</span></span> <span data-ttu-id="5894a-117">Þær geta einnig truflað skráarmyndunarferlið eða sent skilaboð til notenda.)</span><span class="sxs-lookup"><span data-stu-id="5894a-117">They can also interrupt the document creation process or throw messages to users.)</span></span>

<span data-ttu-id="5894a-118">Þú getur opnað síðu **Formúluhönnuðar** þegar þú framkvæmir einhvern af eftirfarandi aðgerðum:</span><span class="sxs-lookup"><span data-stu-id="5894a-118">You can open the **Formula designer** page when you perform any of the following actions:</span></span>

- <span data-ttu-id="5894a-119">Bindingu gagnaveituvöru við þætti gagnalíkans.</span><span class="sxs-lookup"><span data-stu-id="5894a-119">Bind data source items to data model components.</span></span>
- <span data-ttu-id="5894a-120">Bindingu gagnaveituvöru við þætti til að sníða.</span><span class="sxs-lookup"><span data-stu-id="5894a-120">Bind data source items to format components.</span></span>
- <span data-ttu-id="5894a-121">Alhliða viðhald reiknaðra svæða sem eru hluti af gagnagjöfum.</span><span class="sxs-lookup"><span data-stu-id="5894a-121">Complete maintenance of calculated fields that are part of data sources.</span></span>
- <span data-ttu-id="5894a-122">Skilgreining sýnileikaskilyrða fyrir innsláttarfæribreytur notanda</span><span class="sxs-lookup"><span data-stu-id="5894a-122">Define the visibility conditions for user input parameters.</span></span>
- <span data-ttu-id="5894a-123">Hönnun á umbreytingum sniðsins</span><span class="sxs-lookup"><span data-stu-id="5894a-123">Design a format's transformations.</span></span>
- <span data-ttu-id="5894a-124">Skilgreining á virkjun skilyrða fyrir þætti sniðsins.</span><span class="sxs-lookup"><span data-stu-id="5894a-124">Define the enabling conditions for the format's components.</span></span>
- <span data-ttu-id="5894a-125">Skilgreining á skrárheiti fyrir FILE-þætti sniðsins.</span><span class="sxs-lookup"><span data-stu-id="5894a-125">Define the file names for the format's FILE components.</span></span>
- <span data-ttu-id="5894a-126">Skilgreining á skilyrðum fyrir villuleit ferlisstýringar.</span><span class="sxs-lookup"><span data-stu-id="5894a-126">Define the conditions for process control validations.</span></span>
- <span data-ttu-id="5894a-127">Skilgreining á texta í skilaboðum fyrir villuleit á ferlisstýringu.</span><span class="sxs-lookup"><span data-stu-id="5894a-127">Define the message text for process control validations.</span></span>

## <span data-ttu-id="5894a-128"><a name="Binding">gagnatengsl</a></span><span class="sxs-lookup"><span data-stu-id="5894a-128"><a name="Binding">Data binding</a></span></span>

<span data-ttu-id="5894a-129">Formúluhönnuður rafrænnar skýrslugerðar er hægt að nota til að skilgreina segð sem umbreytir gögnum sem eru móttekin frá gagnagjöfum, þannig að hægt sé að slá gögnin inn í gagnanotanda á eftirfarandi vegu á keyrslutíma:</span><span class="sxs-lookup"><span data-stu-id="5894a-129">The ER formula designer can be used to define an expression that transforms data that is received from data sources, so that the data can be entered in the data consumer in the following ways at runtime:</span></span>

- <span data-ttu-id="5894a-130">Úr gagnagjafa forrits og færibreytur keyrslutíma til gagnalíkans rafrænnar skýrslugerðar</span><span class="sxs-lookup"><span data-stu-id="5894a-130">From application data sources and runtime parameters to an ER data model</span></span>
- <span data-ttu-id="5894a-131">Úr gagnalíkani rafrænnar skýrslugerðar yfir í snið rafrænnar skýrslugerðar.</span><span class="sxs-lookup"><span data-stu-id="5894a-131">From an ER data model to an ER format</span></span>
- <span data-ttu-id="5894a-132">Úr gagnagjafa forrits og færibreytur keyrslutíma til gagnalíkans ER-sniðmáts</span><span class="sxs-lookup"><span data-stu-id="5894a-132">From application data sources and runtime parameters to an ER format</span></span>

<span data-ttu-id="5894a-133">Eftirfarandi skýringarmynd sýnir hönnun segðar af þessari gerð.</span><span class="sxs-lookup"><span data-stu-id="5894a-133">The following illustration shows the design of an expression of this type.</span></span> <span data-ttu-id="5894a-134">Í þessu dæmi námundar segðin gildið í reitnum **Intrastat.AmountMST** í Intrastat-töflunni í tvo aukastafi og skilar síðan námunduðu gildi.</span><span class="sxs-lookup"><span data-stu-id="5894a-134">In this example, the expression rounds the value of the **Intrastat.AmountMST** field in the Intrastat table to two decimal places and then returns the rounded value.</span></span>

<span data-ttu-id="5894a-135">[![Segð gagnabindingar](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span><span class="sxs-lookup"><span data-stu-id="5894a-135">[![Data binding expression](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span></span>

<span data-ttu-id="5894a-136">Eftirfarandi mynd sýnir hvernig hægt er að nota segð af þessari gerð.</span><span class="sxs-lookup"><span data-stu-id="5894a-136">The following illustration shows how an expression of this type can be used.</span></span> <span data-ttu-id="5894a-137">Í þessu dæmi er niðurstaðan af hannaðri segð slegin inn í **Transaction.InvoicedAmount** hlutann af gagnalíkani **skattaskýrslulíkansins**.</span><span class="sxs-lookup"><span data-stu-id="5894a-137">In this example, the result of the designed expression is entered in the **Transaction.InvoicedAmount** component of the **Tax reporting model** data model.</span></span>

<span data-ttu-id="5894a-138">[![Segð gagnatengsla notuð](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span><span class="sxs-lookup"><span data-stu-id="5894a-138">[![Data binding expression being used](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span></span>

<span data-ttu-id="5894a-139">Á keyrslutíma námundar hannaða formúlan `ROUND (Intrastat.AmountMST, 2)` gildið í reitnum **AmountMST** fyrir hverja skrá í Intrastat töflunni í tvo aukastafi.</span><span class="sxs-lookup"><span data-stu-id="5894a-139">At runtime, the designed formula, `ROUND (Intrastat.AmountMST, 2)`, rounds the value of the **AmountMST** field for each record in the Intrastat table to two decimal places.</span></span> <span data-ttu-id="5894a-140">Hún slær þá inn námundaða gildið í **Transaction.InvoicedAmount** hlutann af gagnalíkani **skattaskýrslunnar**.</span><span class="sxs-lookup"><span data-stu-id="5894a-140">It then enters the rounded value in the **Transaction.InvoicedAmount** component of the **Tax reporting** data model.</span></span>

## <span data-ttu-id="5894a-141"><a name="Transformation">Gagnasnið</a></span><span class="sxs-lookup"><span data-stu-id="5894a-141"><a name="Transformation">Data formatting</a></span></span>

<span data-ttu-id="5894a-142">Formúluhönnuður ER hægt að nota til að skilgreina segð sem forsníður gögn sem er tekið úr gagnagjafa, þannig að gögn geta verið send sem hluti af myndandi rafrænu skjali.</span><span class="sxs-lookup"><span data-stu-id="5894a-142">The ER formula designer can be used to define an expression that formats data that is received from data sources, so that the data can be sent as part of the generating electronic document.</span></span> <span data-ttu-id="5894a-143">Þú gætir haft snið sem þarf að nota sem dæmigerða reglu sem þarf að endurnýta sem snið.</span><span class="sxs-lookup"><span data-stu-id="5894a-143">You might have formatting that must be applied as a typical rule that should be reused for a format.</span></span> <span data-ttu-id="5894a-144">Í þessu tilviki getur þú lagt sniðið fram einu sinni í skilgreiningu sniðs, sem nefnda umbreytingu sem hefur sniðsegð.</span><span class="sxs-lookup"><span data-stu-id="5894a-144">In this case, you can introduce that formatting one time in the format configuration, as a named transformation that has a formatting expression.</span></span> <span data-ttu-id="5894a-145">Þessi nefnda umbreyting er síðan hægt að tengja við margar sniðseiningar þar sem úttakið verður að vera sniðið í samræmi við sniðsegðina sem þú bjóst til.</span><span class="sxs-lookup"><span data-stu-id="5894a-145">This named transformation can then be linked to many format components where the output must be formatted according to the formatting expression that you created.</span></span>

<span data-ttu-id="5894a-146">Eftirfarandi skýringarmynd sýnir hönnun umbreytingar sem samanstendur af þessari gerð.</span><span class="sxs-lookup"><span data-stu-id="5894a-146">The following illustration shows the design of a transformation of this type.</span></span> <span data-ttu-id="5894a-147">Í þessu dæmi styttir **TrimmedString** umbreytingin gögn á innleið af gagnagerðinni *Strengur* með því að fjarlægja bil fyrir framan og aftan.</span><span class="sxs-lookup"><span data-stu-id="5894a-147">In this example, the **TrimmedString** transformation truncates incoming data of the *String* data type by removing leading and trailing spaces.</span></span> <span data-ttu-id="5894a-148">Hún skilar þá styttu strengagildi.</span><span class="sxs-lookup"><span data-stu-id="5894a-148">It then returns the truncated string value.</span></span>

<span data-ttu-id="5894a-149">[![Umbreyting](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span><span class="sxs-lookup"><span data-stu-id="5894a-149">[![Transformation](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span></span>

<span data-ttu-id="5894a-150">Eftirfarandi skýringarmynd sýnir hvernig er hægt að nota umbreyting af þessari gerð.</span><span class="sxs-lookup"><span data-stu-id="5894a-150">The following illustration shows how a transformation of this type can be used.</span></span> <span data-ttu-id="5894a-151">Í þessu dæmi senda nokkrir þættir sniðs texta sem úttak til að búa til rafrænt skjal á keyrslutíma.</span><span class="sxs-lookup"><span data-stu-id="5894a-151">In this example, several format components send text as output to the generating electronic document at runtime.</span></span> <span data-ttu-id="5894a-152">Allir þessir sniðsþættir vísa til **TrimmedString** umbreytingar eftir heiti.</span><span class="sxs-lookup"><span data-stu-id="5894a-152">All these format components refer to the **TrimmedString** transformation by name.</span></span>

<span data-ttu-id="5894a-153">[![Umbreyting sem er notuð](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span><span class="sxs-lookup"><span data-stu-id="5894a-153">[![Transformation being used](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span></span>

<span data-ttu-id="5894a-154">Þegar þættir sniðs, eins og **partyName** í ofangreindum myndum, vísa til **TrimmedString** umbreytingingarinnar, sendir umbreytingin texta sem úttak á rafrænu skjalinu.</span><span class="sxs-lookup"><span data-stu-id="5894a-154">When format components, such as the **partyName** component in the preceding illustration, refer to the **TrimmedString** transformation, the transformation sends text as output to the generating electronic document.</span></span> <span data-ttu-id="5894a-155">Þessi texti inniheldur ekki bil fyrir framan og aftan.</span><span class="sxs-lookup"><span data-stu-id="5894a-155">This text doesn't include leading and trailing spaces.</span></span>

<span data-ttu-id="5894a-156">Ef þú ert með snið sem þarf að nota eitt og sér, getur þú sett fram það snið sem einstaka segð bindingar fyrir tiltekna sniðsþáttinn.</span><span class="sxs-lookup"><span data-stu-id="5894a-156">If you have formatting that must be applied individually, you can introduce that formatting as an individual expression of a binding of a specific format component.</span></span> <span data-ttu-id="5894a-157">Eftirfarandi skýringarmynd sýnir segð sem samanstendur af þessari gerð.</span><span class="sxs-lookup"><span data-stu-id="5894a-157">The following illustration shows an expression of this type.</span></span> <span data-ttu-id="5894a-158">Í þessu dæmi er **partyType** sniðsþáttur bundinn gagnagjafanum með segð sem breytir gögnum á innleið frá **Model.Company.RegistrationType** svæðinu í gagnagjafanum í hástafi.</span><span class="sxs-lookup"><span data-stu-id="5894a-158">In this example, the **partyType** format component is bound to the data source via an expression that converts incoming data from the **Model.Company.RegistrationType** field in the data source to uppercase text.</span></span> <span data-ttu-id="5894a-159">Segðin sendir þá texta sem úttak til rafræna skjalsins.</span><span class="sxs-lookup"><span data-stu-id="5894a-159">The expression then sends that text as output to the electronic document.</span></span>

<span data-ttu-id="5894a-160">[![Sækja um snið fyrir einstaka þætti](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span><span class="sxs-lookup"><span data-stu-id="5894a-160">[![Applying formatting to an individual component](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span></span>

## <span data-ttu-id="5894a-161"><a name="Validation">Vinnsla vinnsluflæðis</a></span><span class="sxs-lookup"><span data-stu-id="5894a-161"><a name="Validation">Process flow control</a></span></span>

<span data-ttu-id="5894a-162">Formúluhönnuður rafrænnar skýrslugerðar er hægt að nota til að skilgreina segðir sem stýra vinnsluflæðinu við stofnun rafrænna skjala.</span><span class="sxs-lookup"><span data-stu-id="5894a-162">The ER formula designer can be used to define expressions that control the process flow of generating electronic documents.</span></span> <span data-ttu-id="5894a-163">Hægt er að framkvæma eftirfarandi verk:</span><span class="sxs-lookup"><span data-stu-id="5894a-163">You can perform the following tasks:</span></span>

- <span data-ttu-id="5894a-164">Skilgreina skilyrði til að ákvarða þegar þarf að stöðva ferli við myndun skjals</span><span class="sxs-lookup"><span data-stu-id="5894a-164">Define conditions that determine when a document creation process must be stopped.</span></span>
- <span data-ttu-id="5894a-165">Tilgreina segðir sem annað hvort búa til skilaboð fyrir notandann um stöðvuð ferli eða senda skilaboð aðgerðarskráningar um áframhaldandi ferli við myndun skýrslu.</span><span class="sxs-lookup"><span data-stu-id="5894a-165">Specify expressions that either create messages for the user about stopped processes or throw execution log messages about the continuing process of report generation.</span></span>
- <span data-ttu-id="5894a-166">Tilgreina skráarnöfnin á stofnuðum rafrænum skjölum og stjórna skilyrðum fyrir stofnun þeirra.</span><span class="sxs-lookup"><span data-stu-id="5894a-166">Specify the file names of generating electronic documents, and control the conditions of their creation.</span></span>

<span data-ttu-id="5894a-167">Hverja reglu fyrir flæðistýringu ferlis er hannað sem einstaka villuleit.</span><span class="sxs-lookup"><span data-stu-id="5894a-167">Each rule of the process flow control is designed as an individual validation.</span></span> <span data-ttu-id="5894a-168">Eftirfarandi skýringarmynd sýnir sannvottun af þessari gerð.</span><span class="sxs-lookup"><span data-stu-id="5894a-168">The following illustration shows a validation of this type.</span></span> <span data-ttu-id="5894a-169">Hér er skýring á skilgreiningunni í þessu dæmi:</span><span class="sxs-lookup"><span data-stu-id="5894a-169">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="5894a-170">Staðfestingin er metin þegar **INSTAT** hnúturinn á meðan XML-skráin er stofnuð.</span><span class="sxs-lookup"><span data-stu-id="5894a-170">The validation is evaluated when the **INSTAT** node is created during generation of the XML file.</span></span>
- <span data-ttu-id="5894a-171">Það stöðvar aðgerðarferlið um leið og það skilar **FALSE** ef listi yfir færslur er tómur</span><span class="sxs-lookup"><span data-stu-id="5894a-171">If the list of transactions is empty, the validation stops the execution process and returns **FALSE**.</span></span>
- <span data-ttu-id="5894a-172">Sannvottunin skilar villuboð sem inniheldur texta merkis SYS70894 á tungumáli sem notandi kýs</span><span class="sxs-lookup"><span data-stu-id="5894a-172">The validation returns an error message that includes the text of label SYS70894 in the user's preferred language.</span></span>

<span data-ttu-id="5894a-173">[![Villuleit](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span><span class="sxs-lookup"><span data-stu-id="5894a-173">[![Validation](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span></span>

<span data-ttu-id="5894a-174">Formúluhönnuður rafrænnar skýrslugerðar er einnig hægt að nota til að stofna skráarnafn fyrir stofnað rafrænt skjal til að stjórna ferlinu fyrir stofnun skráa.</span><span class="sxs-lookup"><span data-stu-id="5894a-174">The ER formula designer can also be used to generate a file name for a generating electronic document and to control the file creation process.</span></span> <span data-ttu-id="5894a-175">Eftirfarandi skýringarmynd sýnir hönnun flæðistjórnunar ferlis sem samanstendur af þessari gerð.</span><span class="sxs-lookup"><span data-stu-id="5894a-175">The following illustration shows the design of a process flow control of this type.</span></span> <span data-ttu-id="5894a-176">Hér er skýring á skilgreiningunni í þessu dæmi:</span><span class="sxs-lookup"><span data-stu-id="5894a-176">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="5894a-177">Listi yfir færslur úr **model.Intrastat** gagnagjafanum er skipt í runur.</span><span class="sxs-lookup"><span data-stu-id="5894a-177">The list of records from the **model.Intrastat** data source is divided into batches.</span></span> <span data-ttu-id="5894a-178">Hver runa inniheldur allt að 1.000 færslur.</span><span class="sxs-lookup"><span data-stu-id="5894a-178">Each batch contains up to 1,000 records.</span></span>
- <span data-ttu-id="5894a-179">Úttak býr til ZIP-skrá sem inniheldur eina skrá í xml-snið fyrir hverja runu sem var stofnuð.</span><span class="sxs-lookup"><span data-stu-id="5894a-179">The output creates a zip file that contains one file in XML format for every batch that was created.</span></span>
- <span data-ttu-id="5894a-180">Segð skilar skráarnafni til að stofna rafræn skjöl með því að sameina skráarheiti og skráargerð.</span><span class="sxs-lookup"><span data-stu-id="5894a-180">An expression returns a file name for generating electronic documents by concatenating the file name and the file name extension.</span></span> <span data-ttu-id="5894a-181">Fyrir aðra rönu og allar eftirfylgjandi runur inniheldur skráarheitið kenni runu sem nafnauka.</span><span class="sxs-lookup"><span data-stu-id="5894a-181">For the second batch and all subsequent batches, the file name contains the batch ID as a suffix.</span></span>
- <span data-ttu-id="5894a-182">Segð virkjar (með því að skila **TRUE**) ferli fyrir stofnun skráa fyrir runur sem innihalda að minnsta kosti eina færslu.</span><span class="sxs-lookup"><span data-stu-id="5894a-182">An expression enables (by returning **TRUE**) the file creation process for batches that contain at least one record.</span></span>

<span data-ttu-id="5894a-183">[![Vinnsla vinnsluflæðis](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span><span class="sxs-lookup"><span data-stu-id="5894a-183">[![Process flow control](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span></span>

## <span data-ttu-id="5894a-184"><a name="Enabled">Efnisstýring skjals</a></span><span class="sxs-lookup"><span data-stu-id="5894a-184"><a name="Enabled">Document content control</a></span></span>

<span data-ttu-id="5894a-185">Hægt er að nota ER-formúluhönnuðinn til að stilla segðir sem stjórna hvaða gögn verða sett inn í mynduð rafræn skjöl á keyrslutíma.</span><span class="sxs-lookup"><span data-stu-id="5894a-185">The ER formula designer can be used to configure expressions that control what data will be put into generated electronic documents at runtime.</span></span> <span data-ttu-id="5894a-186">Segðirnar geta virkjað eða afvirkjað úttak tiltekinna eininga sniðsins, eftir því hver vinnslugögn og skilgreindur grunnur er.</span><span class="sxs-lookup"><span data-stu-id="5894a-186">The expressions can enable or disable the output of specific elements of the format, depending on processing data and configured logic.</span></span> <span data-ttu-id="5894a-187">Hægt er að færa þessar segðir inn fyrir stakt snið í reitnum **Virkt** á flipanum **Vörpun** á síðunni **Rekstrarhönnuður**.</span><span class="sxs-lookup"><span data-stu-id="5894a-187">These expressions can be entered for a single format element in the **Enabled** field on the **Mapping** tab of the **Operations designer** page.</span></span> <span data-ttu-id="5894a-188">Þú getur slegið inn orðin sem röklegt skilyrði sem skilar *Boole*-gildi:</span><span class="sxs-lookup"><span data-stu-id="5894a-188">You can enter the expressions as a logic condition that returns a *Boolean* value:</span></span>

- <span data-ttu-id="5894a-189">Ef skilyrðið skilar **True** er gildandi sniðþáttur keyrður.</span><span class="sxs-lookup"><span data-stu-id="5894a-189">If the condition returns **True**, the current format element is run.</span></span>
- <span data-ttu-id="5894a-190">Ef skilyrðið skilar **False** er gildandi sniðþætti sleppt.</span><span class="sxs-lookup"><span data-stu-id="5894a-190">If the condition returns **False**, the current format element is skipped.</span></span>

<span data-ttu-id="5894a-191">Eftirfarandi skýringarmynd sýnir segðir af þessari gerð.</span><span class="sxs-lookup"><span data-stu-id="5894a-191">The following illustration shows expressions of this type.</span></span> <span data-ttu-id="5894a-192">(Útgáfa 11.12.11 af **ISO20022-kreditfærslu (NO)** skilgreiningu sniðs sem er veitt af Microsoft er notuð sem dæmi.) Sniðsíhlutinn **XMLHeader** er stilltur til að lýsa skipulagi skilaboða kreditfærslunnar í samræmi við XML-skilaboðastaðla ISO 20022.</span><span class="sxs-lookup"><span data-stu-id="5894a-192">(Version 11.12.11 of the **ISO20022 Credit transfer (NO)** format configuration that is provided by Microsoft is used as an example.) The **XMLHeader** format component is configured to describe the structure of the credit transfer message according to the ISO 20022 XML message standards.</span></span> <span data-ttu-id="5894a-193">Sniðshlutinn **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** er skilgreindur til að bæta XML-einingunni **Ustrd** við mynduðu skilaboðin og setur greiðsluupplýsingarnar á óskipulegt snið sem texta í eftirfarandi XML-einingum:</span><span class="sxs-lookup"><span data-stu-id="5894a-193">The **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** format component is configured to add the **Ustrd** XML element to the generated message and to put the remittance information in an unstructured format as text of the following XML elements:</span></span>

- <span data-ttu-id="5894a-194">Íhluturinn **PaymentNotes** er notaður til að mynda texta í athugasemdir við greiðslur.</span><span class="sxs-lookup"><span data-stu-id="5894a-194">The **PaymentNotes** component is used to generate the text of payment notes.</span></span>
- <span data-ttu-id="5894a-195">Íhluturinn **DelimitedSequence** myndar kommuaðskilin reikningsnúmer sem eru notuð til að jafna núverandi kreditfærslu.</span><span class="sxs-lookup"><span data-stu-id="5894a-195">The **DelimitedSequence** component generates comma-separated invoice numbers that are used to settle the current credit transfer.</span></span>

<span data-ttu-id="5894a-196">[![PaymentNotes og DelimitedSequence íhlutir](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span><span class="sxs-lookup"><span data-stu-id="5894a-196">[![PaymentNotes and DelimitedSequence components](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="5894a-197">Íhlutirnir **PaymentNotes** og **DelimitedSequence** eru merktir með spurningarmerki.</span><span class="sxs-lookup"><span data-stu-id="5894a-197">The **PaymentNotes** and **DelimitedSequence** components are labeled by using a question mark.</span></span> <span data-ttu-id="5894a-198">Spurningarmerki gefur til kynna að notkun íhluta sé skilyrt.</span><span class="sxs-lookup"><span data-stu-id="5894a-198">A question mark indicates that the use of a component is conditional.</span></span> <span data-ttu-id="5894a-199">Í þessu tilfelli er notkun íhlutanna byggð á eftirfarandi forsendum:</span><span class="sxs-lookup"><span data-stu-id="5894a-199">In this case, use of the components is based on the following criteria:</span></span>
>
> - <span data-ttu-id="5894a-200">Segðin `@.PaymentsNotes <> ""` sem er skilgreind fyrir íhlutinn **PaymentNotes** gerir kleift (með því að skila **TRUE**) að XML-þátturinn **Ustrd** sé fylltur út með texta greiðsluathugasemda ef sá texti er ekki tómur fyrir gildandi kreditfærslu.</span><span class="sxs-lookup"><span data-stu-id="5894a-200">The `@.PaymentsNotes <> ""` expression that is defined for the **PaymentNotes** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with the text of payment notes, if that text isn't blank for the current credit transfer.</span></span>
>
>    <span data-ttu-id="5894a-201">[![Segð fyrir íhlut PaymentNotes](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span><span class="sxs-lookup"><span data-stu-id="5894a-201">[![Expression for the PaymentNotes component](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span></span>
>
> - <span data-ttu-id="5894a-202">Segðin `@.PaymentsNotes = ""` sem er skilgreind fyrir íhlutinn **DelimitedSequence** gerir kleift (með því að skila **TRUE**) að XML-þátturinn **Ustrd** sé fylltur út með kommuaðskildum lista yfir reikningsnúmerin sem eru notuð til að jafna gildandi kreditfærslu, ef texti greiðsluathugasemdanna fyrir þá kreditfærslu er tómur.</span><span class="sxs-lookup"><span data-stu-id="5894a-202">The `@.PaymentsNotes = ""` expression that is defined for the **DelimitedSequence** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with a comma-separated list of the invoice numbers that are used to settle the current credit transfer, if the text of payment notes for that credit transfer is blank.</span></span>
>
>    <span data-ttu-id="5894a-203">[![Segð fyrir íhlutinn DelimitedSequence](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span><span class="sxs-lookup"><span data-stu-id="5894a-203">[![Expression for the DelimitedSequence component](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span></span>
> 
> <span data-ttu-id="5894a-204">Byggt á þessari uppsetningu munu skilaboðin sem myndast fyrir hverja greiðslu skuldara, XML-eininguna **Ustrd**, innihalda annaðhvort texta greiðsluseðla eða, þegar slíkur texti er auður, texta aðskilinn með kommu reikningsnúmer sem notuð eru til að jafna þessa greiðslu.</span><span class="sxs-lookup"><span data-stu-id="5894a-204">Based on this setup, the message that is generated for each debtor payment, the **Ustrd** XML element, will contain either the text of payment notes or, when that text is blank, a comma-separated list of the invoice numbers that are used to settle the payment.</span></span>

## <span data-ttu-id="5894a-205"><a name="TestFormula">Staðfesting á uppsettum formúlum</a></span><span class="sxs-lookup"><span data-stu-id="5894a-205"><a name="TestFormula">Validation of configured formulas</a></span></span>

<span data-ttu-id="5894a-206">Á síðunni **Formúluhönnuður** velurðu **Prófa** til að sannreyna hvernig uppsetta formúlan virkar.</span><span class="sxs-lookup"><span data-stu-id="5894a-206">On the **Formula designer** page, select **Test** to validate how the configured formula works.</span></span>

<span data-ttu-id="5894a-207">[![Val á prófi til að staðfesta formúlu](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span><span class="sxs-lookup"><span data-stu-id="5894a-207">[![Selecting Test to validate a forumula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span></span>

<span data-ttu-id="5894a-208">Þegar gilda formúlufrumbreyta er krafist geturðu opnað valmyndina **Prófunarsegð** af síðunni **Formúluhönnuður**.</span><span class="sxs-lookup"><span data-stu-id="5894a-208">When the values of formula arguments are required, you can open the **Test expression** dialog box from the **Formula designer** page.</span></span> <span data-ttu-id="5894a-209">Í flestum tilvikum verður að skilgreina þessar frumbreytur handvirkt þar sem stilltar bindingar eru ekki keyrðar á hönnunartíma.</span><span class="sxs-lookup"><span data-stu-id="5894a-209">In most cases, these arguments must be manually defined, because the configured bindings aren't run at design time.</span></span> <span data-ttu-id="5894a-210">Flipinn **Niðurstaða prófunar** á síðunni **Formúluhönnuður** sýnir niðurstöðuna úr framkvæmd stilltrar formúlu.</span><span class="sxs-lookup"><span data-stu-id="5894a-210">The **Test result** tab on the **Formula designer** page shows the result from execution of the configured formula.</span></span>

<span data-ttu-id="5894a-211">Eftirfarandi dæmi sýnir hvernig þú getur prófað formúluna sem er stillt fyrir utanríkisviðskiptalén til að ganga úr skugga um að Intrastat grunnvörukóðinn innihaldi aðeins tölustafi.</span><span class="sxs-lookup"><span data-stu-id="5894a-211">The following example shows how you can test the formula that is configured for the foreign trade domain to make sure that the Intrastat commodity code contains only digits.</span></span>

<span data-ttu-id="5894a-212">Þegar þú prófar þessa formúlu geturðu notað valmyndina **Prófunarsegð** til að tilgreina gildi Intrastat grunnvörukóðans fyrir prófun.</span><span class="sxs-lookup"><span data-stu-id="5894a-212">When you test this formula, you can use the **Test expression** dialog box to specify the value of the Intrastat commodity code for testing.</span></span>

<span data-ttu-id="5894a-213">[![Tilgreining Intrastat grunnvörukóða fyrir prófun](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span><span class="sxs-lookup"><span data-stu-id="5894a-213">[![Specifying the Intrastat commodity code for testing](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span></span>

<span data-ttu-id="5894a-214">Eftir að þú hefur tilgreint Intrastat grunnvörukóðann og valið **Í lagi** sýnir flipinn **Niðurstaða prófunar** á síðunni **Formúluhönnuður** niðurstöðu framkvæmdar á stilltri formúlu.</span><span class="sxs-lookup"><span data-stu-id="5894a-214">After you specify the Intrastat commodity code and select **OK**, the **Test result** tab on the **Formula designer** page shows the result of execution of the configured formula.</span></span> <span data-ttu-id="5894a-215">Þú getur síðan metið hvort niðurstaðan sé ásættanleg.</span><span class="sxs-lookup"><span data-stu-id="5894a-215">You can then evaluate whether the result is acceptable.</span></span> <span data-ttu-id="5894a-216">Ef niðurstaðan er ekki ásættanleg geturðu uppfært formúluna og prófað hana aftur.</span><span class="sxs-lookup"><span data-stu-id="5894a-216">If the result isn't acceptable, you can update the formula and test it again.</span></span>

<span data-ttu-id="5894a-217">[![Niðurstaða prófunar](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span><span class="sxs-lookup"><span data-stu-id="5894a-217">[![Test result](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span></span>

<span data-ttu-id="5894a-218">Sumar formúlurnar er ekki hægt að prófa á hönnunartíma.</span><span class="sxs-lookup"><span data-stu-id="5894a-218">Some formulas can't be tested at design time.</span></span> <span data-ttu-id="5894a-219">Til dæmis gæti formúla skilað niðurstöðu gagnategundar sem ekki er hægt að sýna á flipanum **Niðurstaða prófunar**. Í því tilfelli færðu villuboð sem segja að ekki sé hægt að prófa formúluna.</span><span class="sxs-lookup"><span data-stu-id="5894a-219">For example, a formula might return a result of a data type that can't be shown on the **Test result** tab. In this case, you receive an error message that states that the formula can't be tested.</span></span>

<span data-ttu-id="5894a-220">[![Villuboð](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span><span class="sxs-lookup"><span data-stu-id="5894a-220">[![Error message](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="5894a-221">Frekari upplýsingar</span><span class="sxs-lookup"><span data-stu-id="5894a-221">Additional resources</span></span>

- [<span data-ttu-id="5894a-222">Yfirlit yfir rafræna skýrslugerð</span><span class="sxs-lookup"><span data-stu-id="5894a-222">Electronic Reporting overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="5894a-223">Formúlutungumál í rafrænni skýrslugerð</span><span class="sxs-lookup"><span data-stu-id="5894a-223">Electronic reporting formula language</span></span>](er-formula-language.md)
