---
title: Bæta frammistöðu röðunarvélar
description: Í þessu efnisatriði er að finna upplýsingar um röðunarvélina og hvernig á að bæta afköst.
author: ChristianRytt
ms.date: 09/03/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.custom: 19311
ms.assetid: 5ffb1486-2e08-4cdc-bd34-b47ae795ef0f
ms.search.region: Global
ms.search.industry: ''
ms.author: kamaybac
ms.search.validFrom: 2020-09-03
ms.dyn365.ops.version: ''
ms.openlocfilehash: d1378ae652ea70cba941316f4667052dcb05f717
ms.sourcegitcommit: 0e8db169c3f90bd750826af76709ef5d621fd377
ms.translationtype: HT
ms.contentlocale: is-IS
ms.lasthandoff: 04/01/2021
ms.locfileid: "5812909"
---
# <a name="improve-scheduling-engine-performance"></a><span data-ttu-id="bc19e-103">Bæta frammistöðu röðunarvélar</span><span class="sxs-lookup"><span data-stu-id="bc19e-103">Improve scheduling engine performance</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="bc19e-104">Röðunarvél tilfanga er notuð þegar leiðir eru tímasettar fyrir áætlaðar og útgefnar framleiðslupantanir.</span><span class="sxs-lookup"><span data-stu-id="bc19e-104">The resource scheduling engine is used when scheduling routes for planned and released production orders.</span></span> <span data-ttu-id="bc19e-105">Vélin var upphaflega gefin út sem hluti af Dynamics AX 2012 og hefur farið í gegnum nokkrar úrbætur frá útgáfu hennar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-105">The engine was originally released as part of Dynamics AX 2012 and has gone through several improvements since its release.</span></span>

<span data-ttu-id="bc19e-106">[Vandamál við tímasetningu verka](https://en.wikipedia.org/wiki/Job_shop_scheduling) er gríðarlega flókið vandamál samsetningar þar sem úrlausnartíminn tekur veldisvöxt með fjölda ákvörðunarbreyta.</span><span class="sxs-lookup"><span data-stu-id="bc19e-106">The [job shop scheduling problem](https://en.wikipedia.org/wiki/Job_shop_scheduling) is an extremely complex combinatorial problem where solution time grows exponentially with the number of decision variables.</span></span> <span data-ttu-id="bc19e-107">Oft og tíðum setja viðskiptavinir upp framleiðsluleiðir og tengd gögn þannig að úr verði vandamál við tímasetningu sem ekki er hægt að leysa innan viðunandi tíma, jafnvel fyrir nýjasta vélbúnaðinn.</span><span class="sxs-lookup"><span data-stu-id="bc19e-107">Oftentimes, customers set up production routes and related data in a way that results in a scheduling problem that can't be solved in reasonable time even on the most modern hardware.</span></span> <span data-ttu-id="bc19e-108">Þetta efnisatriði varpar betra ljósi á röðunarvélina og hvernig tiltekin uppsetning getur haft áhrif á afköstin.</span><span class="sxs-lookup"><span data-stu-id="bc19e-108">This topic will help you understand the scheduling engine and how a specific setup can have influence on the performance.</span></span>

<span data-ttu-id="bc19e-109">Þegar kemur að því að bæta afköst áætlunargerðar mæla almennar viðmiðunarreglur með því að draga úr margbreytileika vandans sem vélin þarf að leysa.</span><span class="sxs-lookup"><span data-stu-id="bc19e-109">When it comes to improving the performance of the scheduling, general guidelines recommend reducing the complexity of the problem the engine needs to solve.</span></span> <span data-ttu-id="bc19e-110">Sumir helstu þættir sem geta haft áhrif á afköst eru:</span><span class="sxs-lookup"><span data-stu-id="bc19e-110">Some of the main factors that can affect performance include:</span></span>

- <span data-ttu-id="bc19e-111">Leiðir með mörgum aðgerðum</span><span class="sxs-lookup"><span data-stu-id="bc19e-111">Routes with many operations</span></span>
- <span data-ttu-id="bc19e-112">Leiðir með hliðstæðum aðgerðum</span><span class="sxs-lookup"><span data-stu-id="bc19e-112">Routes with parallel operations</span></span>
- <span data-ttu-id="bc19e-113">Aðgerðir með magn af tilföngum sem eru hærri en eitt</span><span class="sxs-lookup"><span data-stu-id="bc19e-113">Operations with quantity of resources higher than one</span></span>
- <span data-ttu-id="bc19e-114">Aðgerðir með mörgum tilföngum sem eiga við</span><span class="sxs-lookup"><span data-stu-id="bc19e-114">Operations with many applicable resources</span></span>
- <span data-ttu-id="bc19e-115">Notkun harðra tengla</span><span class="sxs-lookup"><span data-stu-id="bc19e-115">Use of hard links</span></span>
- <span data-ttu-id="bc19e-116">Notkun takmarkaðrar getu</span><span class="sxs-lookup"><span data-stu-id="bc19e-116">Use of finite capacity</span></span>
- <span data-ttu-id="bc19e-117">Fjöldi mismunandi dagatala sem er notaður</span><span class="sxs-lookup"><span data-stu-id="bc19e-117">The number of different calendars used</span></span>
- <span data-ttu-id="bc19e-118">Fjöldi vinnutímahólfa á dag í dagatalinu</span><span class="sxs-lookup"><span data-stu-id="bc19e-118">The number of working time slots per day in the calendar</span></span>
- <span data-ttu-id="bc19e-119">Samtals tímalengd leiðarinnar</span><span class="sxs-lookup"><span data-stu-id="bc19e-119">Total duration of the route</span></span>
- <span data-ttu-id="bc19e-120">Margar röðunarvélar keyrðar samhliða</span><span class="sxs-lookup"><span data-stu-id="bc19e-120">Running multiple scheduling engines in parallel</span></span>

## <a name="overview-of-basic-scheduling-flow"></a><span data-ttu-id="bc19e-121">Yfirlit yfir grunnröðun flæðis</span><span class="sxs-lookup"><span data-stu-id="bc19e-121">Overview of basic scheduling flow</span></span>

<span data-ttu-id="bc19e-122">Til að skilja hvernig tiltekin uppsetning getur haft áhrif á afköst, er mikilvægt að skilja flæði verkferla, bæði innan vélarinnar og í X++ kóðanum sem fylgir henni.</span><span class="sxs-lookup"><span data-stu-id="bc19e-122">To understand how a given setup can affect performance, it is important to understand something about how the process flows, both inside the engine and in the X++ code that surrounds it.</span></span>

<span data-ttu-id="bc19e-123">Grunnferlið við að tímasetja pöntun felur í sér þrjú meginskref:</span><span class="sxs-lookup"><span data-stu-id="bc19e-123">The basic process of scheduling an order consists of three main steps:</span></span>

- <span data-ttu-id="bc19e-124">**Hleðslugögn** - Hér er X++ gagnalíkönum breytt í innra gagnalíkan vélarinnar í formi verka og takmarkanna.</span><span class="sxs-lookup"><span data-stu-id="bc19e-124">**Loading data** – Here, the X++ data models are transformed into the engine's internal data model in the form of jobs and constraints.</span></span>
- <span data-ttu-id="bc19e-125">**Röðun** – Þetta er aðaluppruni fyrir röðunina sem vinnur úr gefnu líkani og takmörkunum og kemur með niðurstöður.</span><span class="sxs-lookup"><span data-stu-id="bc19e-125">**Scheduling** – This is the main source for scheduling that processes the given model and constraints, and generates a result.</span></span> <span data-ttu-id="bc19e-126">Meðan á þessu ferli stendur, biður vélin um upplýsingar um vinnutíma og fyrirliggjandi frátekna afkastagetu frá X++ eftir því sem þörf krefur.</span><span class="sxs-lookup"><span data-stu-id="bc19e-126">During this process, the engine will request working time information and existing capacity reservations from X++ as needed.</span></span>
- <span data-ttu-id="bc19e-127">**Vista gögn** – Niðurstöður vélar á formi hólfa fyrir frátekna afkastagetu vinnu er unnið úr af X++ kóða til að vista frátekna afkastagetu og uppfæra upphafs- og lokatíma verka/aðgerðar/pöntunar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-127">**Save data** – The engine result in the form of job capacity reservation slots is processed by X++ code to save capacity reservations and update the start and end times of the jobs/operation/order.</span></span>

## <a name="load-data-into-the-engine"></a><span data-ttu-id="bc19e-128">Hlaða gögnum inn í vélina</span><span class="sxs-lookup"><span data-stu-id="bc19e-128">Load data into the engine</span></span>

<span data-ttu-id="bc19e-129">Röðunarvélin er með óhlutbundnara gagnalíkan en gagnagrunnur Supply Chain Management vegna þess að hún hefur verið smíðuð sem almenn vél sem getur meðhöndlað mismunandi uppruna gagna.</span><span class="sxs-lookup"><span data-stu-id="bc19e-129">The scheduling engine has a more abstract data model than the Supply Chain Management database because it has been built as a generic engine that can handle different sources of data.</span></span> <span data-ttu-id="bc19e-130">Hugmyndir um leiðir, aukaaðgerðir og keyrslutíma þurfa að vera „þýddar“ yfir á almenna verkið og takmörkunarlíkanið sem vélin birtir.</span><span class="sxs-lookup"><span data-stu-id="bc19e-130">The concepts of route, secondary operations, and run time need to be "translated" into the generic job and constraint model that the engine exposes.</span></span> <span data-ttu-id="bc19e-131">Rökin fyrir því að byggja líkanið eru með talsvert magn viðskiptagrunns og er mismunandi eftir því hver upprunagögnin eru.</span><span class="sxs-lookup"><span data-stu-id="bc19e-131">The logic for building the model has a significant amount of business logic to it and is different depending on the source data.</span></span> <span data-ttu-id="bc19e-132">Tilheyrandi X++ klasi er `WrkCtrScheduler` og hann er með afleidda klassa fyrir áætlaðar framleiðslupantanir, útgefnar framleiðslupantanir og verkspár.</span><span class="sxs-lookup"><span data-stu-id="bc19e-132">The responsible X++ class is `WrkCtrScheduler` and it has derived classes for planned production orders, released production orders, and project forecasts.</span></span>

<span data-ttu-id="bc19e-133">Sem dæmi skal hafa í huga leið sem birtist í eftirfarandi töflu og mynd, sem virðist tiltölulega einföld.</span><span class="sxs-lookup"><span data-stu-id="bc19e-133">As an example, consider a route shown in the following table and image, which seems relatively simple.</span></span>

| <span data-ttu-id="bc19e-134">Aðg.nr.</span><span class="sxs-lookup"><span data-stu-id="bc19e-134">Oper.</span></span> <span data-ttu-id="bc19e-135">Nei.</span><span class="sxs-lookup"><span data-stu-id="bc19e-135">No.</span></span> | <span data-ttu-id="bc19e-136">Forgangur</span><span class="sxs-lookup"><span data-stu-id="bc19e-136">Priority</span></span> | <span data-ttu-id="bc19e-137">Uppsetningartími</span><span class="sxs-lookup"><span data-stu-id="bc19e-137">Setup time</span></span> | <span data-ttu-id="bc19e-138">Keyrslutími</span><span class="sxs-lookup"><span data-stu-id="bc19e-138">Run time</span></span> | <span data-ttu-id="bc19e-139">Biðtími eftir</span><span class="sxs-lookup"><span data-stu-id="bc19e-139">Queue time after</span></span> | <span data-ttu-id="bc19e-140">Fjöldi tilfanga</span><span class="sxs-lookup"><span data-stu-id="bc19e-140">Quantity of resources</span></span> | <span data-ttu-id="bc19e-141">Næst</span><span class="sxs-lookup"><span data-stu-id="bc19e-141">Next</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="bc19e-142">10</span><span class="sxs-lookup"><span data-stu-id="bc19e-142">10</span></span> | <span data-ttu-id="bc19e-143">Aðal</span><span class="sxs-lookup"><span data-stu-id="bc19e-143">Primary</span></span> | <span data-ttu-id="bc19e-144">1.00</span><span class="sxs-lookup"><span data-stu-id="bc19e-144">1.00</span></span> | <span data-ttu-id="bc19e-145">2.00</span><span class="sxs-lookup"><span data-stu-id="bc19e-145">2.00</span></span> | | <span data-ttu-id="bc19e-146">1</span><span class="sxs-lookup"><span data-stu-id="bc19e-146">1</span></span> | <span data-ttu-id="bc19e-147">20</span><span class="sxs-lookup"><span data-stu-id="bc19e-147">20</span></span> |
| <span data-ttu-id="bc19e-148">10</span><span class="sxs-lookup"><span data-stu-id="bc19e-148">10</span></span> | <span data-ttu-id="bc19e-149">Auka&nbsp;1</span><span class="sxs-lookup"><span data-stu-id="bc19e-149">Secondary&nbsp;1</span></span> | | | | <span data-ttu-id="bc19e-150">1</span><span class="sxs-lookup"><span data-stu-id="bc19e-150">1</span></span> | <span data-ttu-id="bc19e-151">20</span><span class="sxs-lookup"><span data-stu-id="bc19e-151">20</span></span> |
| <span data-ttu-id="bc19e-152">20</span><span class="sxs-lookup"><span data-stu-id="bc19e-152">20</span></span> | <span data-ttu-id="bc19e-153">Aðal</span><span class="sxs-lookup"><span data-stu-id="bc19e-153">Primary</span></span> | | <span data-ttu-id="bc19e-154">3.00</span><span class="sxs-lookup"><span data-stu-id="bc19e-154">3.00</span></span> | <span data-ttu-id="bc19e-155">1.00</span><span class="sxs-lookup"><span data-stu-id="bc19e-155">1.00</span></span> | <span data-ttu-id="bc19e-156">3</span><span class="sxs-lookup"><span data-stu-id="bc19e-156">3</span></span> | <span data-ttu-id="bc19e-157">0</span><span class="sxs-lookup"><span data-stu-id="bc19e-157">0</span></span> |

<span data-ttu-id="bc19e-158">![Dæmi um skýringarmynd leiðar](media/scheduling-engine-route.png "Skýringarmynd með dæmi um leið")</span><span class="sxs-lookup"><span data-stu-id="bc19e-158">![Example rout diagram](media/scheduling-engine-route.png "Example rout diagram")</span></span>

<span data-ttu-id="bc19e-159">Þegar þetta er sent til vélarinnar, er því skipt niður á átta vinnslur eins og sýnt er í eftirfarandi skýringarmynd (veljið myndina til að stækka hana).</span><span class="sxs-lookup"><span data-stu-id="bc19e-159">When sending this to the engine, it is split out into eight jobs, as shown in the following illustration (select the image to enlarge it).</span></span>

<span data-ttu-id="bc19e-160">[![Verk röðunarvélar](media/scheduling-engine-jobs.png "Verk röðunarvélar")](media/scheduling-engine-jobs-large.png)</span><span class="sxs-lookup"><span data-stu-id="bc19e-160">[![Scheduling engine jobs](media/scheduling-engine-jobs.png "Scheduling engine jobs")](media/scheduling-engine-jobs-large.png)</span></span>

<span data-ttu-id="bc19e-161">Staðlaður tengill á milli tveggja vinnsla er `FinishStart`, sem þýðir að lokatími einnar vinnu verður að vera á undan upphafstíma annarrar vinnu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-161">The standard link between two jobs is `FinishStart`, meaning that the end time of one job must be before the start time of another job.</span></span> <span data-ttu-id="bc19e-162">Vegna þess að uppsetningin verður að vera framkvæmd af sama tilfangi sem síðar gerir ferlið, eru `OnSameResource` takmarkanir á milli þeirra.</span><span class="sxs-lookup"><span data-stu-id="bc19e-162">Because the setup must be performed by the same resource that will later do the process, there are `OnSameResource` constraints between them.</span></span> <span data-ttu-id="bc19e-163">Milli vinnsla fyrir fyrstu og aðra aðgerð fyrir 10, eru `StartStart` og `FinishFinish` tenglar, sem þýðir að vinnslurnar verða að báðar að hefjast og enda á sama tíma og það eru `NotOnSameResource` takmarkanir, sem kemur í veg fyrir sama tilfangið fyrir fyrsta og annað.</span><span class="sxs-lookup"><span data-stu-id="bc19e-163">Between the jobs for primary and secondary operation for 10, there are `StartStart` and `FinishFinish` links, which means that the jobs must both start and end at the same time, and there are `NotOnSameResource` constraints, which will prevent the same resource for primary and secondary.</span></span>

<span data-ttu-id="bc19e-164">Fyrir aðgerð 20, þar sem magn tilfanga hefur verið stillt á 3, hefur vinnsluferlinu verið skipt í þrjú aðskilin verk þar sem öll verkin verða að vera keyrð á nákvæmlega sama tíma.</span><span class="sxs-lookup"><span data-stu-id="bc19e-164">For operation 20, where the quantity of resources has been set to 3, the process job has been split into three distinct jobs where all the jobs must run at the exact same time.</span></span>
<span data-ttu-id="bc19e-165">Í þessu tilfelli hefur leiðaflokkurinn verið settur upp til að taka ekki frá afkastagetu fyrir biðröð eftir tíma, sem er ástæðan fyrir því að aðeins eitt verk fyrir biðröðina eftir á.</span><span class="sxs-lookup"><span data-stu-id="bc19e-165">In this case, the route group has been set up to not reserve capacity for queue after times, which is why there is only a single job for the queue after.</span></span>

<span data-ttu-id="bc19e-166">Röðunarvélin skilur aðeins hugtök vinnslu en skilur ekki aðgerðir.</span><span class="sxs-lookup"><span data-stu-id="bc19e-166">The scheduling engine only understands the concepts of jobs and has no notion of operations.</span></span> <span data-ttu-id="bc19e-167">Þetta þýðir að þegar aðgerðaáætlun er gerð er aðgerðunum einnig skipt í vinnslur, þótt þær verði ekki viðvarandi í gagnagrunninum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-167">This means that when doing operation scheduling, the operations are also split into jobs, although these will not be persisted in the database.</span></span>

<span data-ttu-id="bc19e-168">Fyrir hverja vinnslu munum við einnig skilgreina hver afkastaþörf vinnslunnar er (sekúndufjöldinn sem þarf til).</span><span class="sxs-lookup"><span data-stu-id="bc19e-168">For each job, we will also define what the job capacity requirement is (the number of seconds required).</span></span> <span data-ttu-id="bc19e-169">Eftir því hvernig tilfangaþarfir hafa verið skilgreindar, er einnig hugsanlegt, fyrir hvert verk, að senda lista yfir öll hugsanleg viðeigandi tilföng sem vinnslan gæti keyrt á og hver afkastaþörfin er fyrir þetta tiltekna tilfang.</span><span class="sxs-lookup"><span data-stu-id="bc19e-169">Depending on how the resource requirements have been defined, we may also, for each job, send a list of all the potential applicable resources that the job could run on and what the capacity requirement is for that specific resource.</span></span> <span data-ttu-id="bc19e-170">Jafnvel þótt listi yfir viðeigandi tilföng sé sendur þegar líkanið er smíðað, þarf vélin enn að tryggja að úthlutun tilfangs sé í raun gild fyrir allan tímann sem vinnslan tekur.</span><span class="sxs-lookup"><span data-stu-id="bc19e-170">Even though the list of applicable resources is sent when building the model, the engine will still need to ensure that the resource assignment is actually valid for the entire job duration.</span></span>

## <a name="scheduling-engine-internals"></a><span data-ttu-id="bc19e-171">Innsýn í röðunarvél</span><span class="sxs-lookup"><span data-stu-id="bc19e-171">Scheduling engine internals</span></span>

### <a name="scheduling-engine-interface"></a><span data-ttu-id="bc19e-172">Viðmót röðunarvélar</span><span class="sxs-lookup"><span data-stu-id="bc19e-172">Scheduling engine interface</span></span>

<span data-ttu-id="bc19e-173">Til að fá hugmynd um hvernig vélin virkar að innan, er best að líta á virknina sem hún sýnir út á við.</span><span class="sxs-lookup"><span data-stu-id="bc19e-173">To get an idea of how the engine works internally, it is best to look at the functionality it exposes externally.</span></span> <span data-ttu-id="bc19e-174">Í X++ er aðalviðmótið `WrkCtrSchedulerEngineInterface`.</span><span class="sxs-lookup"><span data-stu-id="bc19e-174">In X++, the main interface is `WrkCtrSchedulerEngineInterface`.</span></span> <span data-ttu-id="bc19e-175">Það er með aðferðirnar sem lýst er í eftirfarandi undirhlutum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-175">It has the methods described in the following subsections.</span></span>

#### <a name="general-engine"></a><span data-ttu-id="bc19e-176">Almenn vél</span><span class="sxs-lookup"><span data-stu-id="bc19e-176">General engine</span></span>

| <span data-ttu-id="bc19e-177">**Aðferð**</span><span class="sxs-lookup"><span data-stu-id="bc19e-177">**Method**</span></span> | <span data-ttu-id="bc19e-178">**Málefni**</span><span class="sxs-lookup"><span data-stu-id="bc19e-178">**Purpose**</span></span> |
| --- | --- |
| `run` | <span data-ttu-id="bc19e-179">Tímasetur allar hlaðnar vinnslur og skilar villukóðum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-179">Schedules all loaded jobs and returns the error code.</span></span> |
| `getJobSchedulingSequenceResult` | <span data-ttu-id="bc19e-180">Fær niðurstöður röðunar og fyrstu vinnsluvilluna fyrir röðina sem tiltekin vinnsla finnur.</span><span class="sxs-lookup"><span data-stu-id="bc19e-180">Gets the scheduling result and the first error job for the sequence identified by a specific job.</span></span> |
| `validateJobCapacityReservations` | <span data-ttu-id="bc19e-181">Villuleitar frátekna afkastagetu fyrir allar vinnslur sem vélin geymir.</span><span class="sxs-lookup"><span data-stu-id="bc19e-181">Validates the capacity reservations for all the jobs stored by the engine.</span></span> |
| `setReservationsTimeStamp` | <span data-ttu-id="bc19e-182">Sendir tímastimpil á vélina sem er sett á alla nýja frátekna afkastagetu fyrir tímasettar vinnslur í skyndiminni vélarinnar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-182">Sends a timestamp to the engine set on all new capacity reservations for the scheduled jobs in the cache of the engine.</span></span> |
| `addPropertyToGroupAggregation` | <span data-ttu-id="bc19e-183">Bætir forskeyti eiginleika við safn eiginleika sem notað er þegar afkastagetu er safna saman.</span><span class="sxs-lookup"><span data-stu-id="bc19e-183">Adds a property prefix to the set of properties used when capacity is aggregated.</span></span> |
| `addResource` | <span data-ttu-id="bc19e-184">Bætir tilfangi við tilfangahóp röðunarvélar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-184">Adds a resource to the scheduling engine resource pool.</span></span> |
| `addResourceGroup` | <span data-ttu-id="bc19e-185">Bætir tilfangaflokki við hóp tilfangaflokks röðunarvélar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-185">Adds a resource group to the scheduling engine resource group pool.</span></span> |
| `addResourceGroupMembership` | <span data-ttu-id="bc19e-186">Bætir tilfangi sem aðila við tilfangaflokk.</span><span class="sxs-lookup"><span data-stu-id="bc19e-186">Adds a resource as a member to a resource group.</span></span> |
| `addOptimizationGoal` | <span data-ttu-id="bc19e-187">Bætir við markmiði áætlunarfínstillingar (tímalengd eða forgangur).</span><span class="sxs-lookup"><span data-stu-id="bc19e-187">Adds a scheduling optimization goal (duration or priority).</span></span> |

#### <a name="individual-jobs"></a><span data-ttu-id="bc19e-188">Einstakar vinnslur</span><span class="sxs-lookup"><span data-stu-id="bc19e-188">Individual jobs</span></span>

| <span data-ttu-id="bc19e-189">**Aðferð**</span><span class="sxs-lookup"><span data-stu-id="bc19e-189">**Method**</span></span> | <span data-ttu-id="bc19e-190">**Málefni**</span><span class="sxs-lookup"><span data-stu-id="bc19e-190">**Purpose**</span></span> |
| --- | --- |
| `addJobInfo` | <span data-ttu-id="bc19e-191">Bætir við upplýsingafærslu vinnslu sem segir vélinni frá vinnslu sem ætti að tímasetja.</span><span class="sxs-lookup"><span data-stu-id="bc19e-191">Adds a job information record that informs the engine about a job that should be scheduled.</span></span> |
| `addConstraintJobEndsAt` | <span data-ttu-id="bc19e-192">Bætir við skorðun um að vinnsla eigi að enda á tilteknum degi og tíma.</span><span class="sxs-lookup"><span data-stu-id="bc19e-192">Adds a constraint that a job should end at a specified date and time.</span></span> |
| `addConstraintJobStartsAt` | <span data-ttu-id="bc19e-193">Bætir við skorðun um að vinnsla eigi að hefjast á tilteknum degi og tíma.</span><span class="sxs-lookup"><span data-stu-id="bc19e-193">Adds a constraint that a job should start at a specified date and time.</span></span> |
| `addConstraintMaxJobDays` | <span data-ttu-id="bc19e-194">Skilgreinir takmörkun sem vinnsla getur náð yfir fyrir tiltekinn hámarksfjölda daga.</span><span class="sxs-lookup"><span data-stu-id="bc19e-194">Defines the constraint that a job can span over a specified maximal number of days.</span></span> |
| `addConstraintResourceRequirement` | <span data-ttu-id="bc19e-195">Bætir takmörkunum um að vinnslan verði að vera tímasett fyrir tiltekið tilfang.</span><span class="sxs-lookup"><span data-stu-id="bc19e-195">Adds the constraint that the job must be scheduled on a specific resource.</span></span> |
| `addJobBindPriority` | <span data-ttu-id="bc19e-196">Bætir við forgangi fyrir bindingu vinnslu fyrir (vinnslu, stig takmörkunar) par.</span><span class="sxs-lookup"><span data-stu-id="bc19e-196">Adds a job bind priority for a (job, constraint level) pair.</span></span> <span data-ttu-id="bc19e-197">Hærra forgangsgildi þýðir að vinnslubreytur verða bundnar fyrr.</span><span class="sxs-lookup"><span data-stu-id="bc19e-197">A higher priority value means the job variables will be bound earlier.</span></span> <span data-ttu-id="bc19e-198">Vinnslan verður unnin á undan vinnslum með lægri forgang í sömu röðinni.</span><span class="sxs-lookup"><span data-stu-id="bc19e-198">The job will be processed before jobs with lower priority value in the same sequence.</span></span> |
| `addJobCapacity` | <span data-ttu-id="bc19e-199">Bætir við upplýsingum um álag fyrir vinnslu (eins og nauðsynlegan keyrslutíma vinnslu) óháð því hvaða tilföng vinnslan keyrir á.</span><span class="sxs-lookup"><span data-stu-id="bc19e-199">Adds capacity load information for a job (like the required job runtime) independent on which resource the job runs on.</span></span> |
| `addJobResourceCapacity` | <span data-ttu-id="bc19e-200">Bætir tilföngum við safn tilfanga sem hægt er að nota til að framkvæma vinnslu og gefur upp afkastagetuna sem þarf þegar keyrt er á þessu tilfangi.</span><span class="sxs-lookup"><span data-stu-id="bc19e-200">Adds a resource to the set of resources that may be used to perform a job, and states the capacity required when running on that resource.</span></span> |
| `addJobGoal` | <span data-ttu-id="bc19e-201">Bætir við upplýsingum um markmið vinnslu fyrir tiltekið takmörkunarstig (fyrsti lokatími eða síðasti upphafstími).</span><span class="sxs-lookup"><span data-stu-id="bc19e-201">Adds job goal information for a specific constraint level (earliest end time or latest start time).</span></span> |
| `addJobResourcePriority` | <span data-ttu-id="bc19e-202">Bætir við forgangi sem á að nota þegar vinnsla tímasett á tilfangi.</span><span class="sxs-lookup"><span data-stu-id="bc19e-202">Adds the priority to use when a job is scheduled on a resource.</span></span> |
| `addJobResourceRuntime` | <span data-ttu-id="bc19e-203">Tilgreinir vinnslutíma sem er háður tilfangi sem vinnslan verður raðað á.</span><span class="sxs-lookup"><span data-stu-id="bc19e-203">Specifies a job time that is dependent of the resource the job will be scheduled on.</span></span> |
| `addJobRuntime` | <span data-ttu-id="bc19e-204">Tilgreinir vinnslutíma sem er óháður tilfangi sem vinnslan verður raðað á.</span><span class="sxs-lookup"><span data-stu-id="bc19e-204">Specifies a job time that is independent of the resource on which the job will be scheduled.</span></span> |
| `scheduleJobOnResourceGroup` | <span data-ttu-id="bc19e-205">Merkir vinnslu fyrir röðun á stigi tilfangaflokks.</span><span class="sxs-lookup"><span data-stu-id="bc19e-205">Marks a job for scheduling on the resource group level.</span></span> |
| `setJobResourcePreemptionAllowed` | <span data-ttu-id="bc19e-206">Stillir hvort forgangur er leyfðir fyrir vinnslu á tilfangi (ef vélin má tímasetja vinnsluna í afkastahólfum sem ekki eru hlið við hlið).</span><span class="sxs-lookup"><span data-stu-id="bc19e-206">Sets whether preemption is allowed for a job on a resource (if engine is allowed to schedule the job in noncontiguous capacity slots).</span></span> |
| `setRequiredNumberOfResources` | <span data-ttu-id="bc19e-207">Stillir fjölda tilfanga sem þarf til að áætla vinnslu (aðeins fyrir aðgerðaröðun).</span><span class="sxs-lookup"><span data-stu-id="bc19e-207">Sets the number of resources required to schedule a job (only for operations scheduling).</span></span> |

#### <a name="constraints-between-jobs"></a><span data-ttu-id="bc19e-208">Takmarkanir á milli vinnsla</span><span class="sxs-lookup"><span data-stu-id="bc19e-208">Constraints between jobs</span></span>

| <span data-ttu-id="bc19e-209">**Aðferð**</span><span class="sxs-lookup"><span data-stu-id="bc19e-209">**Method**</span></span> | <span data-ttu-id="bc19e-210">**Málefni**</span><span class="sxs-lookup"><span data-stu-id="bc19e-210">**Purpose**</span></span> |
| --- | --- |
| `addJobLink` | <span data-ttu-id="bc19e-211">Bætir við tengli (t.d. ljúka\>hefja) á milli tveggja vinnsla.</span><span class="sxs-lookup"><span data-stu-id="bc19e-211">Adds a link (such as finish\>start) between two jobs.</span></span> |
| `addConstraintEndsDelayed` | <span data-ttu-id="bc19e-212">Skilgreinir takmörkunina um að vinnsla geti ekki endað áður en önnur vinnsla endar ásamt einhverjum töfum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-212">Defines the constraint that a job cannot end before another jobs end plus some delay time.</span></span> |
| `addConstraintJobListWorkingTimeIntersect` | <span data-ttu-id="bc19e-213">Bætir við takmörkun um að afkastahólfin sem eru tekin frá fyrir vinnslurnar verði að vera vinnutímum sem skarast fyrir tvö tilföng sem vinnslurnar nota.</span><span class="sxs-lookup"><span data-stu-id="bc19e-213">Adds a constraint that the capacity slots reserved for the jobs must be on the intersecting working times for the two resources used by the jobs.</span></span> |
| `addConstraintJobOverlap` | <span data-ttu-id="bc19e-214">Bæta við takmörkun sem skilgreinir hvernig vinnslum er raðað þegar hægt er að færa uppgefið vörumagn milli tveggja tilfanga á meðan enn er ekki búið að vinna úr fyrsta tilfanginu, þannig að næsta tilfang geti hafið úrvinnslu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-214">Add a constraint that defines how jobs are sequenced when a given quantity of an item can be moved between two resources while the first resource is still not finished processing, so that the second resource can start processing.</span></span> |
| `addConstraintNotOnSameResource` | <span data-ttu-id="bc19e-215">Bætir við takmörkun um að ekki eigi að raða tveimur vinnslum á sama tilfangið.</span><span class="sxs-lookup"><span data-stu-id="bc19e-215">Adds a constraint that two jobs should not be scheduled on the same resource.</span></span> |
| `addConstraintOnSameResource` | <span data-ttu-id="bc19e-216">Bætir við takmörkun um að tvær vinnslur verði að nota sama tilfangið.</span><span class="sxs-lookup"><span data-stu-id="bc19e-216">Adds a constraint that two jobs must be using the same resource.</span></span> |
| `addJobSameReservations` | <span data-ttu-id="bc19e-217">Bætir við takmörkun um að vinnsla verði á endanum að vera með fráteknar afkastagetur fyrir sömu tímahólfin sem aðalvinnslu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-217">Adds a constraint that a job must end up having capacity reservations for the same time slots as the primary job.</span></span> |
| `setPrimaryParallelJob` | <span data-ttu-id="bc19e-218">Bæta við upplýsingum um það hvaða vinnsla er aðalvinnsla í nokkrum samhliða vinnslum</span><span class="sxs-lookup"><span data-stu-id="bc19e-218">Adds information about what job is the primary job in a set of parallel jobs.</span></span> |

### <a name="solver"></a><span data-ttu-id="bc19e-219">Leysari</span><span class="sxs-lookup"><span data-stu-id="bc19e-219">Solver</span></span>

<span data-ttu-id="bc19e-220">Vélin sjálf er í meginatriðum sérhæfð úrlausn á takmörkunum með sérstilltum leiðsagnarreglum bætt við.</span><span class="sxs-lookup"><span data-stu-id="bc19e-220">The engine itself is essentially a specialized constraint solver with custom heuristics added.</span></span> <span data-ttu-id="bc19e-221">Úrlausnin byggir á tveimur meginþáttum: breytum og takmörkunum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-221">The solver is based on two main elements: variables and constraints.</span></span>

#### <a name="variable"></a><span data-ttu-id="bc19e-222">Breyta</span><span class="sxs-lookup"><span data-stu-id="bc19e-222">Variable</span></span>

<span data-ttu-id="bc19e-223">Breyta táknar svið mögulegra gilda.</span><span class="sxs-lookup"><span data-stu-id="bc19e-223">A variable represents a domain of possible values.</span></span> <span data-ttu-id="bc19e-224">Röðunarvél er með tvær gerðir af breytum:</span><span class="sxs-lookup"><span data-stu-id="bc19e-224">Scheduling engine has two types of variables:</span></span>

- <span data-ttu-id="bc19e-225">**DateTime-breyta** - Er með svið allra dagsetninga og tímasetninga og hægt er að takmarka sviðið með því að færa neðri og efri mörkin fyrir tímasetningu breytunnar nær hvort öðru.</span><span class="sxs-lookup"><span data-stu-id="bc19e-225">**DateTime variable** - Has a domain of all dates and times, and the domain can be restricted by moving the lower and upper bound for the time of the variable closer to each other.</span></span>
- <span data-ttu-id="bc19e-226">**Tilfangabreyta** - Er með svið tilfanga sem eiga við, og hægt er að takmarka sviðið með því að eyða tilföngum úr listanum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-226">**Resource variable** - Has a domain of applicable resources, and the domain can be restricted by eliminating resources from the list.</span></span>

#### <a name="constraint"></a><span data-ttu-id="bc19e-227">Skorða</span><span class="sxs-lookup"><span data-stu-id="bc19e-227">Constraint</span></span>

<span data-ttu-id="bc19e-228">Skorðun virkar á breytur með því að takmarka svið þeirra, en það fer líka eftir breytum þannig að hún virkjast þegar breytur breytast.</span><span class="sxs-lookup"><span data-stu-id="bc19e-228">A constraint acts on variables by restricting their domains, but it also depends on variables so it gets activated when variables change.</span></span> <span data-ttu-id="bc19e-229">Ferlið „útbreiðsla skorðunar“ á við um skorðun sem framkvæmir meginaðgerð sína og tilkynnir hana til aðalreiknireglunnar ef hún tekst.</span><span class="sxs-lookup"><span data-stu-id="bc19e-229">The process of "constraint propagation" is when a constraint performs its main function and reports back to the main logic if successful.</span></span>

<span data-ttu-id="bc19e-230">Breyta er talin bundin þegar ekki er hægt að takmarka hana enn frekar, sem þýðir fyrir DateTime-breytuna að efri og neðri mörk eru þau sömu, og fyrir tilfangabreytuna að hún hafi aðeins eitt tilfang sem á við.</span><span class="sxs-lookup"><span data-stu-id="bc19e-230">A variable is considered bound when it can't be restricted further, which for DateTime variable means that upper and lower bound is the same, and for the Resource variable that it has only a single applicable resource.</span></span> <span data-ttu-id="bc19e-231">Þegar allar breytur eru bundnar finnst lausn.</span><span class="sxs-lookup"><span data-stu-id="bc19e-231">When all variables are bound, a solution is found.</span></span>

### <a name="constraint-levels"></a><span data-ttu-id="bc19e-232">Skorðunarstig</span><span class="sxs-lookup"><span data-stu-id="bc19e-232">Constraint levels</span></span>

<span data-ttu-id="bc19e-233">Þegar áætlunargerð er keyrð sem hluti af þekjuáfanga áætlanagerðar efnisþarfa, verða pantanirnar tímasettar aftur í tímann frá dagsetningu þarfa.</span><span class="sxs-lookup"><span data-stu-id="bc19e-233">When scheduling is executed as part of the material requirements planning (MRP) coverage phase, the orders will be scheduled backward from requirement date.</span></span> <span data-ttu-id="bc19e-234">Hins vegar, ef ekki er hægt að finna áætlun sem hefst í dag eða síðar og lýkur fyrir dagsetningu þarfa, verður stefna áætlanagerðarinnar breytt í frá og með deginum í dag.</span><span class="sxs-lookup"><span data-stu-id="bc19e-234">However, if it is not possible to find a schedule that starts today or later and ends before the requirement date, then the scheduling direction will change to forward from today.</span></span>

<span data-ttu-id="bc19e-235">Þessi megin viðskiptaregla er meðhöndluð með því að skipuleggja skorðanir í stig.</span><span class="sxs-lookup"><span data-stu-id="bc19e-235">This main business rule is handled by organizing the constraints in levels.</span></span> <span data-ttu-id="bc19e-236">Ef engin lausn finnst þegar skorðanir eru notaðar á hæsta stigi, þá er öllu skorðunum á því stigi sleppt og neðra stigið er reynt.</span><span class="sxs-lookup"><span data-stu-id="bc19e-236">If no solution is found when using the constraints on the highest level, then the constraints on that level are all dropped, and the lower level is tried.</span></span> <span data-ttu-id="bc19e-237">Í framkvæmd þýðir þetta að fyrir röðun afturábak inniheldur líkanið stig 1 með vinnslumarkmið seinasta upphafstíma og hámarks lokatíma skorðunar (þarfadagsetningin) og stig 0 með vinnslumarkmiðum fyrsta lokatíma og lágmarks upphafstíma skorðunar fyrir daginn í dag.</span><span class="sxs-lookup"><span data-stu-id="bc19e-237">In praxis, this means that for backward scheduling the model will contain a level 1 with job goals of latest start time given a maximum end time constraint (the requirement date), and a level 0 with job goals of earliest end time and given a minimum start time constraint of today.</span></span>

### <a name="algorithm"></a><span data-ttu-id="bc19e-238">Algrím</span><span class="sxs-lookup"><span data-stu-id="bc19e-238">Algorithm</span></span>

<span data-ttu-id="bc19e-239">Helstu skref reiknirits vélarinnar eru:</span><span class="sxs-lookup"><span data-stu-id="bc19e-239">The main steps of the engine algorithm are:</span></span>

1. <span data-ttu-id="bc19e-240">Finna raðir (vinnslukeðjur) sem hægt er að leysa sérstaklega.</span><span class="sxs-lookup"><span data-stu-id="bc19e-240">Find sequences (job chains) which can be solved separately.</span></span>
1. <span data-ttu-id="bc19e-241">Reyna að finna fyrstu lausn fyrir röðina á hæsta stigi skorðunar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-241">Try to find an initial solution for the sequence for the highest constraint level.</span></span>
    1. <span data-ttu-id="bc19e-242">Raða vinnslum í röðinni út frá markmiði og forgangi vinnslunnar, þannig að upphafsvinnsla finnist.</span><span class="sxs-lookup"><span data-stu-id="bc19e-242">Sort the jobs in the sequence based on job goal and priorities, such that a start job can be found.</span></span>
    1. <span data-ttu-id="bc19e-243">Keyrið vinnslurnar í lykkju í eftirfarandi röð:</span><span class="sxs-lookup"><span data-stu-id="bc19e-243">Loop the jobs in the following sequence:</span></span>
        1. <span data-ttu-id="bc19e-244">Finnið allar skorðanir sem þarf að dreifa og keyrið dreifinguna.</span><span class="sxs-lookup"><span data-stu-id="bc19e-244">Find all constraints that need to be propagated and run propagation.</span></span>
        1. <span data-ttu-id="bc19e-245">Ef allar breytur fyrir vinnsluna hafa verið bundnar, þá hefur lausn fyrir þessa vinnslu fundist.</span><span class="sxs-lookup"><span data-stu-id="bc19e-245">If all variables for the job have been bound, then a solution for that job has been found.</span></span>
        1. <span data-ttu-id="bc19e-246">Ef ekki var hægt að binda eina af breytunum án þess að brjóta skorðurnar, þá skal taka til baka breytubindinguna, reyna annað gildi á sviðinu (fyrir tilfangabreyta) og keyra aftur dreifingu skorðunar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-246">If one of the variables could not be bound without violating the constraints, then roll back the variable binding, try a different value in the domain (for resource variable), and rerun the constraint propagation.</span></span>
1. <span data-ttu-id="bc19e-247">Ef engin lausn fannst eru allar skorður á núverandi skorðunarstigi fjarlægðar, stig skorðunar lækkað (ef einhver lægri stig eru tiltæk) og leit að lausn reynd aftur með nýju skorðunarsafni.</span><span class="sxs-lookup"><span data-stu-id="bc19e-247">If no solution was found, then all constraints on the current constraint level is removed, the constraint level lowered (if any lower levels are available) and solution search retried with the new set of constraint.</span></span>
1. <span data-ttu-id="bc19e-248">Ef hagkvæm lausn fannst, þá hefst áfangi fínstillingar, sem reynir að finna betri lausn þar til tímalokun fínstillingar næst eða þegar allar samsetningar tilfanga hafa verið reyndar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-248">If a feasible solution was found, then the optimization phase is started, which will try to find a better solution until the optimization timeout is reached or all resource combinations have been exhausted.</span></span>

<span data-ttu-id="bc19e-249">Úrlausn skorðunar veit ekki af sérstökum þáttum reiknirits röðunarinnar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-249">The constraint solver is not aware of the specifics of the scheduling algorithm.</span></span> <span data-ttu-id="bc19e-250">Það er í skilgreiningu og samsetningu hinna ýmsu skorðana sem „galdurinn“ gerist.</span><span class="sxs-lookup"><span data-stu-id="bc19e-250">It is in the definition and combination of the various constraints that the "magic" happens.</span></span>

### <a name="determining-working-times"></a><span data-ttu-id="bc19e-251">Skilgreina vinnutíma</span><span class="sxs-lookup"><span data-stu-id="bc19e-251">Determining working times</span></span>

<span data-ttu-id="bc19e-252">Stór hluti af (innri) skorðunum í vélinni stjórna vinnutímanum og afkastagetu tilfangs.</span><span class="sxs-lookup"><span data-stu-id="bc19e-252">A large part of the (internal) constraints in the engine controls the working time and capacity of a resource.</span></span> <span data-ttu-id="bc19e-253">Í meginatriðum gengur verkið út á að fara yfir hólf vinnutíma fyrir tilfang á uppgefnum punkti í ákveðna átt og finna nógu langt bil þar sem nauðsynleg afkastageta (tími) vinnslu passar inn.</span><span class="sxs-lookup"><span data-stu-id="bc19e-253">Essentially, the task is to traverse the working time slots for a resource from a given point in a given direction, and find a long enough interval in which the jobs required capacity (time) can fit.</span></span>

<span data-ttu-id="bc19e-254">Til að gera þetta þarf vélin að vita vinnutíma tilfangs.</span><span class="sxs-lookup"><span data-stu-id="bc19e-254">To do this, the engine needs to know the working times of a resource.</span></span> <span data-ttu-id="bc19e-255">Gagnstætt aðalgagnalíkaninu, eru vinnutímarnir *Hlaðið við skoðun*, sem þýðir að þeir eru hlaðnir inn í vélina eftir þörfum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-255">Opposite to the main model data, the working times are *lazy loaded*, meaning that they are loaded into the engine as needed.</span></span> <span data-ttu-id="bc19e-256">Ástæðan fyrir þessari nálgun er sú að oft eru vinnutímar í Supply Chain Management fyrir dagatal með mjög löngu tímabili og yfirleitt eru mörg dagatöl til staðar þannig að gögnin eru nokkuð stór til að forhlaða.</span><span class="sxs-lookup"><span data-stu-id="bc19e-256">The reason for this approach is that there are often working times in Supply Chain Management for a calendar for a very long period and typically many calendars exist so the data would be quite large to pre-load.</span></span>

<span data-ttu-id="bc19e-257">Vélin biður um dagatalsupplýsingar í bútum, með því að virkja X++ klasaaðferðina `WrkCtrSchedulingInteropDataProvider.getWorkingTimes`.</span><span class="sxs-lookup"><span data-stu-id="bc19e-257">Calendar information is requested by the engine in chunks, by invoking the X++ class method `WrkCtrSchedulingInteropDataProvider.getWorkingTimes`.</span></span> <span data-ttu-id="bc19e-258">Beiðnin er fyrir tiltekið dagatalskenni á ákveðnu tímabili.</span><span class="sxs-lookup"><span data-stu-id="bc19e-258">The request is for a specific calendar ID in a specific time interval.</span></span> <span data-ttu-id="bc19e-259">Háð stöðu á skyndiminni þjónsins í Supply Chain Management, gæti hver þessara beiðna endað í mörgum gagnagrunnsköllum, sem taka langan tíma (í samanburði við hreinan reiknitíma).</span><span class="sxs-lookup"><span data-stu-id="bc19e-259">Depending on the state of the server cache in Supply Chain Management, each of these requests could end up in several database calls, which takes a long time (relative to the pure computational time).</span></span> <span data-ttu-id="bc19e-260">Einnig, ef dagatalið inniheldur mjög vandaðar vinnutímaskilgreiningar með mörgum vinnutímabilum á dag, bætist það við tímann sem hleðslan tekur.</span><span class="sxs-lookup"><span data-stu-id="bc19e-260">Also, if the calendar contains very elaborate working time definitions with many working time intervals per day, this adds to the time the loading takes.</span></span>

<span data-ttu-id="bc19e-261">Þegar gögn um vinnutíma eru hlaðin í röðunarvélina, er þetta varðveitt í innra skyndiminni fyrir tiltekið dagatal, sem þýðir að ef aðrar vinnslur eða tilföng eru að nota sama dagatalið, þá verður hægt að framkvæma næstu uppflettingar á fljótlegan hátt úr minni.</span><span class="sxs-lookup"><span data-stu-id="bc19e-261">When the working time data is loaded in the scheduling engine, this is retained in its internal cache for the specific calendar, meaning that if any other jobs or resources are using the same calendar then the next lookups can be performed quickly from memory.</span></span> <span data-ttu-id="bc19e-262">Ein algeng orsök slæmrar frammistöðu er ef sérstakt dagatalskenni er notað fyrir hvert tilfang vegna þess að þá verður nauðsynlegt að biðja um gögn fyrir hvert dagatal jafnvel þótt innihald dagatalanna kunni að vera það sama.</span><span class="sxs-lookup"><span data-stu-id="bc19e-262">One common cause of bad performance is if a separate calendar ID is used for each resource, because data will then need to be requested for each calendar, even though the content of the calendars might be the same.</span></span>

### <a name="finite-capacity"></a><span data-ttu-id="bc19e-263">Takmörkuð geta</span><span class="sxs-lookup"><span data-stu-id="bc19e-263">Finite capacity</span></span>

<span data-ttu-id="bc19e-264">Þegar takmörkuð geta er notuð, er vinnutímahólfum úr dagatalinu skipt niður og minnkuð út frá fyrirliggjandi frátekningum afkastagetu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-264">When using finite capacity, the working time slots from the calendar are split and reduced based on the existing capacity reservations.</span></span> <span data-ttu-id="bc19e-265">Þessar frátekningar eru einnig sóttar í gegnum sama `WrkCtrSchedulingInteropDataProvider`-klasann og dagatölin, en nota í staðinn aðferðina `getCapacityReservations`.</span><span class="sxs-lookup"><span data-stu-id="bc19e-265">These reservations are also fetched through the same `WrkCtrSchedulingInteropDataProvider` class as the calendars, but instead use the method `getCapacityReservations`.</span></span> <span data-ttu-id="bc19e-266">Þegar raðað er við aðaláætlanagerð eru frátekningar fyrir tiltekna aðaláætlunina teknar til greina og ef þær eru virkjaðar á síðunni **Færibreytur aðaláætlanagerðar**, er frátekningar úr staðfestum framleiðslupöntunum einnig hafðar með.</span><span class="sxs-lookup"><span data-stu-id="bc19e-266">When scheduling during master planning, the reservations for the specific master plan are considered and if enabled on the **Master planning parameters** page, the reservations from firmed production orders are also included.</span></span> <span data-ttu-id="bc19e-267">Á sama hátt, þegar framleiðslupöntun er áætluð, er einnig valkostur að taka með frátekningar úr fyrirliggjandi áætluðum pöntunum, þó að þetta sé ekki eins algengt og hin leiðin.</span><span class="sxs-lookup"><span data-stu-id="bc19e-267">Similarly, when scheduling a production order, it is also an option to include reservations from existing planned orders, although this is not as common as the other way around.</span></span>

<span data-ttu-id="bc19e-268">Notkun takmarkaðrar getu veldur því að röðun tekur lengri tíma af ýmsum ástæðum:</span><span class="sxs-lookup"><span data-stu-id="bc19e-268">Using finite capacity will cause scheduling to take longer due to several reasons:</span></span>

- <span data-ttu-id="bc19e-269">Að sækja afkastagetuupplýsingar úr gagnagrunni er hæg aðgerð og vistun á þessum upplýsingum í skyndiminni þjónsins er yfirleitt ekki eins góð og fyrir vinnutíma vegna þess að þeir eru ekki samnýttir á meðal tilfanga eins og dagatöl yfirleitt eru.</span><span class="sxs-lookup"><span data-stu-id="bc19e-269">Fetching the capacity information from database is a slow operation and the server-side caching of capacity information is typically not as good as for working times because they are not shared among resources like calendars typically are.</span></span>
- <span data-ttu-id="bc19e-270">Fjöldi vinnutímahólfa til að fara í gegnum eykst vegna skiptinganna og hólf fyrir lengri tímabil þarf að skoða sérstaklega áður en lausn finnst.</span><span class="sxs-lookup"><span data-stu-id="bc19e-270">The number of working time slots to traverse increases due to the splits, and slots for a longer time period must typically be investigated before a solution can be found.</span></span>
- <span data-ttu-id="bc19e-271">Eftir að röðuninni er lokið verður að framkvæma athugun á misræmi í frátekningum (sjá hlutann „Keyra röðunarvélar samhliða“ til að fá frekari upplýsingar).</span><span class="sxs-lookup"><span data-stu-id="bc19e-271">After the scheduling is complete, a check for conflicting reservations must be performed (see the "Running scheduling engines in parallel" section for details).</span></span>

### <a name="examining-the-resource-combinations"></a><span data-ttu-id="bc19e-272">Samsetningar tilfanga skoðaðar</span><span class="sxs-lookup"><span data-stu-id="bc19e-272">Examining the resource combinations</span></span>

<span data-ttu-id="bc19e-273">Ef vinnsluröðin inniheldur aðeins staðlaða `FinishStart`-tengla, sem þýðir að hún myndar einfalda keðju án greina, er hægt að ná ákjósanlegri niðurstöðu (séð út frá stakri pöntun, ekki öllum pöntunum) með því að finna bestu lausnina fyrir fyrstu vinnsluna og halda síðan áfram til að finna bestu lausnina fyrir næstu vinnslu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-273">If the job sequence only contains the standard `FinishStart` links, meaning it forms a simple chain without any branches, an optimal result (seen from the single order, not across orders) can be achieved by finding the best solution for the first job and then moving on to find the best solution for the next job.</span></span> <span data-ttu-id="bc19e-274">Besta lausnin fyrir vinnslu þýðir það að finna tilfang sem getur fengið frá og til dagsetningar vinnslunnar sem næst markmiði vinnslunnar (í röðun fram í tímann þýðir þetta að sækja lokadagsetningu vinnslunnar sem fyrst) meðan skorðunum er enn fylgt.</span><span class="sxs-lookup"><span data-stu-id="bc19e-274">The best solution for a job means finding the resource that can get the from and to date of the job closest to the job goal (in forward scheduling this means getting the end date of the job as early as possible) while still respecting the constraints.</span></span>

<span data-ttu-id="bc19e-275">Þegar til staðar eru samhliða vinnslur getur leit að lausn falið í sér að skoða mismunandi samsetningar af tilföngum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-275">When there are parallel jobs, finding a solution may involve examining different combinations of resources.</span></span> <span data-ttu-id="bc19e-276">Fjöldi mögulegra samsetninga á tilföngum er afurðin af fjölda viðeigandi tilfanga fyrir tengdar samhliða vinnslur.</span><span class="sxs-lookup"><span data-stu-id="bc19e-276">The number of possible resource combinations is the product of the number of applicable resources for the connected parallel jobs.</span></span> <span data-ttu-id="bc19e-277">Sérstaklega þegar röð aftur í tímann er áætluð út frá þarfadagsetningunni, þá getur það tekið langan tíma fyrir reikniregluna að átta sig á því að það er engin lausn á vandanum sem gerir að verkum að samhliða vinnslurnar passi á undan deginum í dag, því að hún þarf að athuga allar samsetningar vegna þess að það gætu verið einhver tilföng sem voru með meiri skilvirkni eða annað dagatal sem gæti skilað niðurstöðu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-277">Especially when scheduling an order backwards from a requirement date, it can take quite a while for the logic to realize that there is no solution to the problem that will make the parallel jobs fit before today's date, as it will need to check all the combinations because there could be some resources that had a higher efficiency or a different calendar that might give a result.</span></span> <span data-ttu-id="bc19e-278">Þetta þýðir að ef engin tímamörk hafa verið sett, verður hún keyrð í langan tíma áður en stefnunni er breytt í áfram.</span><span class="sxs-lookup"><span data-stu-id="bc19e-278">This means that if no timeout limit has been set it will run for a long time before changing the direction to forward.</span></span>

<span data-ttu-id="bc19e-279">Þessi reikniregla samsetningar þýðir einnig það að bæta við fleiri viðeigandi tilföngum getur gert að verkum að vélin hægir á sér.</span><span class="sxs-lookup"><span data-stu-id="bc19e-279">This combinatorial logic also means that adding more applicable resources may make the engine run slower.</span></span> <span data-ttu-id="bc19e-280">Ef afkastavandamál eiga sér stað við samhliða aðgerðir og röðun með ótakmarkaðri afkastagetu, getur það að hluta til verið lagfært með því að láta leiðarhönnuðinn taka ákvörðun um hvaða tilfang eigi að nota og úthluta svo tilfanginu beint á aðgerðina (vegna þess að vélin í flestum tilvikum mun alltaf enda á því að velja sama tilfangið, þannig að lokaniðurstaðan verði sú sama).</span><span class="sxs-lookup"><span data-stu-id="bc19e-280">If performance problems occur when having parallel operations and scheduling with infinite capacity, it can partly be fixed by having the route designer take a decision on which resource should be used and then assign the resource directly on the operation (because the engine in most cases will always end up picking the same resource, so the end result will be the same).</span></span>

### <a name="hard-links"></a><span data-ttu-id="bc19e-281">Harðir tenglar</span><span class="sxs-lookup"><span data-stu-id="bc19e-281">Hard links</span></span>

<span data-ttu-id="bc19e-282">Ef gerð tengils milli tveggja vinnsla er stillt á harða gerð, er búið að tryggja að ekkert bil er á milli lok fyrstu vinnslu og upphafs þeirrar næstu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-282">Setting the link type between two jobs to hard, ensures that there is no time gap between the finish of one job and the start of the next one.</span></span> <span data-ttu-id="bc19e-283">Þetta getur verið mjög gagnlegt í aðstæðum eins og þegar málmur er hitaður í einni vinnslu og síðan unnið úr honum í næstu vinnslu, þar sem ekki er æskilegt að málmurinn kólni inn á milli.</span><span class="sxs-lookup"><span data-stu-id="bc19e-283">This can be very useful in scenarios like when metal is heated in one job and then processed in the next job, where it is not desirable to have the metal cool down in between.</span></span>

<span data-ttu-id="bc19e-284">Með stöðluðum mjúkum tenglum og röðun fram í tímann, ef leiðin myndar einfalda keðju án greina, er hægt að komast að niðurstöðu með því að finna lausn fyrir fyrstu vinnsluna sem fullnægir eigin takmörkunum og halda síðan áfram í gegnum keðjuna með því að dreifa lokatímanum frá fyrri vinnslu yfir á næstu vinnslu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-284">With standard soft links and forward scheduling, if the route forms a simple chain without any branches, a result can be achieved by finding a solution for the first job that satisfies its own constraints and then moving on through the chain propagating the end time from the previous job to the next job.</span></span> <span data-ttu-id="bc19e-285">Ef núverandi vinnsla getur ekki fundið neina afkastagetu, verður upphafstími fyrir hana fluttur lengra áfram, án þess að fyrri vinnslur myndi hugsanlega bil milli vinnslanna.</span><span class="sxs-lookup"><span data-stu-id="bc19e-285">If the current job can't find any capacity, the start time for it will be moved out further, without any consequence for the previous jobs potentially creating gaps between the jobs.</span></span> <span data-ttu-id="bc19e-286">Hins vegar með hörðum tenglum (sérstaklega í tengslum við takmarkaða afkastagetu) við sömu aðstæður, það að ein vinnsla seinna í keðjunni finnur ekki afkastagetu, þýðir að „draga“ þarf allar fyrri raðaðar vinnslur áfram ein af annarri og þar af leiðandi endurraðað nokkrum sinnum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-286">However with hard links (especially in connection with finite capacity) for the same scenario, the fact that one job later in the chain cannot find capacity, will mean that all previous scheduled jobs will have to be "dragged" along one by one and thereby rescheduled a number of times.</span></span> <span data-ttu-id="bc19e-287">Sérstaklega í aðstæðum með hárri hleðslu fyrir mörg tilföng, geta harðir tenglar valdið keðjuverkun þar sem vinnslurnar hafa áhrif hver á aðra og gera þarf margar ítrekanir áður en jafnvægi kemst á niðurstöðuna í hentugri röð.</span><span class="sxs-lookup"><span data-stu-id="bc19e-287">Especially in scenarios with high load for multiple resources, the hard links can cause a chain reaction where the jobs will affect each other and a number of iterations will have to be performed before the result stabilizes into a feasible schedule.</span></span>

## <a name="running-scheduling-engines-in-parallel"></a><span data-ttu-id="bc19e-288">Röðunarvélar keyrðar samhliða</span><span class="sxs-lookup"><span data-stu-id="bc19e-288">Running scheduling engines in parallel</span></span>

<span data-ttu-id="bc19e-289">Þegar röðun er framkvæmd sem hluti af keyrslu aðaláætlanagerðar þar sem hjálparar eru notaðir, getur hver þessara hjálparþráða aðaláætlanagerðar einnig sótt röðunarverk framleiðslupöntunar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-289">When performing scheduling as part of a master planning run where helpers are used, each of the master planning helper threads can also pick up production order scheduling tasks.</span></span> <span data-ttu-id="bc19e-290">Þetta þýðir að hægt er að keyra margar röðunarvélar á sama tíma.</span><span class="sxs-lookup"><span data-stu-id="bc19e-290">This means that multiple scheduling engines can be running at the same time.</span></span> <span data-ttu-id="bc19e-291">Að vinna með mörgum þráðum hefur almennt séð umtalsverð áhrif á afköst, en þó eru til staðar nokkrir neikvæðir þættir þegar kemur að röðun.</span><span class="sxs-lookup"><span data-stu-id="bc19e-291">While multithreading in general is a highly significant performance benefit, there are also some functional downsides when it comes to scheduling.</span></span>

<span data-ttu-id="bc19e-292">Í MRP er öllum framleiðslupöntunum fyrir tiltekið uppskriftastig raðað í röð þarfadagsetningar, sem þýðir að þær pantanir sem eru með fyrstu þarfadagsetninguna ætti að vera raðað fyrst og hafa þannig mestan möguleika á því að fá tiltæka afkastagetu tilfanga.</span><span class="sxs-lookup"><span data-stu-id="bc19e-292">In MRP, all production orders for a given bill of materials (BOM) level are scheduled in requirement date sequence, meaning that those orders with the earliest requirement date should be scheduled first and thereby have the highest chance of getting the available resource capacity.</span></span> <span data-ttu-id="bc19e-293">Hins vegar, með margar vélar sem eru taka úr listanum yfir óraðaðar pantanir, er ekki lengur hægt að tryggja röðina, þar sem ein gæti klárað hraðar en hin.</span><span class="sxs-lookup"><span data-stu-id="bc19e-293">However, with multiple engines picking from the list of unscheduled orders the sequence is no longer ensured, as one might complete faster than the other.</span></span>

<span data-ttu-id="bc19e-294">Einnig, þegar takmörkuð afkastageta er notuð við röðun og þegar mörg tilvik vélar eru að reyna að raða pöntunum sem eru hugsanlega að nota sömu tilföngin á sama tímabilinu, á sér stað keppni.</span><span class="sxs-lookup"><span data-stu-id="bc19e-294">Also, when scheduling using finite capacity and when multiple engine instances are trying to schedule orders that are potentially using the same resources at the same time interval, a race condition can occur.</span></span> <span data-ttu-id="bc19e-295">Fjöldi slíkra keppnisaðstæðna eru skráðar í reitinn **Árekstrum raðað** á ferilsíðu aðaláætlunar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-295">The number of such race conditions is recorded in the **Scheduling conflicts** field on the master plans history page.</span></span> <span data-ttu-id="bc19e-296">Úrlausnarrökin fyrir árekstra eru eftirfarandi:</span><span class="sxs-lookup"><span data-stu-id="bc19e-296">The conflict resolution logic is as follows:</span></span>

- <span data-ttu-id="bc19e-297">Tímasetja pöntun (ólæst) og fá frátekningar afkastagetu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-297">Schedule an order (lock-free) and get capacity reservations.</span></span>
- <span data-ttu-id="bc19e-298">Takið lásinn.</span><span class="sxs-lookup"><span data-stu-id="bc19e-298">Take the lock.</span></span>
- <span data-ttu-id="bc19e-299">Kannið hvort nýjar frátekningar á afkastagetu eru til staðar fyrir áætluð tilföng innan tímans sem um ræðir.</span><span class="sxs-lookup"><span data-stu-id="bc19e-299">Check if newer capacity reservations exist for the scheduled resources in the timespan.</span></span>
  - <span data-ttu-id="bc19e-300">Ef nei, skal skrifa afkastagetuna og losa lásinn.</span><span class="sxs-lookup"><span data-stu-id="bc19e-300">If no, write the capacity and release the lock.</span></span>
  - <span data-ttu-id="bc19e-301">Ef já, skal losa lásinn og endurraða pöntuninni frá upphafi.</span><span class="sxs-lookup"><span data-stu-id="bc19e-301">If yes, release the lock and reschedule the order from the beginning.</span></span>

<span data-ttu-id="bc19e-302">Þannig að þegar verið er að áætla með mörgum vélartilvikum er niðurstaðan ekki fullmótuð vegna þess að hún mun ráðast af nákvæmri tímasetningu hvers þráðar fyrir sig.</span><span class="sxs-lookup"><span data-stu-id="bc19e-302">So, when scheduling with multiple engine instances, the result is not fully deterministic because it will depend on the exact timing of each of the threads.</span></span>

## <a name="operation-scheduling-performance"></a><span data-ttu-id="bc19e-303">Afköst aðgerðaröðunar</span><span class="sxs-lookup"><span data-stu-id="bc19e-303">Operation scheduling performance</span></span>

<span data-ttu-id="bc19e-304">Jafnvel þótt aðgerðaröðun sé einnig þekkt sem afkastagetuáætlun í grófum dráttum, séð út frá vélinni, getur hún verið erfiðara vandamál að leysa ef takmörkuð afkastageta er notuð, því að þörf er á meiri gögnum til að ákvarða hentugleika.</span><span class="sxs-lookup"><span data-stu-id="bc19e-304">Even though operation scheduling is also known as rough-cut capacity planning, seen from an engine standpoint, it can be a harder problem to solve if finite capacity is used, as more data is needed to determine feasibility.</span></span>

<span data-ttu-id="bc19e-305">Afkastageta tilfangaflokks veltur á því hvaða og hve mörg tilföng eru meðlimir tilfangaflokksins.</span><span class="sxs-lookup"><span data-stu-id="bc19e-305">The capacity of a resource group depends on which and how many resources are members of the resource group.</span></span> <span data-ttu-id="bc19e-306">Tilfangaflokkur í sjálfu sér er ekki með neina afkastagetu&mdash;aðeins þegar tilföng eru hluti af flokknum fá þær afkstagetu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-306">A resource group in itself does not have any capacity&mdash;only when resources are a member of the group will it have capacity.</span></span> <span data-ttu-id="bc19e-307">Vegna þess að aðild að tilfangaflokknum getur verið breytileg eftir tíma, þarf að meta afkastagetu á hverjum degi.</span><span class="sxs-lookup"><span data-stu-id="bc19e-307">Because the resource group membership can vary over time, capacity must be evaluated per day.</span></span>

<span data-ttu-id="bc19e-308">Í aðgerðaröðun er dagatal tilfangaflokks notað til að ákvarða upphafs- og lokatíma fyrir hverja aðgerð.</span><span class="sxs-lookup"><span data-stu-id="bc19e-308">In operations scheduling, the resource group's calendar is used to determine the start and end times for each operation.</span></span> <span data-ttu-id="bc19e-309">Þetta þýðir að dagatal tilfangaflokks setur mörk á það hversu mikill tími getur verið raðað af aðgerðum fyrir eina aðgerð á einum degi í einum tilfangaflokki.</span><span class="sxs-lookup"><span data-stu-id="bc19e-309">This means that the resource group's calendar places a limit on how much time can be operations scheduled for one operation on one day in one resource group.</span></span> <span data-ttu-id="bc19e-310">Gagnstætt dagatali fyrir tiltekin tilföng eru nýtingargögn dagatals hunsuð fyrir tilfangaflokkinn þar sem þau tákna einfaldlega opnunartíma en ekki raunverulega afkastagetu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-310">Opposite the calendar for the specific resources, the efficiency data of the calendar is ignored for the resource group as it simply denotes opening hours and not actual capacity.</span></span>

<span data-ttu-id="bc19e-311">Til dæmis, ef vinnutími fyrir tilfangaflokk á einni tiltekinni dagsetningu er frá 8:00 til 16:00 getur ein aðgerð ekki sett meiri hleðslu á tilfangaflokkinn en það sem hægt er að gera á 8 klukkustundum, sama hversu mikla tiltæka afkastagetu tilfangaflokkurinn er með í heildina á þeim degi.</span><span class="sxs-lookup"><span data-stu-id="bc19e-311">For example, if the working time for a resource group on one specific date is from 8:00 to 16:00, one operation can't put more load on the resource group than what can be fit into 8 hours, no matter how much capacity that the resource group has available in total on that day.</span></span> <span data-ttu-id="bc19e-312">Tiltæk afkastageta getur hins vegar takmarka hleðsluna enn frekar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-312">The available capacity can however limit the load further.</span></span>

<span data-ttu-id="bc19e-313">Hleðslan úr vinnsluröðun í öllum tilföngum sem eru í tilfangaflokknum á ákveðnum degi eru tekin til greina þegar tiltæk afkastageta fyrir tilfangaflokkinn á sama deginum er reiknuð.</span><span class="sxs-lookup"><span data-stu-id="bc19e-313">The load from job scheduling on all the resources included in the resource group on a given day is considered when the available capacity for the resource group on the same day is calculated.</span></span> <span data-ttu-id="bc19e-314">Fyrir hverja dagsetningu er útreikningurinn:</span><span class="sxs-lookup"><span data-stu-id="bc19e-314">For each date, the calculation is:</span></span>

<span data-ttu-id="bc19e-315">*Tiltæk afkastageta tilfangaflokks = afkastageta fyrir tilföng í flokknum byggt á dagatali &ndash; Vinnsluröðuðu hleðslunni á tilföngum í flokknum &ndash; Operations áætluð hleðsla á tilföngum í flokknum &ndash; Operations áætluð hleðsla á forðaflokknum*</span><span class="sxs-lookup"><span data-stu-id="bc19e-315">*Available resource group capacity = Capacity for resources in the group based on their calendar &ndash; Job scheduled load on the resources in the group &ndash; Operations scheduled load on the resources in the group &ndash; Operations scheduled load on the resource group*</span></span>

<span data-ttu-id="bc19e-316">Í flipanum **Tilfangaþarfir** í leiðaraðgerðinni, er hægt að tilgreina tilfangaþörfina með því að nota annaðhvort tiltekið tilfang (í slíku tilfelli verður aðgerðinni raðað með því að nota það tilfang), fyrir tilfangaflokk, fyrir tilfangagerð eða fyrir eina eða fleiri getu, hæfni, námskeið eða vottorð.</span><span class="sxs-lookup"><span data-stu-id="bc19e-316">On the **Resource requirements** tab on the route operation, the resource requirements can be specified using either a specific resource (in which case the operation will be scheduled using that resource), for a resource group, for a resource type, or for one or more capabilities, skill, course, or certificate.</span></span> <span data-ttu-id="bc19e-317">Þegar allir þessir valmöguleikar eru notaðir er mikill sveigjanleiki fólginn í hönnun leiðar, hún flækir einnig röðun vélarinnar þar sem taka verður afkastagetu getu greina fyrir hvern „eiginleika“ (óhlutbundið heiti sem notað er í vélinni fyrir getu, hæfni o.s.frv.).</span><span class="sxs-lookup"><span data-stu-id="bc19e-317">While using all of these options gives a great flexibility on the route design, it also complicates the scheduling for the engine as the capacity must be accounted for per "property" (the abstract name used in the engine for capability, skills, and so on).</span></span>

<span data-ttu-id="bc19e-318">Afkastageta tilfangaflokks fyrir getu er samtala afkastagetu allra tilfanga í tilfangaflokknum sem er með umrædda getu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-318">The resource group's capacity for a capability is the sum of the capacity for all resources in the resource group that has the capability in question.</span></span> <span data-ttu-id="bc19e-319">Ef tilfang í flokknum er með getu verður það tekið til greina sama hvaða stig getunnar er nauðsynlegt.</span><span class="sxs-lookup"><span data-stu-id="bc19e-319">If a resource in the group has a capability, it will be considered no matter what level of the capacity is required.</span></span>

<span data-ttu-id="bc19e-320">Í aðgerðaröðun verður tiltæk afkastageta fyrir tiltekna getu fyrir tilfangaflokk minnkuð þegar henni er hlaðið með aðgerð sem krefst getunnar sem um ræðir.</span><span class="sxs-lookup"><span data-stu-id="bc19e-320">In operations scheduling, the available capacity for a certain capability for a resource group will be reduced when it is loaded with an operation that requires the capability in question.</span></span> <span data-ttu-id="bc19e-321">Ef aðgerðin þarf fleiri en eina getu, verður afkastagetan minnkuð fyrir allar nauðsynlegar getur.</span><span class="sxs-lookup"><span data-stu-id="bc19e-321">If the operation requires more than one capability, the capacity will be reduced for all required capabilities.</span></span>

<span data-ttu-id="bc19e-322">Fyrir hverja dagsetningu er nauðsynlegur útreikningur:</span><span class="sxs-lookup"><span data-stu-id="bc19e-322">For each date, the required calculation is:</span></span>

<span data-ttu-id="bc19e-323">*Tiltæk afkastageta fyrir getu = afkastageta fyrir getu &ndash; Vinnsluröðuðu álagi á tilföngum með tilgreindum getu, tekin með í tilfangaflokki &ndash; Operations áætluð hleðsla á tilföngum með tilgreindum getu, tekin með í tilfangaflokki &ndash; Operations áætluð hleðsla á forðaflokknum sjálfu sem útheimtir tiltekna getu*</span><span class="sxs-lookup"><span data-stu-id="bc19e-323">*Available capacity for a capability = Capacity for the capability &ndash; Job scheduled load on the resources with the specific capability, included in the resource group &ndash; Operations scheduled load on the resources with the specific capability, included in the resource group &ndash; Operations scheduled load on the resource group itself that require the specific capability*</span></span>

<span data-ttu-id="bc19e-324">Þetta þýðir að ef álag er á tilteknu tilfangi er álagið talið með í útreikningi á tiltækri afkastagetu tilfangaflokks fyrir hverja getu, því að álagið á tilteknu tilfangi dregur úr framlagi þess til afkastagetu tilfangaflokksins fyrir getu, sama hvort álagið á tilteknu tilfangi er fyrir þessa tilteknu getu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-324">This means that if there is load on a specific resource, the load is considered in the calculation of the resource group's available capacity per capability, because the load on a specific resource reduces its contribution to the resource group's capacity for a capability no matter if the load on the specific resource is for that specific capability.</span></span> <span data-ttu-id="bc19e-325">Ef álag er á stigi tilfangaflokksins, er það tekið með í útreikningi á tiltækri afkastagetu tilfangaflokksins fyrir hverja getu eingöngu ef álagið kemur til vegna aðgerðar sem krefst tiltekinnar getu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-325">If there is load on the resource group level, it is considered in the calculation of the resource group's available capacity per capability only if the load is from an operation that requires the specific capability.</span></span>

<span data-ttu-id="bc19e-326">Ofangreind reiknirök eru flókin því að það er það sama fyrir hverja gerða af „eiginleika“, þannig að aðgerðaröðun með takmarkaða afkastagetu krefst umtalsverðs gagnamagns til að vera hlaðin.</span><span class="sxs-lookup"><span data-stu-id="bc19e-326">The above logic is complicated, as this is the same for each type of "property" so using operations scheduling with finite capacity requires a significant amount of data to be loaded.</span></span>

## <a name="viewing-scheduling-engine-input-and-output"></a><span data-ttu-id="bc19e-327">Skoða inntak og úttak röðunarvélar</span><span class="sxs-lookup"><span data-stu-id="bc19e-327">Viewing scheduling engine input and output</span></span>

<span data-ttu-id="bc19e-328">Til að fá tilteknar upplýsingar um inntak og úttak röðunarferlis skal virkja innskráningu með því að fara í **Fyrirtækisstjórnun \> Uppsetning \> Röðun \> Stjórnklefi röðunarrakningar**.</span><span class="sxs-lookup"><span data-stu-id="bc19e-328">To get specific details of the input and output of the scheduling process,  enable logging by going to **Organization administration \> Setup \> Scheduling \> Scheduling tracing cockpit**.</span></span>

<span data-ttu-id="bc19e-329">Á þessari síðu skal fyrst velja **Virkja innskráningu** á aðgerðasvæðinu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-329">On this page, first select **Enable logging** on the Action Pane.</span></span> <span data-ttu-id="bc19e-330">Keyrið síðan röðunina fyrir framleiðslupöntunina.</span><span class="sxs-lookup"><span data-stu-id="bc19e-330">Then run the scheduling for the production order.</span></span> <span data-ttu-id="bc19e-331">Þegar því er lokið skal fara aftur á síðuna **Stjórnklefi röðunarrakningar** og velja **Slökkva á skráningu** á aðgerðasvæðinu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-331">When complete, return to the **Scheduling tracing cockpit** page and select **Disable logging** on the Action Pane.</span></span> <span data-ttu-id="bc19e-332">Endurhlaðið síðuna og ný lína birtist í hnitanetinu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-332">Refresh the page and a new line will appear in the grid.</span></span> <span data-ttu-id="bc19e-333">Velja skal nýju línuna og velja **Niðurhal** á aðgerðasvæðinu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-333">Select the new line and select **Download** on the Action Pane.</span></span> <span data-ttu-id="bc19e-334">Þetta mun gefa upp þjappaða zip-möppu sem inniheldur eftirfarandi skrár:</span><span class="sxs-lookup"><span data-stu-id="bc19e-334">This will give you a .zip compressed folder containing the following files:</span></span>

- <span data-ttu-id="bc19e-335">**Log.txt** - Þetta er kladdaskráin sem lýsir skrefunum sem vélin fer í gegnum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-335">**Log.txt** - This is the log file that describes the steps that the engine goes through.</span></span> <span data-ttu-id="bc19e-336">Hún er mjög ítarleg og getur verið dálítið yfirþyrmandi, en þegar hún er notuð sem hluti af því að prófa uppsetningu leiðar til að leysa úr vandamálum vegna afkasta, þá skal fyrst skoða tímamismuninn milli fyrstu og síðustu línu, þar sem þetta mun gefa nákvæman tíma sem áætlunin hefur notað.</span><span class="sxs-lookup"><span data-stu-id="bc19e-336">It is very elaborate and can be a bit overwhelming, but when used as part of experimenting with the route setup to resolve performance problems the first thing to look for is the difference in time between the first and the last line, as this will give you the exact time the scheduler has spent.</span></span>
- <span data-ttu-id="bc19e-337">**XmlModel.xml** - Þetta inniheldur líkanið sem er smíðað í X++ og sem vélin vinnur á.</span><span class="sxs-lookup"><span data-stu-id="bc19e-337">**XmlModel.xml** - This contains the model that is built in X++ and that the engine operates on.</span></span> <span data-ttu-id="bc19e-338">`JobId` sem notað er í skránni samsvarar `RecId` úr upprunatöflunni sem inniheldur vinnslurnar (`ReqRouteJob` eða `ProdRouteJob`).</span><span class="sxs-lookup"><span data-stu-id="bc19e-338">The `JobId` used in the file correlates to the `RecId` from the source table containing the jobs (`ReqRouteJob` or `ProdRouteJob`).</span></span> <span data-ttu-id="bc19e-339">Dæmigerður hlutur sem á að leita að í þessari skrá er sá að dagsetningarnar sem eru gefnar upp í `ConstraintJobStartsAt` og `ConstraintJobEndsAt` eru eins og búist er við, að `JobGoal` eiginleikinn sé rétt stilltur og að vinnslurnar tengist hver annarri í gegnum `JobLink`-takmarkanir.</span><span class="sxs-lookup"><span data-stu-id="bc19e-339">The typical thing to look for in this file is that the dates given in `ConstraintJobStartsAt` and `ConstraintJobEndsAt` are as expected, that the `JobGoal` property is set correctly, and that the jobs are related to each other through the `JobLink` constraints.</span></span>
- <span data-ttu-id="bc19e-340">**XmlSlots.xml** - Þetta inniheldur alla vinnutímana og fráteknar afkastagetur sem vélin hefur beðið um.</span><span class="sxs-lookup"><span data-stu-id="bc19e-340">**XmlSlots.xml** - This contains all the working times and capacity reservations that the engine has requested.</span></span> <span data-ttu-id="bc19e-341">Aðeins vélin mun óska eftir vinnutímum og frátekningum dagatalsins fyrir tímabilin þar sem hún reynir að koma vinnunni fyrir (og aukalegan biðtíma), þannig að ef skráin inniheldur tíma langt fram í tímann, gæti það verið vísbending um vandamál með uppsetninguna.</span><span class="sxs-lookup"><span data-stu-id="bc19e-341">The calendar working times and reservations will only be requested by the engine for the time periods where it tries to place the jobs (and an extra buffer), so if the file contains times very far in the future, it might be an indication of a problem with the setup.</span></span> <span data-ttu-id="bc19e-342">`ResourceProperty`-hnútarnir birtast fyrir hvert tilfang í þeim tilfangaflokki og getu sem það tengist fyrir það tímabil.</span><span class="sxs-lookup"><span data-stu-id="bc19e-342">The `ResourceProperty` nodes will show for each resource which resource group and capabilities it is associated with for which periods.</span></span>
- <span data-ttu-id="bc19e-343">**Result.xml** - Þetta inniheldur niðurstöður fyrir röðunarkeyrsluna.</span><span class="sxs-lookup"><span data-stu-id="bc19e-343">**Result.xml** - This contains the result of the scheduling run.</span></span>

<span data-ttu-id="bc19e-344">Athugið að rakningarvirknin getur aukið álagið umtalsvert, þannig að eingöngu skal nota hana til að skoða röðun á tilteknum pöntunum á kerfisbundinn hátt.</span><span class="sxs-lookup"><span data-stu-id="bc19e-344">Note that the tracing functionality can add significant performance overhead, so only use it for investigating scheduling of specific orders in a controlled manner.</span></span> <span data-ttu-id="bc19e-345">Ef kveikt er á henni meðan aðaláætlanagerðin er í gangi, nær hún fljótt upp í hámarksstærð og hættir.</span><span class="sxs-lookup"><span data-stu-id="bc19e-345">If it is turned on during a master planning run it will quickly reach its size limit and stop.</span></span>

## <a name="troubleshooting-performance"></a><span data-ttu-id="bc19e-346">Afköst úrræðaleituð</span><span class="sxs-lookup"><span data-stu-id="bc19e-346">Troubleshooting performance</span></span>

<span data-ttu-id="bc19e-347">Af fyrri köflunum að dæma er skiljanlegt að ýmsar hindranir geta komið upp þegar kemur að uppsetningunni og notkun á röðunarvélinni, sem geta leitt til afkastavandamála.</span><span class="sxs-lookup"><span data-stu-id="bc19e-347">As can be understood from all of the previous sections, there are some pitfalls when it comes to the setup and usage of the scheduling engine, which can lead to performance problems.</span></span> <span data-ttu-id="bc19e-348">Eftirfarandi gátlista er hægt að nota til að leysa úr slíkum vandamálum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-348">The following check list can be used for troubleshooting such issues.</span></span> <span data-ttu-id="bc19e-349">Mikilvægt er að skoða öll atriðin þar sem vandinn er oftast samblanda af mörgum þáttum sem leiða til vandamála.</span><span class="sxs-lookup"><span data-stu-id="bc19e-349">It is important to look at all the points as it is most often a combination of multiple factors that leads to problems.</span></span>

### <a name="performing-scheduling-as-part-of-mrp-when-it-is-not-needed"></a><span data-ttu-id="bc19e-350">Framkvæma áætlanagerð sem hluta af MRP þegar þess gerist ekki þörf</span><span class="sxs-lookup"><span data-stu-id="bc19e-350">Performing scheduling as part of MRP when it is not needed</span></span>

<span data-ttu-id="bc19e-351">Jafnvel þótt leiðir séu notaðar til að stýra framleiðslu, svo sem kostnaður og skýrslugerð, er það ekki endilega nauðsynlegt til að taka tillit til þeirra meðan MRP er í gangi.</span><span class="sxs-lookup"><span data-stu-id="bc19e-351">Even though routes are used for the production control purposes such as costing and reporting, it might not be necessary to consider them during MRP.</span></span> <span data-ttu-id="bc19e-352">Í sumum tilvikum er nóg að vera með hefðbundinn afhendingartíma framleiðslu gefinn upp fyrir vöruna fyrir áætlanagerð.</span><span class="sxs-lookup"><span data-stu-id="bc19e-352">In some cases, having a standard production lead time specified for the item will be sufficient for planning.</span></span> <span data-ttu-id="bc19e-353">Til að slökkva á áætlanagerð leiðar skal stilla tímamörk afkastagetu á núll.</span><span class="sxs-lookup"><span data-stu-id="bc19e-353">To turn off route scheduling, set the capacity time fence to zero.</span></span> <span data-ttu-id="bc19e-354">Ef gera á áætlanagerð, þarf að stilla tímamörk afkastagetunnar vel og vandlega því að hugsanlega er ekki nauðsynlegt að taka tillit til leiða að öllu leyti fyrir tímamörk á umfangi MRP.</span><span class="sxs-lookup"><span data-stu-id="bc19e-354">If scheduling should be done, then the capacity time fence must be carefully set because it might not be necessary to consider routes for the full extent of the MRP's coverage time fence.</span></span>

<span data-ttu-id="bc19e-355">Athugið að ef pöntunin er ekki tímasett meðan MRP er í gangi, þar í staðinn að tímasetja hana þegar áætluð pöntun er staðfest.</span><span class="sxs-lookup"><span data-stu-id="bc19e-355">Note that if the order is not scheduled during MRP, then it will instead need to be scheduled when the planned order is firmed.</span></span> <span data-ttu-id="bc19e-356">Þetta þýðir að staðfestingarferlið tekur lengri tíma, þannig að það fer eftir því hversu margar af ráðlögðum áætluðum pöntunum verða staðfestar hvort afkastaaukningin meðan MRP er í gangi tapist við staðfestingu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-356">This means that the firming process will take longer, so depending on how many of the suggested planned orders get firmed the performance gain during MRP might be lost at firming.</span></span>

### <a name="route-with-unnecessary-operations"></a><span data-ttu-id="bc19e-357">Leið með ónauðsynlegum aðgerðum</span><span class="sxs-lookup"><span data-stu-id="bc19e-357">Route with unnecessary operations</span></span>

<span data-ttu-id="bc19e-358">Þegar leiðin er hönnuð getur verið freistandi að líkja eftir raunverulegum aðstæðum með öllum skrefunum sem framleiðslan fer í gegnum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-358">When designing the route, it is tempting to try to model the real world exactly with all the steps the production goes through.</span></span> <span data-ttu-id="bc19e-359">Þótt þetta geti reynst gagnlegt í einhverjum tilfellum, hjálpar það ekki afköstunum því að líkanið sem vélin þarf að keyra á stækkar (bæði hvað varðar vinnslur og takmarkanir) og fleiri SQL-skipanir verða keyrðar fyrir innsetningu og uppfærslu á vinnslum og frátekinni afkastagetu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-359">While this can be useful in some cases, it is not good for the performance as the model the engine needs to work on gets larger (both in terms of jobs and constraints) and more SQL statements will be executed for insertion and update of the jobs and capacity reservations.</span></span> <span data-ttu-id="bc19e-360">Einnig gætir áhrifa eftir á þegar þarf að tilkynna framvindu vinnslanna, sem hægt er að flytja með sjálfvirkum bókunum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-360">Also, there is the downstream effect of having to eventually report progress on the jobs, which can be mitigated with automatic postings.</span></span> <span data-ttu-id="bc19e-361">Ef gögnin eru ekki notuð í neitt, skapar það óþarfa álag.</span><span class="sxs-lookup"><span data-stu-id="bc19e-361">If the data is not used for anything, it creates unnecessary load.</span></span>

<span data-ttu-id="bc19e-362">Við mælum með því að aðeins nauðsynlegar aðgerðir séu búnar til fyrir áætlanagerð (sem eru yfirleitt flöskuhálstilföngin) og/eða kostnaðarútreikninga.</span><span class="sxs-lookup"><span data-stu-id="bc19e-362">We recommend that you only create operations that are strictly needed for scheduling (which will typically be the bottleneck resources) and/or costing purposes.</span></span> <span data-ttu-id="bc19e-363">Að öðrum kosti ætti að flokka margar smærri aðgreindar aðgerðir í eina stærri aðgerð sem stendur fyrir stærri hluta ferlisins.</span><span class="sxs-lookup"><span data-stu-id="bc19e-363">Alternatively you should group many smaller distinct operations into one larger operation that represents a greater part of the process.</span></span>

### <a name="many-applicable-resources-for-an-operation"></a><span data-ttu-id="bc19e-364">Mörg viðeigandi tilföng fyrir aðgerð</span><span class="sxs-lookup"><span data-stu-id="bc19e-364">Many applicable resources for an operation</span></span>

<span data-ttu-id="bc19e-365">Fjöldi viðeigandi tilfanga fyrir aðgerð er ákvarðaður með tilfangaþörfinni sem er stillt í aðgerðartengslunum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-365">The number of applicable resources for an operation is determined by the resource requirements set on the operation relation.</span></span> <span data-ttu-id="bc19e-366">Þörfin getur annaðhvort verið fyrir tiltekið (stakt) tilfang eða það getur byggt á aðild tilfangs að tilfangaflokki eða getu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-366">The requirement can either be for a specific (individual) resource or it can be based on the resource's membership of a resource group or capability.</span></span>

<span data-ttu-id="bc19e-367">Ef áætlanagerð er ekki gerð með takmarkaðri getu og öll viðeigandi tilföng eru með sama dagatalið og skilvirkni, mun röðunarvélin alltaf enda á því að velja sama tilfangið fyrir aðgerð, en aðeins eftir að hafa reynt viðeigandi tilföng til að athuga hvort að eitt þeirra er „betra“ en hin.</span><span class="sxs-lookup"><span data-stu-id="bc19e-367">If scheduling is not done using finite capacity and all the applicable resources have the same calendar and efficiency, then the scheduling engine will always end up picking the same resource for an operation, but only after trying all the applicable resources to check if there is one that is "better" than the others.</span></span> <span data-ttu-id="bc19e-368">Í slíku tilfelli er hægt að minnka álagið á áætlanagerð til muna með því einfaldlega að úthluta alltaf tilteknu tilfangi á aðgerðina á hönnunartíma leiðarinnar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-368">In this case, the load of the scheduling can be greatly reduced simply by always assigning a specific resource to the operation at the route design time.</span></span>

### <a name="route-with-parallel-operations"></a><span data-ttu-id="bc19e-369">Leið með samhliða aðgerðum</span><span class="sxs-lookup"><span data-stu-id="bc19e-369">Route with parallel operations</span></span>

<span data-ttu-id="bc19e-370">Samhliða aðgerðir (aðal/auka) eru öflugt verkfæri til að líkja eftir aðstæðum þegar bæði þarf vél og notanda til að framkvæma tiltekið verk, en þær eru einnig rótin að ýmsum vandamálum varðandi afköstin.</span><span class="sxs-lookup"><span data-stu-id="bc19e-370">While parallel operations (primary/secondary) are a powerful tool to model scenarios like when a machine and an operator are both needed to perform a specific task, it is also the source of many performance issues.</span></span> <span data-ttu-id="bc19e-371">Ef þörf fyrir tilttekið stakt tilfang er úthlutað á bæði aðal- og aukaaðgerð, veldur það yfirleitt ekki vandræðum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-371">If a requirement for a specific individual resource is assigned to both the primary and secondary operation, it is typically not a problem.</span></span> <span data-ttu-id="bc19e-372">En ef mörg möguleg tilföng eru til staðar fyrir hverja þessara aðgerða, þá eykst flækjustig útreikninga áætlanagerðar umtalsvert.</span><span class="sxs-lookup"><span data-stu-id="bc19e-372">But if there are many possible resources for each of the operations, then it adds significant computational complexity to the scheduling.</span></span>

<span data-ttu-id="bc19e-373">Önnur leið en að nota samhliða aðgerðir er annaðhvort líkja eftir pörunum sem „sýndar“tilföng (sem stendur þá alltaf fyrir teymið sem fer saman í gegnum aðgerðina) eða einfaldlega ekki líkja ekki eftir neinni aðgerð ef hún stendur ekki fyrir flöskuháls.</span><span class="sxs-lookup"><span data-stu-id="bc19e-373">An alternative to using parallel operations is either to model the pairs as "virtual" resources (which will then represent the team that always goes together for the operation) or to simply not model one of the operations if it doesn't represent a bottleneck.</span></span>

### <a name="route-with-quantity-of-resources-higher-than-1"></a><span data-ttu-id="bc19e-374">Leiðir með fjölda tilfanga hærri en 1</span><span class="sxs-lookup"><span data-stu-id="bc19e-374">Route with quantity of resources higher than 1</span></span>

<span data-ttu-id="bc19e-375">Ef fjöldi tilfanga sem þarf fyrir aðgerð er stilltur á hærra en einn, þá kemur það út á það sama og að nota aðal-/aukaaðgerðir vegna þess að margar samhliða vinnslur eru sendar til vélarinnar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-375">If setting the quantity of resources needed for an operation higher than one, then it results effectively the same as using primary/secondary operations because multiple parallel jobs are sent to the engine.</span></span> <span data-ttu-id="bc19e-376">Hins vegar, fyrir þetta tilfelli er ekki möguleiki á að nota sérstakar úthlutanir tilfanga vegna þess að fjöldi sem er hærra en einn krefst þess að fleiri en eitt tilfang eigi við um aðgerðina.</span><span class="sxs-lookup"><span data-stu-id="bc19e-376">However, for this case there is not an option of using specific resource assignments, because a quantity higher than one requires that more than one resource is applicable for the operation.</span></span>

### <a name="excessive-use-of-finite-capacity"></a><span data-ttu-id="bc19e-377">Óhófleg notkun á takmarkaðri getu</span><span class="sxs-lookup"><span data-stu-id="bc19e-377">Excessive use of finite capacity</span></span>

<span data-ttu-id="bc19e-378">Notkun takmarkaðrar afkastagetu krefst þess að vélin hlaði upplýsingum um afkastagetu úr gagnagrunni og geti haft reikningsálag vegna þess að það verður erfiðara að finna lausn, sérstaklega í umhverfum þar sem tilföngin eru bókuð nálægt hámarksafkastagetu þeirra.</span><span class="sxs-lookup"><span data-stu-id="bc19e-378">Use of finite capacity requires the engine to load the capacity information from a database and can have a computational overhead because it will be harder to find a solution especially in environments where the resources are booked close to their maximum capacity.</span></span> <span data-ttu-id="bc19e-379">Þar af leiðandi er mikilvægt að meta vandlega hvort tilfang þurfi raunverulega að nota takmarkaða afkastagetu því annars gætu þau verið yfirbókuð.</span><span class="sxs-lookup"><span data-stu-id="bc19e-379">As a result, it is important to carefully evaluate if a resource really needs to use finite capacity or they can be overbooked.</span></span> <span data-ttu-id="bc19e-380">Vegna þess að það gæti verið mismunur á milli tilfanga takmarkaðrar afkastagetu í því hversu mikilvægt er að yfirbóka þau ekki, er mælt með því að nota valkost flöskuháls á tilfang í samsetningu við sérstakt gildi í áætluninni í „Tímamörk afkastagetu fyrir flöskuhálstilföng“.</span><span class="sxs-lookup"><span data-stu-id="bc19e-380">Because there might be a difference among finite capacity resources in how important they are not to overbook, we recommend using the bottleneck option on a resource in combination with a separate value on the plan in "Capacity time fence for bottleneck resources".</span></span> <span data-ttu-id="bc19e-381">Með því að nota flöskuhálsinn er hægt að gera kleift að lækka almenn tímamörk takmarkaðrar afkastagetu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-381">Using the bottleneck concept can enable that the general finite capacity time fence can be lowered.</span></span>

### <a name="setting-hard-links"></a><span data-ttu-id="bc19e-382">Harðir tenglar settir upp</span><span class="sxs-lookup"><span data-stu-id="bc19e-382">Setting hard links</span></span>

<span data-ttu-id="bc19e-383">Stöðluð tenglagerð leiðarans er *mjúk*, sem þýðir að bil er leyfilegt á milli lokatíma einnar aðgerðar og upphafs þeirrar næstu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-383">The standard link type of the route is *soft*, which means that a time gap is allowed between the finishing time of one operation and the start of the next.</span></span> <span data-ttu-id="bc19e-384">Ef þetta er gert getur það haft óheppileg áhrif, ef efni eða afkastageta er ekki í boði fyrir eina af aðgerðunum í mjög langan tíma, gæti framleiðslan verið aðgerðalaus um nokkurt skeið, sem þýðir mögulega aukningu á verkum í vinnslu.</span><span class="sxs-lookup"><span data-stu-id="bc19e-384">Allowing this can have the unfortunate effect that, if materials or capacity are not available for one of the operations for a very long time, the production could be idle for quite a while, meaning a possible increase of work in progress.</span></span> <span data-ttu-id="bc19e-385">Þetta gerist ekki með hörðum tenglum vegna þess að lok og upphaf verða að passa fullkomlega saman.</span><span class="sxs-lookup"><span data-stu-id="bc19e-385">This will not happen with hard links because the finish and start must align perfectly.</span></span> <span data-ttu-id="bc19e-386">En ef harðir tenglar eru settir upp gerir það áætlanagerð erfiðara um vik vegna þess að skaranir á vinnutíma og afkastagetu verða að vera reiknaðar út fyrir bæði tilföng aðgerðanna.</span><span class="sxs-lookup"><span data-stu-id="bc19e-386">But setting hard links makes the scheduling problem more difficult because working time and capacity intersections must be calculated for the two resources of the operations.</span></span> <span data-ttu-id="bc19e-387">Ef það eru einnig samhliða aðgerðir til staðar, eykst tími útreiknings til muna.</span><span class="sxs-lookup"><span data-stu-id="bc19e-387">If there are also parallel operations involved, this adds significant computational time.</span></span> <span data-ttu-id="bc19e-388">Ef tilföng aðgerðanna tveggja eru með mismunandi dagatöl sem skarast ekki á neinn hátt, er ekki hægt að leysa vandamálið.</span><span class="sxs-lookup"><span data-stu-id="bc19e-388">If the resources of the two operations have different calendars that don't overlap at all, the problem is unsolvable.</span></span>

<span data-ttu-id="bc19e-389">Aðeins er mælt með því að nota harða tengla þegar það er algjörlega nauðsynlegt og íhuga vel og vandlega hvort þeir eru nauðsynlegir fyrir hverja aðgerð leiðarinnar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-389">We recommend using hard links only when strictly necessary, and carefully consider if it is necessary for each operation of the route.</span></span>

<span data-ttu-id="bc19e-390">Til að draga úr verkum í vinnslu án þess að nota harða tengla er ein leiðin að áætla pöntunina tvisvar sinnum og breyta stefnu hennar í hina áttina í seinna skiptið.</span><span class="sxs-lookup"><span data-stu-id="bc19e-390">To reduce the work in progress without applying hard links, a trick is to schedule the order twice with changing to the opposite direction for the second pass.</span></span> <span data-ttu-id="bc19e-391">Ef fyrsta áætlunin var gerð afturábak frá afhendingardegi, ætti hin síðari að vera gerð áfram frá áætluðum upphafsdegi.</span><span class="sxs-lookup"><span data-stu-id="bc19e-391">If the first schedule was done backwards from delivery date, then the second should be done forward from the scheduled start date.</span></span> <span data-ttu-id="bc19e-392">Þetta leiðir til þess að vinnslunum verði þjappað saman eins vel og mögulegt er þannig að verk í vinnslu verði lágmarkað.</span><span class="sxs-lookup"><span data-stu-id="bc19e-392">This will result in the jobs being compressed as much as possible so that the work in progress is minimized.</span></span>

### <a name="separate-calendar-for-each-resource"></a><span data-ttu-id="bc19e-393">Aðskilið dagatal fyrir hvort tilfang</span><span class="sxs-lookup"><span data-stu-id="bc19e-393">Separate calendar for each resource</span></span>

<span data-ttu-id="bc19e-394">Einn helsti gagnagjafi röðunarvélarinnar eru dagatalsupplýsingar, sem getur verið dýrt að hlaða úr gagnagrunninum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-394">One of the main sources of data for the scheduling engine is calendar information, which can be expensive to load from the database.</span></span> <span data-ttu-id="bc19e-395">Þar sem dagatöl eru mynduð út frá sniðmátum, getur verið freistandi að búa til dagatal fyrir hvert tilfang og laga svo upplýsingarnar til í þessu dagatali þegar tilfangið er með niðurtíma og önnur vandamál.</span><span class="sxs-lookup"><span data-stu-id="bc19e-395">Because calendars are generated based on templates, it would be tempting to generate a calendar for each resource and then adjust the information in this calendar when the resource has downtime and other issues.</span></span> <span data-ttu-id="bc19e-396">Ef þetta er gert dregur það hins vegar umtalsvert úr getu vélarinnar til að vista dagatalsgögn í skyndiminni, þar sem hún þyrfti að óska eftir nýjum gögnum fyrir hvert tilfang og það getur leitt til umtalsverðra vandamála varðandi afköst.</span><span class="sxs-lookup"><span data-stu-id="bc19e-396">However, doing this will severely limit the engines ability to cache the calendar data as it would need to request new data for each resource and can be a large source of performance problems.</span></span> <span data-ttu-id="bc19e-397">Þess í stað er mælt með því að endurnýta dagatölin eins mikið og hægt er á milli tilfanganna og síðan stjórna breytingum á niðurtíma með því að úthluta öðru dagatalskenni fyrir tímabil.</span><span class="sxs-lookup"><span data-stu-id="bc19e-397">Instead, we recommend that you reuse the calendars as much as possible between the resources, and then control downtime changes by assigning a different calendar ID for a period.</span></span>

### <a name="high-number-of-working-time-slots-per-calendar-day"></a><span data-ttu-id="bc19e-398">Mikill fjöldi vinnutímahólfa á almanaksdag</span><span class="sxs-lookup"><span data-stu-id="bc19e-398">High number of working time slots per calendar day</span></span>

<span data-ttu-id="bc19e-399">Vegna þess að vélin vinnur með því að skoða afkastagetu hvers tímahólfs fyrir sig, er gagnlegt að lágmarka fjölda tímahólfa á almanaksdag.</span><span class="sxs-lookup"><span data-stu-id="bc19e-399">Because the engine works by examining time slots one-by-one for capacity, it is beneficial to minimize the number of time slots per calendar day.</span></span> <span data-ttu-id="bc19e-400">Þetta gæti verið gert, t.d. með því að velta fyrir sér hvort það sé mikilvægt að væntanleg áætlun endurspegli það að starfsmenn fái 5 mínútna hlé á klukkustundarfresti.</span><span class="sxs-lookup"><span data-stu-id="bc19e-400">This could be done, for example, by considering whether it's important for the resulting schedule to reflect that workers have a 5-minute break every hour.</span></span>

### <a name="large-or-none-scheduling-timeouts"></a><span data-ttu-id="bc19e-401">Stórar (eða engar) tímalokanir áætlanagerðar</span><span class="sxs-lookup"><span data-stu-id="bc19e-401">Large (or none) scheduling timeouts</span></span>

<span data-ttu-id="bc19e-402">Hægt er að hámarka afköst röðunarvélar með því að nota færibreytur sem er að finna á síðunni **Færibreytur röðunar**.</span><span class="sxs-lookup"><span data-stu-id="bc19e-402">Scheduling engine performance can be optimized using parameters found on the **Scheduling parameters** page.</span></span> <span data-ttu-id="bc19e-403">Stillingarnar **Tímalokun áætlanagerðar virkjuð** og **Hámörkun tímalokunar áætlanagerðar virkjuð** eiga alltaf að vera á **Já**.</span><span class="sxs-lookup"><span data-stu-id="bc19e-403">The **Scheduling timeout enabled** and **Scheduling optimization timeout enabled** settings should always be set to **Yes**.</span></span> <span data-ttu-id="bc19e-404">Ef stillt er á **Nei** getur röðunin mögulega keyrt endalaust ef óæskileg leið með mörgum valkostum hefur verið búin til.</span><span class="sxs-lookup"><span data-stu-id="bc19e-404">If set to **No**, the scheduling can potentially run infinitely if an unfeasible route with many options has been created.</span></span>

<span data-ttu-id="bc19e-405">Gildið fyrir **Hámarkstími röðunar á hverja röð** stjórnar því hversu margar sekúndur að hámarki má eyða í að reyna að finna lausn fyrir eina röð (í flestum tilfellum á röð við um staka pöntun).</span><span class="sxs-lookup"><span data-stu-id="bc19e-405">The value for **Maximum scheduling time per sequence** controls how many seconds can, at most, be spent trying to find a solution for a single sequence (in most cases a sequence corresponds to a single order).</span></span> <span data-ttu-id="bc19e-406">Gildið sem á að nota hér fer mjög eftir flækjustigi leiðarinnar og stillingum eins og takmarkaðri afkastagetu, gott er að byrja á hámarki sem nemur u.þ.b 30 sekúndum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-406">The value to use here highly depends on the complexity of the route and settings like finite capacity, ut a maximum of about 30 seconds is a good starting point.</span></span>

<span data-ttu-id="bc19e-407">Gildi fyrir **Tímalokun á tilraunum hámörkunar** stjórnar því hversu margar sekúndur má nota í mesta lagi til að finna betri lausn en þá sem fannst fyrst.</span><span class="sxs-lookup"><span data-stu-id="bc19e-407">The value for **Optimization attempts timeout** controls how many seconds can at most be used to find a better solution than the one originally found.</span></span> <span data-ttu-id="bc19e-408">Þetta mun aðeins hafa áhrif á leiðir sem nota samhliða aðgerðir þar sem þær gera það nauðsynlegt til að prófa mismunandi samsetningar.</span><span class="sxs-lookup"><span data-stu-id="bc19e-408">This will only influence routes that are using parallel operations as these make it necessary to test different combinations.</span></span>

> [!NOTE]
> <span data-ttu-id="bc19e-409">Gildin sem eru sett upp fyrir tímalokanir verða bæði notuð fyrir röðun útgefinna framleiðslupantana og áætlaðra pantana sem hluta af MRP.</span><span class="sxs-lookup"><span data-stu-id="bc19e-409">The values set for the timeouts will be applied both for scheduling of released production orders and of planned orders as part of MRP.</span></span> <span data-ttu-id="bc19e-410">Þar af leiðandi gætu mjög há gildi bætt umtalsvert við keyrslutíma MRP þegar áætlun er keyrð með mörgum framleiðslupöntunum.</span><span class="sxs-lookup"><span data-stu-id="bc19e-410">As a result, setting very high values could significantly add to the run time of MRP when running for a plan with many planned production orders.</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]